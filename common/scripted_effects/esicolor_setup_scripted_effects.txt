randomise_ai_ideology_path = {
	random_list = {
		seed = random
		25 = {
			set_country_flag = ai_go_democratic
			clr_country_flag = ai_go_fascism
			clr_country_flag = ai_go_communism
			clr_country_flag = ai_go_neutrality
		}
		25 = {
			clr_country_flag = ai_go_democratic
			set_country_flag = ai_go_fascism
			clr_country_flag = ai_go_communism
			clr_country_flag = ai_go_neutrality
		}
		25 = {
			clr_country_flag = ai_go_democratic
			clr_country_flag = ai_go_fascism
			set_country_flag = ai_go_communism
			clr_country_flag = ai_go_neutrality
		}
		25 = {
			clr_country_flag = ai_go_democratic
			clr_country_flag = ai_go_fascism
			clr_country_flag = ai_go_communism
			set_country_flag = ai_go_neutrality
		}
	}
}

make_default_ais_choose_path = {
	hidden_effect = {
		every_country = {
			limit = {
				democratic < 0.26
				fascism < 0.26
				communism < 0.26
				neutrality < 0.26
			}

			randomise_ai_ideology_path = yes
		}
	}
}

set_ideologies_to_neutrality = {
	set_politics = {
		ruling_party = neutrality
	}

	hidden_effect = {
		set_popularities = {
			democratic = 25
			fascism = 25
			communism = 25
			neutrality = 25
		}

		randomise_ai_ideology_path = yes
	}
}

randomise_ideology = {
	random_list = {
		seed = random
		25 = {
			set_politics = {
				ruling_party = democratic
			}
		}
		25 = {
			set_politics = {
				ruling_party = fascism
			}
		}
		25 = {
			set_politics = {
				ruling_party = communism
			}
		}
		25 = {
			set_politics = {
				ruling_party = neutrality
			}
		}
	}
}

randomise_ideology_and_popularity = {
	random_list = {
		seed = random
		25 = {
			set_politics = {
				ruling_party = democratic
			}

			randomise_popularity_democratic = yes
		}
		25 = {
			set_politics = {
				ruling_party = fascism
			}

			randomise_popularity_fascism = yes
		}
		25 = {
			set_politics = {
				ruling_party = communism
			}

			randomise_popularity_communism = yes
		}
		25 = {
			set_politics = {
				ruling_party = neutrality
			}

			randomise_popularity_neutrality = yes
		}
	}
}

randomise_popularity_for_current_party = {
	if = {
		limit = { has_government = democratic }

		randomise_popularity_democratic = yes
	}
	else_if = {
		limit = { has_government = fascism }

		randomise_popularity_fascism = yes
	}
	else_if = {
		limit = { has_government = communism }

		randomise_popularity_communism = yes
	}
	else_if = {
		limit = { has_government = neutrality }

		randomise_popularity_neutrality = yes
	}
}

randomise_popularity = {
	set_temp_variable = { remaining_popularity = 100 }
	set_temp_variable = { leading_popularity = 64 }
	randomize_temp_variable = {
		var = leading_popularity
		distribution = uniform
		min = 45
		max = remaining_popularity
	}

	subtract_from_temp_variable  = { remaining_popularity = leading_popularity }
	set_temp_variable = { other_popularity_1 = 12 }
	randomize_temp_variable = {
		var = other_popularity_1
		distribution = uniform
		min = 0
		max = remaining_popularity
	}

	subtract_from_temp_variable  = { remaining_popularity = other_popularity_1 }
	set_temp_variable = { other_popularity_2 = 12 }
	randomize_temp_variable = {
		var = other_popularity_2
		distribution = uniform
		min = 0
		max = remaining_popularity
	}

	subtract_from_temp_variable  = { remaining_popularity = other_popularity_2 }
	set_temp_variable = { other_popularity_3 = remaining_popularity }
}

randomise_popularity_democratic = {
	hidden_effect = {
		randomise_popularity = yes
		random_list = {
			seed = random
			15 = {
				set_popularities = {
					democratic = leading_popularity
					fascism = other_popularity_1
					communism = other_popularity_2
					neutrality = other_popularity_3
				}
			}
			15 = {
				set_popularities = {
					democratic = leading_popularity
					fascism = other_popularity_2
					communism = other_popularity_3
					neutrality = other_popularity_1
				}
			}
			15 = {
				set_popularities = {
					democratic = leading_popularity
					fascism = other_popularity_3
					communism = other_popularity_1
					neutrality = other_popularity_2
				}
			}
			15 = {
				set_popularities = {
					democratic = leading_popularity
					fascism = other_popularity_3
					communism = other_popularity_2
					neutrality = other_popularity_1
				}
			}
			15 = {
				set_popularities = {
					democratic = leading_popularity
					fascism = other_popularity_2
					communism = other_popularity_1
					neutrality = other_popularity_3
				}
			}
			15 = {
				set_popularities = {
					democratic = leading_popularity
					fascism = other_popularity_1
					communism = other_popularity_3
					neutrality = other_popularity_2
				}
			}
		}
	}
}

randomise_popularity_fascism = {
	hidden_effect = {
		randomise_popularity = yes
		random_list = {
			seed = random
			15 = {
				set_popularities = {
					democratic = other_popularity_1
					fascism = leading_popularity
					communism = other_popularity_2
					neutrality = other_popularity_3
				}
			}
			15 = {
				set_popularities = {
					democratic = other_popularity_2
					fascism = leading_popularity
					communism = other_popularity_3
					neutrality = other_popularity_1
				}
			}
			15 = {
				set_popularities = {
					democratic = other_popularity_3
					fascism = leading_popularity
					communism = other_popularity_1
					neutrality = other_popularity_2
				}
			}
			15 = {
				set_popularities = {
					democratic = other_popularity_3
					fascism = leading_popularity
					communism = other_popularity_2
					neutrality = other_popularity_1
				}
			}
			15 = {
				set_popularities = {
					democratic = other_popularity_2
					fascism = leading_popularity
					communism = other_popularity_1
					neutrality = other_popularity_3
				}
			}
			15 = {
				set_popularities = {
					democratic = other_popularity_1
					fascism = leading_popularity
					communism = other_popularity_3
					neutrality = other_popularity_2
				}
			}
		}
	}
}

randomise_popularity_communism = {
	hidden_effect = {
		randomise_popularity = yes
		random_list = {
			seed = random
			15 = {
				set_popularities = {
					democratic = other_popularity_1
					fascism = other_popularity_2
					communism = leading_popularity
					neutrality = other_popularity_3
				}
			}
			15 = {
				set_popularities = {
					democratic = other_popularity_2
					fascism = other_popularity_3
					communism = leading_popularity
					neutrality = other_popularity_1
				}
			}
			15 = {
				set_popularities = {
					democratic = other_popularity_3
					fascism = other_popularity_1
					communism = leading_popularity
					neutrality = other_popularity_2
				}
			}
			15 = {
				set_popularities = {
					democratic = other_popularity_3
					fascism = other_popularity_2
					communism = leading_popularity
					neutrality = other_popularity_1
				}
			}
			15 = {
				set_popularities = {
					democratic = other_popularity_2
					fascism = other_popularity_1
					communism = leading_popularity
					neutrality = other_popularity_3
				}
			}
			15 = {
				set_popularities = {
					democratic = other_popularity_1
					fascism = other_popularity_3
					communism = leading_popularity
					neutrality = other_popularity_2
				}
			}
		}
	}
}

randomise_popularity_neutrality = {
	hidden_effect = {
		randomise_popularity = yes
		random_list = {
			seed = random
			15 = {
				set_popularities = {
					democratic = other_popularity_1
					fascism = other_popularity_2
					communism = other_popularity_3
					neutrality = leading_popularity
				}
			}
			15 = {
				set_popularities = {
					democratic = other_popularity_2
					fascism = other_popularity_3
					communism = other_popularity_1
					neutrality = leading_popularity
				}
			}
			15 = {
				set_popularities = {
					democratic = other_popularity_3
					fascism = other_popularity_1
					communism = other_popularity_2
					neutrality = leading_popularity
				}
			}
			15 = {
				set_popularities = {
					democratic = other_popularity_3
					fascism = other_popularity_2
					communism = other_popularity_1
					neutrality = leading_popularity
				}
			}
			15 = {
				set_popularities = {
					democratic = other_popularity_2
					fascism = other_popularity_1
					communism = other_popularity_3
					neutrality = leading_popularity
				}
			}
			15 = {
				set_popularities = {
					democratic = other_popularity_1
					fascism = other_popularity_3
					communism = other_popularity_2
					neutrality = leading_popularity
				}
			}
		}
	}
}

equalise_popularity_for_current_party = {
	if = {
		limit = { has_government = democratic }

		set_popularities = {
			democratic = global.setup_party_popularity_ruling
			fascism = global.setup_party_popularity_other
			communism = global.setup_party_popularity_other
			neutrality = global.setup_party_popularity_other
		}
	}
	else_if = {
		limit = { has_government = fascism }

		set_popularities = {
			democratic = global.setup_party_popularity_other
			fascism = global.setup_party_popularity_ruling
			communism = global.setup_party_popularity_other
			neutrality = global.setup_party_popularity_other
		}
	}
	else_if = {
		limit = { has_government = communism }

		set_popularities = {
			democratic = global.setup_party_popularity_other
			fascism = global.setup_party_popularity_other
			communism = global.setup_party_popularity_ruling
			neutrality = global.setup_party_popularity_other
		}
	}
	else_if = {
		limit = { has_government = neutrality }

		set_popularities = {
			democratic = global.setup_party_popularity_other
			fascism = global.setup_party_popularity_other
			communism = global.setup_party_popularity_other
			neutrality = global.setup_party_popularity_ruling
		}
	}
}

switch_popularity_for_current_party = {
	if = {
		limit = { check_variable = { THIS.old_ideology = token:democratic } }

		if = {
			limit = { check_variable = { THIS.new_ideology = token:fascism } }
			switch_popularities_democratic_fascism = yes
		}
		else_if = {
			limit = { check_variable = { THIS.new_ideology = token:communism } }
			switch_popularities_democratic_communism = yes
		}
		else_if = {
			limit = { check_variable = { THIS.new_ideology = token:neutrality } }
			switch_popularities_democratic_neutrality = yes
		}
	}
	else_if = {
		limit = { check_variable = { THIS.old_ideology = token:fascism } }

		if = {
			limit = { check_variable = { THIS.new_ideology = token:democratic } }
			switch_popularities_democratic_fascism = yes
		}
		else_if = {
			limit = { check_variable = { THIS.new_ideology = token:communism } }
			switch_popularities_fascism_communism = yes
		}
		else_if = {
			limit = { check_variable = { THIS.new_ideology = token:neutrality } }
			switch_popularities_fascism_neutrality = yes
		}
	}
	else_if = {
		limit = { check_variable = { THIS.old_ideology = token:communism } }

		if = {
			limit = { check_variable = { THIS.new_ideology = token:democratic } }
			switch_popularities_democratic_communism = yes
		}
		else_if = {
			limit = { check_variable = { THIS.new_ideology = token:fascism } }
			switch_popularities_fascism_communism = yes
		}
		else_if = {
			limit = { check_variable = { THIS.new_ideology = token:neutrality } }
			switch_popularities_communism_neutrality = yes
		}
	}
	else_if = {
		limit = { check_variable = { THIS.old_ideology = token:neutrality } }

		if = {
			limit = { check_variable = { THIS.new_ideology = token:democratic } }
			switch_popularities_democratic_neutrality = yes
		}
		else_if = {
			limit = { check_variable = { THIS.new_ideology = token:fascism } }
			switch_popularities_fascism_neutrality = yes
		}
		else_if = {
			limit = { check_variable = { THIS.new_ideology = token:communism } }
			switch_popularities_communism_neutrality = yes
		}
	}
}
switch_popularities_democratic_fascism = {
	set_popularities = {
		democratic = party_popularity_100@fascism
		fascism = party_popularity_100@democratic
		communism = party_popularity_100@communism
		neutrality = party_popularity_100@neutrality
	}
}
switch_popularities_democratic_communism = {
	set_popularities = {
		democratic = party_popularity_100@communism
		fascism = party_popularity_100@fascism
		communism = party_popularity_100@democratic
		neutrality = party_popularity_100@neutrality
	}
}
switch_popularities_democratic_neutrality = {
	set_popularities = {
		democratic = party_popularity_100@neutrality
		fascism = party_popularity_100@fascism
		communism = party_popularity_100@communism
		neutrality = party_popularity_100@democratic
	}
}
switch_popularities_fascism_neutrality = {
	set_popularities = {
		democratic = party_popularity_100@democratic
		fascism = party_popularity_100@neutrality
		communism = party_popularity_100@communism
		neutrality = party_popularity_100@fascism
	}
}
switch_popularities_fascism_communism = {
	set_popularities = {
		democratic = party_popularity_100@democratic
		fascism = party_popularity_100@communism
		communism = party_popularity_100@fascism
		neutrality = party_popularity_100@neutrality
	}
}
switch_popularities_communism_neutrality = {
	set_popularities = {
		democratic = party_popularity_100@democratic
		fascism = party_popularity_100@fascism
		communism = party_popularity_100@neutrality
		neutrality = party_popularity_100@communism
	}
}

clear_population = {
	add_manpower = -2000000
	add_manpower = -2000000
	add_manpower = -2000000
	add_manpower = -2000000
	add_manpower = -2000000
	add_manpower = -2000000
}

get_total_manpower = {
	set_variable = { global.total_pop = 0 }
	clear_array = global.populations
	every_state = {
		add_to_variable = { global.total_pop = state_population_k }
		add_to_array = { global.populations = state_population_k }
	}
	set_variable = { global.per_state_pop = global.total_pop }
	divide_variable = { global.per_state_pop = 1046 }
	multiply_variable = { global.per_state_pop = 1000 }
	round_variable = global.per_state_pop
}

randomise_population = {
	hidden_effect = {
		every_state = {
			set_temp_variable = { manpowertoadd = 500000 }
			randomize_temp_variable = {
				var = manpowertoadd
				distribution = uniform
				min = global.setup_population_min
				max = global.setup_population_max
			}

			clear_population = yes
			add_manpower = manpowertoadd
			add_manpower = manpowertoadd
		}
	}
}

shuffle_population = {
	every_state = {
		set_temp_variable = { random_index = 0 }
		set_temp_variable = { highest_index = global.populations^num }
		subtract_from_temp_variable = { highest_index = 1 }
		randomize_temp_variable = {
			var = random_index
			distribution = uniform
			min = 0
			max = highest_index
		}
		round_temp_variable = random_index

		set_temp_variable = { chosen_value = global.populations^random_index }

		clear_population = yes

		multiply_temp_variable = { chosen_value = 100 }

		for_loop_effect = {
			end = 10

			add_manpower = chosen_value
		}

		remove_from_array = {
			array = global.populations
			index = random_index
		}
		set_temp_variable = { break = 1 }
	}
}
print_populations = {
	every_state = {
		log = "[GetDateText] [This.GetName] population: [?state_population_k]"
	}
}

randomise_infrastructure = {
	hidden_effect = {
		every_state = {
			set_temp_variable = { infrastructuretoadd = 2 }
			randomize_temp_variable = {
				var = infrastructuretoadd
				distribution = uniform
				min = global.setup_infrastructure_min
				max = global.setup_infrastructure_max
			}

			set_building_level = {
				type = infrastructure
				level = infrastructuretoadd
				instant_build = yes
			}
		}
	}
}

clear_factories = {
	custom_effect_tooltip = esicolor.5.b_tt1
	custom_effect_tooltip = esicolor.5.b_tt2
	clear_civilian_factories = yes
	clear_military_factories = yes
}

clear_civilian_factories = {
	hidden_effect = {
		set_building_level = {
			type = industrial_complex
			level = 0
			instant_build = yes
		}
	}
}

clear_military_factories = {
	hidden_effect = {
		set_building_level = {
			type = arms_factory
			level = 0
			instant_build = yes
		}
	}
}

randomise_factories = {
	randomise_civilian_factories = yes
	randomise_military_factories = yes
}

randomise_civilian_factories = {
	hidden_effect = {
		every_state = {
			clear_civilian_factories = yes

			set_temp_variable = { civstoadd = 1 }
			randomize_temp_variable = {
				var = civstoadd
				distribution = uniform
				min = global.setup_civilian_factories_min
				max = global.setup_civilian_factories_max
			}

			add_building_construction = {
				type = industrial_complex
				level = civstoadd
				instant_build = yes
			}
		}
	}
}

randomise_military_factories = {
	hidden_effect = {
		every_state = {
			clear_military_factories = yes

			set_temp_variable = { milstoadd = 1 }
			randomize_temp_variable = {
				var = milstoadd
				distribution = uniform
				min = global.setup_military_factories_min
				max = global.setup_military_factories_max
			}

			add_building_construction = {
				type = arms_factory
				level = milstoadd
				instant_build = yes
			}
		}
	}
}

clear_dockyards = {
	custom_effect_tooltip = esicolor.11.b_tt
	hidden_effect = {
		set_building_level = {
			type = dockyard
			level = 0
			instant_build = yes
		}
	}
}

randomise_dockyards = {
	every_state = {
		limit = { is_coastal = yes }

		hidden_effect = {
			clear_dockyards = yes

			set_temp_variable = { dyardstoadd = 1 }
			randomize_temp_variable = {
				var = dyardstoadd
				distribution = uniform
				min = global.setup_dockyards_min
				max = global.setup_dockyards_max
			}

			add_building_construction = {
				type = dockyard
				level = dyardstoadd
				instant_build = yes
			}
		}
	}
}

clear_synthetic_refineries = {
	custom_effect_tooltip = esicolor.16.b_tt
	hidden_effect = {
		every_state = {
			set_building_level = {
				type = synthetic_refinery
				level = 0
				instant_build = yes
			}
		}
	}
}

randomise_synthetic_refineries = {
	hidden_effect = {
		clear_synthetic_refineries = yes

		set_temp_variable = { refineriestoadd = 5 }
		randomize_temp_variable = {
			var = refineriestoadd
			distribution = uniform
			min = global.setup_synthetic_refineries_min
			max = global.setup_synthetic_refineries_max
		}

		while_loop_effect = {
			limit = { check_variable = { refineriestoadd > 0 } }

			random_state = {
				limit = { synthetic_refinery < 1 }

				add_building_construction = {
					type = synthetic_refinery
					level = 1
					instant_build = yes
				}
			}

			subtract_from_temp_variable = { refineriestoadd = 1 }
		}
	}
}

clear_fuel_silos = {
	custom_effect_tooltip = esicolor.17.b_tt
	hidden_effect = {
		set_building_level = {
			type = fuel_silo
			level = 0
			instant_build = yes
		}
	}
}

randomise_fuel_silos = {
	every_state = {
		clear_fuel_silos = yes

		random = {
			chance = global.setup_fuel_silos_chance

			add_building_construction = {
				type = fuel_silo
				level = 1
				instant_build = yes
			}
		}
	}
}

clear_anti_air = {
	set_building_level = {
		type = anti_air_building
		level = 0
		instant_build = yes
	}
}

randomise_anti_air = {
	every_state = {
		random_list = {
			seed = random
			var:global.starting_anti_air_count_0 = {
				modifier = {
					add = -2

					has_start_date > 1939.1.1
				}
				modifier = {
					factor = 0

					check_variable = { global.setup_anti_air_min > 0 }
				}
				set_building_level = {
					type = anti_air_building
					level = 0
					instant_build = yes
				}
			}
			var:global.starting_anti_air_count_1 = {
				modifier = {
					factor = 0

					OR = {
						check_variable = { global.setup_anti_air_min > 1 }
						check_variable = { global.setup_anti_air_max < 1 }
					}
				}
				set_building_level = {
					type = anti_air_building
					level = 1
					instant_build = yes
				}
			}
			var:global.starting_anti_air_count_2 = {
				modifier = {
					add = -2

					has_start_date > 1939.1.1
				}
				modifier = {
					factor = 0

					OR = {
						check_variable = { global.setup_anti_air_min > 2 }
						check_variable = { global.setup_anti_air_max < 2 }
					}
				}
				set_building_level = {
					type = anti_air_building
					level = 2
					instant_build = yes
				}
			}
			var:global.starting_anti_air_count_3 = {
				modifier = {
					factor = 0

					OR = {
						check_variable = { global.setup_anti_air_min > 3 }
						check_variable = { global.setup_anti_air_max < 3 }
					}
				}
				set_building_level = {
					type = anti_air_building
					level = 3
					instant_build = yes
				}
			}
			var:global.starting_anti_air_count_4 = {
				modifier = {
					add = 1

					OR = {
						check_variable = { global.setup_anti_air_min = 4 }
						check_variable = { global.setup_anti_air_max = 4 }
					}
				}
				set_building_level = {
					type = anti_air_building
					level = 4
					instant_build = yes
				}
			}
			var:global.starting_anti_air_count_5 = {
				modifier = {
					add = 4

					has_start_date > 1939.1.1
				}
				modifier = {
					factor = 0

					check_variable = { global.setup_anti_air_max < 5 }
				}
				set_building_level = {
					type = anti_air_building
					level = 5
					instant_build = yes
				}
			}
		}
	}
}

clear_airbases = {
	set_building_level = {
		type = air_base
		level = 0
		instant_build = yes
	}
}

place_starting_air_bases = {
	every_state = {
		if = {
			limit = { has_level_1_air_base = yes }
			set_building_level = {
				type = air_base
				level = 1
				instant_build = yes
			}
		}
		else_if = {
			limit = { has_level_2_air_base = yes }
			set_building_level = {
				type = air_base
				level = 2
				instant_build = yes
			}
		}
		else_if = {
			limit = { has_level_3_air_base = yes }
			set_building_level = {
				type = air_base
				level = 3
				instant_build = yes
			}
		}
		else_if = {
			limit = { has_level_4_air_base = yes }
			set_building_level = {
				type = air_base
				level = 4
				instant_build = yes
			}
		}
		else_if = {
			limit = { has_level_5_air_base = yes }
			set_building_level = {
				type = air_base
				level = 5
				instant_build = yes
			}
		}
		else_if = {
			limit = { has_level_6_air_base = yes }
			set_building_level = {
				type = air_base
				level = 6
				instant_build = yes
			}
		}
		else_if = {
			limit = { has_level_7_air_base = yes }
			set_building_level = {
				type = air_base
				level = 7
				instant_build = yes
			}
		}
		else_if = {
			limit = { has_level_8_air_base = yes }
			set_building_level = {
				type = air_base
				level = 8
				instant_build = yes
			}
		}
		else_if = {
			limit = { has_level_10_air_base = yes }
			set_building_level = {
				type = air_base
				level = 10
				instant_build = yes
			}
		}
	}
}

randomise_air_bases = {
	every_state = {
		random_list = {
			seed = random
			var:global.starting_air_base_count_0 = {
				modifier = {
					factor = 0

					check_variable = { global.setup_air_bases_min > 0 }
				}
				set_building_level = {
					type = air_base
					level = 0
					instant_build = yes
				}
			}
			var:global.starting_air_base_count_1 = {
				modifier = {
					factor = 0

					OR = {
						check_variable = { global.setup_air_bases_min > 1 }
						check_variable = { global.setup_air_bases_max < 1 }
					}
				}
				set_building_level = {
					type = air_base
					level = 1
					instant_build = yes
				}
			}
			var:global.starting_air_base_count_2 = {
				modifier = {
					factor = 0

					OR = {
						check_variable = { global.setup_air_bases_min > 2 }
						check_variable = { global.setup_air_bases_max < 2 }
					}
				}
				set_building_level = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
			var:global.starting_air_base_count_3 = {
				modifier = {
					factor = 0

					OR = {
						check_variable = { global.setup_air_bases_min > 3 }
						check_variable = { global.setup_air_bases_max < 3 }
					}
				}
				set_building_level = {
					type = air_base
					level = 3
					instant_build = yes
				}
			}
			var:global.starting_air_base_count_4 = {
				modifier = {
					factor = 0

					OR = {
						check_variable = { global.setup_air_bases_min > 4 }
						check_variable = { global.setup_air_bases_max < 4 }
					}
				}
				set_building_level = {
					type = air_base
					level = 4
					instant_build = yes
				}
			}
			var:global.starting_air_base_count_5 = {
				modifier = {
					factor = 0

					OR = {
						check_variable = { global.setup_air_bases_min > 5 }
						check_variable = { global.setup_air_bases_max < 5 }
					}
				}
				set_building_level = {
					type = air_base
					level = 5
					instant_build = yes
				}
			}
			var:global.starting_air_base_count_6 = {
				modifier = {
					factor = 0

					OR = {
						check_variable = { global.setup_air_bases_min > 6 }
						check_variable = { global.setup_air_bases_max < 6 }
					}
				}
				set_building_level = {
					type = air_base
					level = 6
					instant_build = yes
				}
			}
			var:global.starting_air_base_count_7 = {
				modifier = {
					factor = 0

					OR = {
						check_variable = { global.setup_air_bases_min > 7 }
						check_variable = { global.setup_air_bases_max < 7 }
					}
				}
				set_building_level = {
					type = air_base
					level = 7
					instant_build = yes
				}
			}
			var:global.starting_air_base_count_8 = {
				modifier = {
					factor = 0

					OR = {
						check_variable = { global.setup_air_bases_min > 8 }
						check_variable = { global.setup_air_bases_max < 8 }
					}
				}
				set_building_level = {
					type = air_base
					level = 8
					instant_build = yes
				}
			}
			var:global.starting_air_base_count_9 = {
				modifier = {
					add = 1

					OR = {
						check_variable = { global.setup_air_bases_min = 9 }
						check_variable = { global.setup_air_bases_max = 9 }
					}
				}
				set_building_level = {
					type = air_base
					level = 9
					instant_build = yes
				}
			}
			var:global.starting_air_base_count_10 = {
				modifier = {
					factor = 0

					check_variable = { global.setup_air_bases_max < 10 }
				}
				set_building_level = {
					type = air_base
					level = 10
					instant_build = yes
				}
			}
		}
	}
}

clear_radar_stations = {
	set_building_level = {
		type = radar_station
		level = 0
		instant_build = yes
	}
}

randomise_radar_stations = {
	every_state = {
		set_temp_variable = { radar_stations_minus = 100 }
		subtract_from_temp_variable = { radar_stations_minus = global.setup_radar_stations_chance }
		random_list = {
			seed = random
			global.setup_radar_stations_chance = {
				set_building_level = {
					type = radar_station
					level = 1
					instant_build = yes
				}
			}
			radar_stations_minus = {
				set_building_level = {
					type = radar_station
					level = 0
					instant_build = yes
				}
			}
		}
	}
}

randomise_state_category = {
	every_state = {
		random_list = {
			seed = random
			10 = {
				modifier = {
					factor = 0

					check_variable = { global.setup_state_category_min > 0 }
				}

				set_state_category = wasteland
			}
			10 = {
				modifier = {
					factor = 0

					OR = {
						check_variable = { global.setup_state_category_min > 1 }
						check_variable = { global.setup_state_category_max < 1 }
					}
				}

				set_state_category = pastoral
			}
			10 = {
				modifier = {
					factor = 0

					OR = {
						check_variable = { global.setup_state_category_min > 2 }
						check_variable = { global.setup_state_category_max < 2 }
					}
				}

				set_state_category = rural
			}
			10 = {
				modifier = {
					factor = 0

					OR = {
						check_variable = { global.setup_state_category_min > 3 }
						check_variable = { global.setup_state_category_max < 3 }
					}
				}

				set_state_category = town
			}
			10 = {
				modifier = {
					factor = 0

					OR = {
						check_variable = { global.setup_state_category_min > 4 }
						check_variable = { global.setup_state_category_max < 4 }
					}
				}

				set_state_category = large_town
			}
			10 = {
				modifier = {
					factor = 0

					OR = {
						check_variable = { global.setup_state_category_min > 5 }
						check_variable = { global.setup_state_category_max < 5 }
					}
				}

				set_state_category = city
			}
			10 = {
				modifier = {
					factor = 0

					OR = {
						check_variable = { global.setup_state_category_min > 6 }
						check_variable = { global.setup_state_category_max < 6 }
					}
				}

				set_state_category = large_city
			}
			10 = {
				modifier = {
					factor = 0

					OR = {
						check_variable = { global.setup_state_category_min > 7 }
						check_variable = { global.setup_state_category_max < 7 }
					}
				}

				set_state_category = metropolis
			}
			10 = {
				modifier = {
					factor = 0

					check_variable = { global.setup_state_category_max < 8 }
				}

				set_state_category = megalopolis
			}
		}
	}
}

clear_forts = {
	every_state = {
		set_building_level = {
			type = bunker
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		set_building_level = {
			type = coastal_bunker
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
	}
}

clear_dams = {
	every_state = {
		set_building_level = {
			type = dam
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		set_building_level = {
			type = dam_mountain
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
	}
}

clear_facilities = {
	every_state = {
		remove_building = {
			type = naval_facility
			level = 1
		}
		remove_building = {
			type = nuclear_facility
			level = 1
		}
		remove_building = {
			type = air_facility
			level = 1
		}
		remove_building = {
			type = land_facility
			level = 1
		}
	}
}

# Since this needs province information, i can't log it in history and spawn back here.
# So i need each of them noted separately. At least there aren't many of them.
# Actually, can't even clear them in history, so couldn't even log them at the first place.
setup_default_facilities = {
	16 = {
		set_building_level = {
			type = land_facility
			level = 1
			province = 9534
			instant_build = yes
		}
	}
	64 = {
		set_building_level = {
			type = land_facility
			level = 1
			province = 3499
			instant_build = yes
		}
	}
	127 = {
		set_building_level = {
			type = naval_facility
			level = 1
			province = 13070
			instant_build = yes
		}
	}
	361 = {
		set_building_level = {
			type = naval_facility
			level = 1
			province = 3957
			instant_build = yes
		}
	}
	529 = {
		set_building_level = {
			type = naval_facility
			level = 1
			province = 1092
			instant_build = yes
		}
	}

	if = {
		limit = { date > 1939.1.1 }

		56 = {
			set_building_level = {
				type = naval_facility
				level = 1
				province = 241
				instant_build = yes
			}
		}
		62 = {
			set_building_level = {
				type = air_facility
				level = 1
				province = 9388
				instant_build = yes
			}
		}
		137 = {
			set_building_level = {
				type = naval_facility
				level = 1
				province = 3686
				instant_build = yes
			}
		}
		158 = {
			set_building_level = {
				type = naval_facility
				level = 1
				province = 6788
				instant_build = yes
			}
		}
		219 = {
			set_building_level = {
				type = land_facility
				level = 1
				province = 3391
				instant_build = yes
			}
		}
		260 = {
			set_building_level = {
				type = air_facility
				level = 1
				province = 9448
				instant_build = yes
			}
		}
		386 = {
			set_building_level = {
				type = air_facility
				level = 1
				province = 7315
				instant_build = yes
			}
		}
		393 = {
			set_building_level = {
				type = land_facility
				level = 1
				province = 6710
				instant_build = yes
			}
		}
		528 = {
			set_building_level = {
				type = naval_facility
				level = 1
				province = 7110
				instant_build = yes
			}
		}
		532 = {
			set_building_level = {
				type = air_facility
				level = 1
				province = 10125
				instant_build = yes
			}
		}
		851 = {
			set_building_level = {
				type = naval_facility
				level = 1
				province = 911
				instant_build = yes
			}
		}
	}
}

clear_landmarks = {
	every_state = {
		set_building_level = {
			type = landmark_big_ben
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		set_building_level = {
			type = landmark_colosseum
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		set_building_level = {
			type = landmark_cristo_redentor
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		set_building_level = {
			type = landmark_eiffel_tower
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		set_building_level = {
			type = landmark_statue_of_liberty
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		set_building_level = {
			type = landmark_kremlin
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		set_building_level = {
			type = landmark_hofburg_palace
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		set_building_level = {
			type = landmark_berlin_reichstag
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		set_building_level = {
			type = landmark_berlin_volkshalle
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		set_building_level = {
			type = landmark_taj_mahal
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		set_building_level = {
			type = landmark_sadabad_complex
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		set_building_level = {
			type = landmark_hagia_sophia
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		set_building_level = {
			type = landmark_forbidden_city
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		set_building_level = {
			type = landmark_nanjing_presidential_palace
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		set_building_level = {
			type = landmark_nanjing_presidential_palace_prc
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		set_building_level = {
			type = landmark_nanjing_presidential_palace_gen
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		set_building_level = {
			type = landmark_great_wall_section
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		remove_province_modifier = {
			static_modifiers = { the_great_wall }

			province = { all_provinces = yes }
		}
		set_building_level = {
			type = landmark_tokyo_imperial_palace
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		set_building_level = {
			type = landmark_national_diet
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
		set_building_level = {
			type = landmark_hakko_ichiu
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
	}
}

clear_naval_headquarters = {
	every_state = {
		set_building_level = {
			type = naval_headquarters
			level = 0
			province = { all_provinces = yes }
			instant_build = yes
		}
	}
}

# Similar situation with facilities, tho seems like i can remove them in history.
setup_default_naval_headquarters = {
	14 = {
		set_building_level = {
			type = naval_headquarters
			level = 1
			province = 3552
			instant_build = yes
		}
	}
	56 = {
		set_building_level = {
			type = naval_headquarters
			level = 1
			province = 241
			instant_build = yes
		}
	}
	126 = {
		set_building_level = {
			type = naval_headquarters
			level = 1
			province = 11374
			instant_build = yes
		}
	}
	137 = {
		set_building_level = {
			type = naval_headquarters
			level = 1
			province = 3686
			instant_build = yes
		}
	}
	362 = {
		set_building_level = {
			type = naval_headquarters
			level = 1
			province = 788
			instant_build = yes
		}
	}
	529 = {
		set_building_level = {
			type = naval_headquarters
			level = 1
			province = 1092
			instant_build = yes
		}
	}
	629 = {
		set_building_level = {
			type = naval_headquarters
			level = 1
			province = 4180
			instant_build = yes
		}
	}
	849 = {
		set_building_level = {
			type = naval_headquarters
			level = 1
			province = 11837
			instant_build = yes
		}
	}
	1021 = {
		set_building_level = {
			type = naval_headquarters
			level = 1
			province = 12299
			instant_build = yes
		}
	}
}

clear_resources = {
	hidden_effect = {
		set_temp_variable = { infrahere = building_level@infrastructure }
		divide_temp_variable = { infrahere = 5 }
		add_to_temp_variable = { infrahere = 1 }
		set_temp_variable = { oilhere = resource@oil }
		divide_temp_variable = { oilhere = infrahere }
		multiply_temp_variable = { oilhere = -1 }
		add_resource = {
			type = oil
			amount = oilhere
		}
		set_temp_variable = { rubberhere = resource@rubber }
		divide_temp_variable = { rubberhere = infrahere }
		multiply_temp_variable = { rubberhere = -1 }
		add_resource = {
			type = rubber
			amount = rubberhere
		}
		set_temp_variable = { steelhere = resource@steel }
		divide_temp_variable = { steelhere = infrahere }
		multiply_temp_variable = { steelhere = -1 }
		add_resource = {
			type = steel
			amount = steelhere
		}
		set_temp_variable = { aluminiumhere = resource@aluminium }
		divide_temp_variable = { aluminiumhere = infrahere }
		multiply_temp_variable = { aluminiumhere = -1 }
		add_resource = {
			type = aluminium
			amount = aluminiumhere
		}
		set_temp_variable = { tungstenhere = resource@tungsten }
		divide_temp_variable = { tungstenhere = infrahere }
		multiply_temp_variable = { tungstenhere = -1 }
		add_resource = {
			type = tungsten
			amount = tungstenhere
		}
		set_temp_variable = { chromiumhere = resource@chromium }
		divide_temp_variable = { chromiumhere = infrahere }
		multiply_temp_variable = { chromiumhere = -1 }
		add_resource = {
			type = chromium
			amount = chromiumhere
		}
		set_temp_variable = { coalhere = resource@coal }
		divide_temp_variable = { coalhere = infrahere }
		multiply_temp_variable = { coalhere = -1 }
		add_resource = {
			type = coal
			amount = coalhere
		}
	}
}

setup_default_resources = {
	hidden_effect = {
		every_state = {
			if = {
				limit = { check_variable = { starting_oil > 0 } }

				add_resource = {
					type = oil
					amount = starting_oil
				}
			}
			if = {
				limit = { check_variable = { starting_rubber > 0 } }

				add_resource = {
					type = rubber
					amount = starting_rubber
				}
			}
			if = {
				limit = { check_variable = { starting_steel > 0 } }

				add_resource = {
					type = steel
					amount = starting_steel
				}
			}
			if = {
				limit = { check_variable = { starting_aluminium > 0 } }

				add_resource = {
					type = aluminium
					amount = starting_aluminium
				}
			}
			if = {
				limit = { check_variable = { starting_tungsten > 0 } }

				add_resource = {
					type = tungsten
					amount = starting_tungsten
				}
			}
			if = {
				limit = { check_variable = { starting_chromium > 0 } }

				add_resource = {
					type = chromium
					amount = starting_chromium
				}
			}
			if = {
				limit = { check_variable = { starting_coal > 0 } }

				add_resource = {
					type = coal
					amount = starting_coal
				}
			}
		}
	}
}

setup_equal_resources = {
	hidden_effect = {
		add_resource = {
			type = oil
			amount = 10
		}
		add_resource = {
			type = rubber
			amount = 3
		}
		add_resource = {
			type = steel
			amount = 15
		}
		add_resource = {
			type = aluminium
			amount = 5
		}
		add_resource = {
			type = tungsten
			amount = 5
		}
		add_resource = {
			type = chromium
			amount = 2
		}
		add_resource = {
			type = coal
			amount = 10
		}
	}
}

randomise_resources = {
	random_list = {
		seed = random
		15 = {
			modifier = {
				factor = 0

				oil > 0
			}
			custom_effect_tooltip = esicolor.8.e_tt1
			hidden_effect = {
				set_temp_variable = { resourcetoadd = 10 }
				randomize_temp_variable = {
					var = resourcetoadd
					distribution = uniform
					min = global.setup_resource_oil_min
					max = global.setup_resource_oil_max
				}

				add_resource = {
					type = oil
					amount = resourcetoadd
				}
			}
		}
		15 = {
			modifier = {
				factor = 0

				rubber > 0
			}
			custom_effect_tooltip = esicolor.8.e_tt2
			hidden_effect = {
				set_temp_variable = { resourcetoadd = 3 }
				randomize_temp_variable = {
					var = resourcetoadd
					distribution = uniform
					min = global.setup_resource_rubber_min
					max = global.setup_resource_rubber_max
				}

				add_resource = {
					type = rubber
					amount = resourcetoadd
				}
			}
		}
		15 = {
			modifier = {
				factor = 0

				steel > 0
			}
			custom_effect_tooltip = esicolor.8.e_tt3
			hidden_effect = {
				set_temp_variable = { resourcetoadd = 15 }
				randomize_temp_variable = {
					var = resourcetoadd
					distribution = uniform
					min = global.setup_resource_steel_min
					max = global.setup_resource_steel_max
				}

				add_resource = {
					type = steel
					amount = resourcetoadd
				}
			}
		}
		15 = {
			modifier = {
				factor = 0

				aluminium > 0
			}
			custom_effect_tooltip = esicolor.8.e_tt4
			hidden_effect = {
				set_temp_variable = { resourcetoadd = 5 }
				randomize_temp_variable = {
					var = resourcetoadd
					distribution = uniform
					min = global.setup_resource_aluminium_min
					max = global.setup_resource_aluminium_max
				}

				add_resource = {
					type = aluminium
					amount = resourcetoadd
				}
			}
		}
		15 = {
			modifier = {
				factor = 0

				tungsten > 0
			}
			custom_effect_tooltip = esicolor.8.e_tt5
			hidden_effect = {
				set_temp_variable = { resourcetoadd = 5 }
				randomize_temp_variable = {
					var = resourcetoadd
					distribution = uniform
					min = global.setup_resource_tungsten_min
					max = global.setup_resource_tungsten_max
				}

				add_resource = {
					type = tungsten
					amount = resourcetoadd
				}
			}
		}
		15 = {
			modifier = {
				factor = 0

				chromium > 0
			}
			custom_effect_tooltip = esicolor.8.e_tt6
			hidden_effect = {
				set_temp_variable = { resourcetoadd = 2 }
				randomize_temp_variable = {
					var = resourcetoadd
					distribution = uniform
					min = global.setup_resource_chromium_min
					max = global.setup_resource_chromium_max
				}

				add_resource = {
					type = chromium
					amount = resourcetoadd
				}
			}
		}
		15 = {
			modifier = {
				factor = 0

				coal > 0
			}
			custom_effect_tooltip = esicolor.8.e_tt7
			hidden_effect = {
				set_temp_variable = { resourcetoadd = 2 }
				randomize_temp_variable = {
					var = resourcetoadd
					distribution = uniform
					min = global.setup_resource_coal_min
					max = global.setup_resource_coal_max
				}

				add_resource = {
					type = coal
					amount = resourcetoadd
				}
			}
		}
	}
}

give_transport_1 = {
	set_technology = {
		mtg_transport = 1
	}
}

give_destroyer_1 = {
	set_technology = {
		early_ship_hull_light = 1
		basic_battery = 1
	}

	if = {
		limit = { is_ai = yes }
		create_equipment_variant = {
			name = "Early Destoryer 1"
			type = ship_hull_light_1
			parent_version = 0
			modules = {
				fixed_ship_battery_slot = ship_light_battery_1
				fixed_ship_anti_air_slot = empty
				fixed_ship_fire_control_system_slot = empty
				fixed_ship_radar_slot = empty
				fixed_ship_engine_slot = light_ship_engine_1
				fixed_ship_torpedo_slot = empty
				mid_1_custom_slot = empty
				rear_1_custom_slot = empty
			}
		}
	}
}

give_submarine_1 = {
	set_technology = {
		early_ship_hull_submarine = 1
		basic_torpedo = 1
	}

	if = {
		limit = { is_ai = yes }
		create_equipment_variant = {
			name = "Early Submarine 1"
			type = ship_hull_submarine_1
			parent_version = 0
			modules = {
				fixed_ship_torpedo_slot = ship_torpedo_sub_1
				fixed_ship_engine_slot = sub_ship_engine_1
				rear_1_custom_slot = empty
			}
		}
	}
}

give_gwtank = {
	if = {
		limit = {
			has_dlc = "No Step Back"
		}
		set_technology = {
			gwtank_chassis = 1
		}

		create_equipment_variant = {
			name = "Inter-War Light Tank"
			type = light_tank_chassis_0
			parent_version = 0
			modules = {
				main_armament_slot = tank_heavy_machine_gun
				turret_type_slot = tank_light_one_man_tank_turret
				suspension_type_slot = tank_bogie_suspension
				armor_type_slot = tank_riveted_armor
				engine_type_slot = tank_gasoline_engine
			}
			upgrades = {
				tank_nsb_engine_upgrade = 1
				tank_nsb_armor_upgrade = 1
			}
			icon = "GFX_generic_gw_light_tank_medium"
		}
		create_equipment_variant = {
			name = "Inter-War Medium Tank"
			type = medium_tank_chassis_0
			parent_version = 0
			modules = {
				main_armament_slot = tank_auto_cannon
				turret_type_slot = tank_medium_one_man_tank_turret
				suspension_type_slot = tank_bogie_suspension
				armor_type_slot = tank_riveted_armor
				engine_type_slot = tank_gasoline_engine
			}
			upgrades = {
				tank_nsb_engine_upgrade = 1
				tank_nsb_armor_upgrade = 1
			}
			icon = "GFX_generic_gw_medium_tank_medium"
		}
		create_equipment_variant = {
			name = "Inter-War Heavy Tank"
			type = heavy_tank_chassis_0
			parent_version = 0
			modules = {
				main_armament_slot = tank_small_cannon
				turret_type_slot = tank_heavy_two_man_tank_turret
				suspension_type_slot = tank_bogie_suspension
				armor_type_slot = tank_riveted_armor
				engine_type_slot = tank_gasoline_engine
			}
			upgrades = {
				tank_nsb_engine_upgrade = 1
				tank_nsb_armor_upgrade = 1
			}
			icon = "GFX_generic_gw_heavy_tank_medium"
		}
	}
	else = {
		set_technology = {
			gwtank = 1
		}
	}
}

give_early_fighter = {
	if = {
		limit = {
			has_dlc = "By Blood Alone"
		}
		set_technology = {
			aa_lmg = 1
			engines_1 = 1
			iw_small_airframe = 1
		}

		if = {
			limit = { is_ai = yes }
			create_equipment_variant = {
				name = "Early Fighter"
				type = small_plane_airframe_0
				modules = {
					fixed_main_weapon_slot = light_mg_2x
					engine_type_slot = engine_1_1x
					special_type_slot_1 = lmg_defense_turret
				}
			}
		}
	}
	else = {
		set_technology = {
			early_fighter = 1
		}
	}
}

give_basic_cas = {
	if = {
		limit = {
			has_dlc = "By Blood Alone"
		}
		set_technology = {
			basic_small_airframe = 1
			early_bombs = 1
		}

		if = {
			limit = { is_ai = yes }
			create_equipment_variant = {
				name = "Basic CAS"
				type = small_plane_cas_airframe_1
				modules = {
					fixed_main_weapon_slot = small_bomb_bay
					fixed_auxiliary_weapon_slot_1 = empty
					engine_type_slot = engine_2_1x
					special_type_slot_1 = empty
					special_type_slot_2 = empty
				}
			}
		}
	}
	else = {
		set_technology = {
			CAS1 = 1
		}
	}
}

give_basic_naval_bomber = {
	if = {
		limit = {
			has_dlc = "By Blood Alone"
		}
		set_technology = {
			basic_small_airframe = 1
			air_torpedoe_1 = 1
		}

		if = {
			limit = { is_ai = yes }
			create_equipment_variant = {
				name = "Basic Naval Bomber"
				type = small_plane_naval_bomber_airframe_1
				modules = {
					fixed_main_weapon_slot = torpedo_mounting
					fixed_auxiliary_weapon_slot_1 = empty
					engine_type_slot = engine_2_1x
					special_type_slot_1 = empty
					special_type_slot_2 = empty
				}
			}
		}
	}
	else = {
		set_technology = {
			naval_bomber1 = 1
		}
	}
}

give_early_bomber = {
	if = {
		limit = {
			has_dlc = "By Blood Alone"
		}
		set_technology = {
			early_bombs = 1
			engines_1 = 1
			iw_medium_airframe = 1
		}

		if = {
			limit = { is_ai = yes }
			create_equipment_variant = {
				name = "Early Bomber"
				type = medium_plane_airframe_0
				modules = {
					fixed_main_weapon_slot = medium_bomb_bay
					engine_type_slot = engine_1_3x
					special_type_slot_1 = lmg_defense_turret
				}
			}
		}
	}
	else = {
		set_technology = {
			early_bomber = 1
		}
	}
}

setup_technology_option_1 = {
	set_technology = {
		tech_trucks = 1
		tech_support = 1
		gw_artillery = 1
	}
	give_transport_1 = yes
}

randomise_technology = {
	set_temp_variable = { mountaineers_paratroopers_marines_minus = 100 }
	if = {
		limit = { has_dlc = "No Compromise, No Surrender" }

		set_temp_variable = { mountaineers_paratroopers_marines_quarter = global.setup_technology_tech_mountaineers_paratroopers_marines }
		subtract_from_temp_variable = { mountaineers_paratroopers_marines_minus = global.setup_technology_tech_mountaineers_paratroopers_marines }
		divide_temp_variable = { mountaineers_paratroopers_marines_quarter = 4 }
		random_list = {
			seed = random
			mountaineers_paratroopers_marines_quarter = {
				set_technology = { marines = 1 }
			}
			mountaineers_paratroopers_marines_quarter = {
				set_technology = { paratroopers = 1 }
			}
			mountaineers_paratroopers_marines_quarter = {
				set_technology = { tech_mountaineers = 1 }
			}
			mountaineers_paratroopers_marines_quarter = {
				set_technology = { rangers_tech = 1 }
			}
			mountaineers_paratroopers_marines_minus = { }
		}
	}
	else = {
		set_temp_variable = { mountaineers_paratroopers_marines_third = global.setup_technology_tech_mountaineers_paratroopers_marines }
		subtract_from_temp_variable = { mountaineers_paratroopers_marines_minus = global.setup_technology_tech_mountaineers_paratroopers_marines }
		divide_temp_variable = { mountaineers_paratroopers_marines_third = 3 }
		random_list = {
			seed = random
			mountaineers_paratroopers_marines_third = {
				set_technology = { marines = 1 }
			}
			mountaineers_paratroopers_marines_third = {
				set_technology = { paratroopers = 1 }
			}
			mountaineers_paratroopers_marines_third = {
				set_technology = { tech_mountaineers = 1 }
			}
			mountaineers_paratroopers_marines_minus = { }
		}
	}

	set_temp_variable = { transport_1_minus = 100 }
	subtract_from_temp_variable = { transport_1_minus = global.setup_technology_transport_1 }
	set_temp_variable = { destroyer_1_minus = 100 }
	subtract_from_temp_variable = { destroyer_1_minus = global.setup_technology_destroyer_1 }
	random_list = {
		seed = random
		global.setup_technology_transport_1 = {
			modifier = {
				factor = 3
				any_owned_state = { is_coastal = yes }
			}

			give_transport_1 = yes
		}
		transport_1_minus = { }
	}
	random_list = {
		seed = random
		global.setup_technology_destroyer_1 = {
			modifier = {
				factor = 3
				any_owned_state = { is_coastal = yes }
			}

			give_destroyer_1 = yes
		}
		destroyer_1_minus = { }
	}

	random = {
		chance =  global.setup_technology_infantry_weapons1

		set_technology = { infantry_weapons1 = 1 }

		random = {
			chance = global.setup_technology_tech_support

			set_technology = { tech_support = 1 }

			set_temp_variable = { tech_engineer_recon_mp_minus = 100 }
			set_temp_variable = { tech_engineer_recon_mp_fifth = global.setup_technology_tech_engineer_recon_mp }
			subtract_from_temp_variable = { tech_engineer_recon_mp_minus = global.setup_technology_tech_engineer_recon_mp }
			divide_temp_variable = { tech_engineer_recon_mp_fifth = 5 }
			set_temp_variable = { tech_engineer_recon_mp_two_fifths = tech_engineer_recon_mp_fifth }
			multiply_temp_variable = { tech_engineer_recon_mp_two_fifths = 2 }
			random_list = {
				seed = random
				tech_engineer_recon_mp_two_fifths = {
					set_technology = { tech_recon = 1 }
				}
				tech_engineer_recon_mp_two_fifths = {
					set_technology = { tech_engineers = 1 }
				}
				tech_engineer_recon_mp_fifth = {
					set_technology = { tech_engineers = 1 }
				}
				tech_engineer_recon_mp_minus = { }
			}

			set_temp_variable = { submarine_1_minus = 100 }
			subtract_from_temp_variable = { submarine_1_minus = global.setup_technology_submarine_1 }
			random_list = {
				seed = random
				global.setup_technology_submarine_1 = {
					modifier = {
						factor = 3
						any_owned_state = { is_coastal = yes }
					}

					give_submarine_1 = yes
				}
				submarine_1_minus = { }
			}

			random = {
				chance = global.setup_technology_construction1

				set_technology = { construction1 = 1 }

				random = {
					chance = global.setup_technology_excavation1

					set_technology = { excavation1 = 1 }
				}
			}
			random = {
				chance = global.setup_technology_fuel_silos

				set_technology = { fuel_silos = 1 }

				set_temp_variable = { synth_oil_experiments_fuel_refining_minus = 100 }
				set_temp_variable = { synth_oil_experiments_fuel_refining_fifth = global.setup_technology_synth_oil_experiments_fuel_refining }
				subtract_from_temp_variable = { synth_oil_experiments_fuel_refining_minus = global.setup_technology_synth_oil_experiments_fuel_refining }
				divide_temp_variable = { synth_oil_experiments_fuel_refining_fifth = 5 }
				set_temp_variable = { synth_oil_experiments_fuel_refining_four_fifths = synth_oil_experiments_fuel_refining_fifth }
				multiply_temp_variable = { synth_oil_experiments_fuel_refining_four_fifths = 4 }
				random_list = {
					seed = random
					synth_oil_experiments_fuel_refining_fifth = {
						set_technology = { synth_oil_experiments = 1 }
					}
					synth_oil_experiments_fuel_refining_four_fifths = {
						set_technology = { fuel_refining = 1 }
					}
					synth_oil_experiments_fuel_refining_minus = { }
				}
			}

			random = {
				chance = global.setup_technology_tech_trucks

				set_technology = { tech_trucks = 1 }

				set_temp_variable = { motorised_infantry_basic_train_minus = 100 }
				set_temp_variable = { motorised_infantry_basic_train_half = global.setup_technology_motorised_infantry_basic_train }
				subtract_from_temp_variable = { motorised_infantry_basic_train_minus = global.setup_technology_motorised_infantry_basic_train }
				divide_temp_variable = { motorised_infantry_basic_train_half = 2 }
				random_list = {
					seed = random
					motorised_infantry_basic_train_half = {
						set_technology = { motorised_infantry = 1 }
					}
					motorised_infantry_basic_train_half = {
						set_technology = { basic_train = 1 }
					}
					motorised_infantry_basic_train_minus = { }
				}
			}

			random = {
				chance = global.setup_technology_gw_artillery

				set_technology = { gw_artillery = 1 }

				set_temp_variable = { gwtank_antiair_antitank_minus = 100 }
				set_temp_variable = { gwtank_antiair_antitank_third = global.setup_technology_gwtank_antiair_antitank }
				subtract_from_temp_variable = { gwtank_antiair_antitank_minus = global.setup_technology_gwtank_antiair_antitank }
				divide_temp_variable = { gwtank_antiair_antitank_third = 3 }
				random_list = {
					seed = random
					gwtank_antiair_antitank_third = {
						set_technology = { interwar_antiair = 1 }
					}
					gwtank_antiair_antitank_third = {
						set_technology = { interwar_antitank = 1 }
					}
					gwtank_antiair_antitank_third = {
						give_gwtank = yes
					}
					gwtank_antiair_antitank_minus = { }
				}
			}

			random = {
				chance = global.setup_technology_electronic_mechanical_engineering

				set_technology = { electronic_mechanical_engineering = 1 }

				random = {
					chance = global.setup_technology_radio

					set_technology = { radio = 1 }

					random = {
						chance = global.setup_technology_radio_detection

						complete_special_project = { project = sp:sp_air_radar }
					}
				}
			}

			random = {
				chance = global.setup_technology_early_fighter

				give_early_fighter = yes

				set_temp_variable = { basic_cas_nav_minus = 100 }
				set_temp_variable = { basic_cas_nav_half = global.setup_technology_basic_cas_nav }
				subtract_from_temp_variable = { basic_cas_nav_minus = global.setup_technology_basic_cas_nav }
				divide_temp_variable = { basic_cas_nav_half = 2 }
				random_list = {
					seed = random
					basic_cas_nav_half = {
						modifier = {
							factor = 0.5
							any_owned_state = {
								is_coastal = yes
							}
						}

						give_basic_cas = yes
					}
					basic_cas_nav_half = {
						modifier = {
							factor = 2
							any_owned_state = {
								is_coastal = yes
							}
						}

						give_basic_naval_bomber = yes
					}
					basic_cas_nav_minus = { }
				}

				random = {
					chance = global.setup_technology_basic_cas_nav

					give_early_fighter = yes
				}
			}
			random = {
				chance = global.setup_technology_early_bomber

				give_early_bomber = yes
			}
		}
	}

	random = {
		chance =  global.setup_technology_support_weapons

		set_technology = { support_weapons = 1 }
	}
	random = {
		chance =  global.setup_technology_basic_machine_tools

		set_technology = { basic_machine_tools = 1 }
	}
}

randomise_technology_legacy = {
	random_list = {
		seed = random
		30 = {
			random_list = {
				seed = random
				30 = {
					set_technology = {
						infantry_weapons1 = 1
					}
				}
				25 = {
					set_technology = {
						support_weapons = 1
					}
				}
				5 = {
					set_technology = {
						infantry_weapons1 = 1
						support_weapons = 1
					}
				}
				40 = { }
			}

			random_list = {
				seed = random
				5 = {
					modifier = {
						factor = 2
						any_owned_state = {
							is_coastal = yes
						}
					}

					set_technology = {
						marines = 1
					}
				}
				5 = {
					set_technology = {
						paratroopers = 1
					}
				}
				5 = {
					modifier = {
						factor = 0.5
						any_owned_state = {
							is_coastal = yes
						}
					}

					set_technology = {
						tech_mountaineers = 1
					}
				}
				85 = { }
			}
			random_list = {
				seed = random
				10 = {
					set_technology = {
						tech_trucks = 1
					}
				}
				10 = {
					set_technology = {
						gw_artillery = 1
					}
				}
				80 = { }
			}

			random_list = {
				seed = random
				15 = {
					set_technology = {
						basic_machine_tools = 1
					}
				}
				85 = { }
			}

			random_list = {
				seed = random
				15 = {
					modifier = {
						factor = 3
						any_owned_state = {
							is_coastal = yes
						}
					}

					give_transport_1 = yes
				}
				85 = { }
			}
			random_list = {
				seed = random
				15 = {
					modifier = {
						factor = 3
						any_owned_state = {
							is_coastal = yes
						}
					}

					give_destroyer_1 = yes
				}
				85 = { }
			}
		}
		50 = {
			set_technology = {
				infantry_weapons1 = 1
			}

			random_list = {
				seed = random
				40 = {
					set_technology = {
						support_weapons = 1
					}
				}
				60 = { }
			}
			random_list = {
				seed = random
				10 = {
					modifier = {
						factor = 2
						any_owned_state = {
							is_coastal = yes
						}
					}

					set_technology = {
						marines = 1
					}
				}
				10 = {
					set_technology = {
						paratroopers = 1
					}
				}
				10 = {
					modifier = {
						factor = 0.5
						any_owned_state = {
							is_coastal = yes
						}
					}

					set_technology = {
						tech_mountaineers = 1
					}
				}
				70 = { }
			}
			random_list = {
				seed = random
				60 = {
					set_technology = {
						tech_trucks = 1
					}

					random_list = {
						seed = random
						10 = {
							set_technology = {
								motorised_infantry = 1
							}
						}
						20 = {
							set_technology = {
								basic_train = 1
							}
						}
						70 = { }
					}
				}
				40 = { }
			}
			random_list = {
				seed = random
				60 = {
					set_technology = {
						gw_artillery = 1
					}

					random_list = {
						seed = random
						10 = {
							set_technology = {
								interwar_antiair = 1
							}
						}
						10 = {
							set_technology = {
								interwar_antitank = 1
							}
						}
						10 = {
							give_gwtank = yes
						}
						70 = { }
					}
				}
				40 = { }
			}
			random_list = {
				seed = random
				30 = {
					set_technology = {
						tech_support = 1
					}

					random_list = {
						seed = random
						10 = {
							set_technology = {
								tech_recon = 1
							}
						}
						10 = {
							set_technology = {
								tech_engineers = 1
							}
						}
						5 = {
							set_technology = {
								tech_military_police = 1
							}
						}
						75 = { }
					}
				}
				70 = { }
			}

			random_list = {
				seed = random
				30 = {
					set_technology = {
						electronic_mechanical_engineering = 1
					}

					random_list = {
						seed = random
						10 = {
							set_technology = {
								radio = 1
							}

							random_list = {
								seed = random
								10 = {
									complete_special_project = {
										project = sp:sp_air_radar
									}
								}
								90 = { }
							}
						}
						90 = { }
					}
				}
				70 = { }
			}
			random_list = {
				seed = random
				30 = {
					set_technology = {
						basic_machine_tools = 1
					}

					random_list = {
						seed = random
						10 = {
							set_technology = {
								construction1 = 1
							}
						}
						90 = { }
					}
				}
				70 = { }
			}
			random_list = {
				seed = random
				30 = {
					set_technology = {
						fuel_silos = 1
					}

					random_list = {
						seed = random
						5 = {
							set_technology = {
								fuel_refining = 1
							}
						}
						95 = { }
					}
				}
				70 = { }
			}

			random_list = {
				seed = random
				25 = {
					modifier = {
						factor = 3
						any_owned_state = {
							is_coastal = yes
						}
					}

					give_transport_1 = yes
				}
				75 = { }
			}
			random_list = {
				seed = random
				25 = {
					modifier = {
						factor = 3
						any_owned_state = {
							is_coastal = yes
						}
					}

					give_destroyer_1 = yes
				}
				75 = { }
			}
			random_list = {
				seed = random
				25 = {
					modifier = {
						factor = 3
						any_owned_state = {
							is_coastal = yes
						}
					}

					give_submarine_1 = yes
				}
				75 = { }
			}

			random_list = {
				seed = random
				20 = {
					give_early_fighter = yes

					random_list = {
						seed = random
						5 = {
							modifier = {
								factor = 0.5
								any_owned_state = {
									is_coastal = yes
								}
							}

							give_basic_cas = yes
						}
						5 = {
							modifier = {
								factor = 2
								any_owned_state = {
									is_coastal = yes
								}
							}

							give_basic_naval_bomber = yes
						}
						90 = { }
					}
				}
				80 = { }
			}
			random_list = {
				seed = random
				10 = {
					give_early_bomber = yes
				}
				90 = { }
			}
		}
		20 = { }
	}
}

load_continent_focus_trees = {
	if = {
		limit = { can_form_horn_of_africa = yes }

		load_focus_tree = horn_of_africa_tree
		setup_utilize_our_strengths_effects = yes
	}
	else_if = {
		limit = {
			OR = {
				state_originally_from_YUN = yes
				state_originally_from_SIK = yes
				state_originally_from_GXC = yes
				state_originally_from_SHX = yes
				state_originally_from_XSM = yes
				state_originally_from_GDC = yes
				state_originally_from_XIC = yes
				state_originally_from_SND = yes
				state_originally_from_KHM = yes
				state_originally_from_NXM = yes
				state_originally_from_GSM = yes
				state_originally_from_SIC = yes
				state_originally_from_KUM = yes
				state_originally_from_HBC = yes
				state_originally_from_CHI = yes
				state_originally_from_FOR = yes
				state_originally_from_PRC = yes
			}
		}

		load_focus_tree = china_warlord_sea_focus
	}
	else_if = {
		limit = {
			OR = {
				state_originally_from_ARG = yes
				state_originally_from_BRA = yes
				state_originally_from_CHL = yes
				state_originally_from_PAR = yes
				state_originally_from_URG = yes
				state_originally_from_BOL = yes
			}
		}

		load_focus_tree = southern_south_america_focus
		JUNO_set_shared_military_branch_defaults = yes
		setup_mythologize_the_father_of_the_nation_effects = yes
		setup_adopt_minority_languages_effects = yes
	}
	else = {
		load_focus_tree = generic_focus
	}
}

randomise_focus_trees = {
	random_list = {
		seed = random
		25 = {
			load_focus_tree = generic_focus
		}
		25 = {
			load_focus_tree = horn_of_africa_tree
			setup_utilize_our_strengths_effects = yes
		}
		25 = {
			load_focus_tree = china_warlord_sea_focus
		}
		25 = {
			load_focus_tree = southern_south_america_focus
			JUNO_set_shared_military_branch_defaults = yes
			setup_mythologize_the_father_of_the_nation_effects = yes
			setup_adopt_minority_languages_effects = yes
		}
	}
}

set_focus_durations = {
	if = {
		limit = { has_focus_tree = generic_focus }

		meta_effect = {
			text = {
				reduce_focus_completion_cost = {
					focus = { army_effort, equipment_effort, motorization_effort, doctrine_effort, equipment_effort_2, mechanization_effort, doctrine_effort_2, equipment_effort_3, armor_effort, special_forces, aviation_effort, fighter_focus, bomber_focus, aviation_effort_2, CAS_effort, rocket_effort, NAV_effort, naval_effort, flexible_navy, large_navy, submarine_effort, cruiser_effort, destroyer_effort, capital_ships_effort, industrial_effort, construction_effort, production_effort, construction_effort_2, production_effort_2, infrastructure_effort, production_effort_3, infrastructure_effort_2, construction_effort_3, nuclear_effort, extra_tech_slot, extra_tech_slot_mil, extra_tech_slot_civ, secret_weapons, political_effort, collectivist_ethos, nationalism_focus, internationalism_focus, liberty_ethos, militarism, political_correctness, democracy_focus, neutrality_focus, interventionism_focus, military_youth, strict_neutrality, deterrence, defence_of_our_land, volunteer_corps, paramilitarism, indoctrination_focus, foreign_expeditions, why_we_fight, political_commissars, ideological_fanaticism, technology_sharing }
					cost = [COST]
				}
			}
			COST = "[?global.focus_length_10]"
		}
	}
	else_if = {
		limit = { has_focus_tree = horn_of_africa_tree }

		meta_effect = {
			text = {
				reduce_focus_completion_cost = {
					focus = { HOA_the_adjective_armed_forces }
					cost = [COST]
				}
			}
			COST = "[?global.focus_length_5]"
		}
		meta_effect = {
			text = {
				reduce_focus_completion_cost = {
					focus = { HOA_develop_capitalstate, HOA_the_state_bank_of_name, HOA_pave_the_roads, HOA_the_steam_locomotive, HOA_the_adjective_regional_development_fund, HOA_the_adjective_industrial_fund, HOA_exploit_national_resources, HOA_support_the_agrarians, HOA_promote_local_crafts, HOA_use_the_natural_harbors, HOA_the_capital_city_airport, HOA_a_steamboat_fleet, HOA_study_naval_doctrines, HOA_improved_irrigation_systems, HOA_the_adjective_air_fleet, HOA_study_air_tactics, HOA_expand_naval_variety, HOA_state-funded_projects, HOA_rocket_effort, HOA_reorganise_the_education_system, HOA_the_grand_university_of_capital, HOA_warrior_tradition, HOA_strengthen_the_irregulars, HOA_every_man_a_warrior, HOA_names_finest, HOA_utilize_our_strengths, HOA_reform_the_conscription, HOA_eyes_on_the_imperialists, HOA_encourage_local_arms_production, HOA_metal_beasts, HOA_the_roars_of_thunder, HOA_develop_indigenous_models, HOA_the_steel_lions, HOA_warfare_from_afar, HOA_modern_infantry, HOA_the_capital_military_academy, HOA_the_first_album, HOA_a_loyal_subject, HOA_political_stability, HOA_the_capital_railroad, HOA_invite_foreign_settlers, HOA_countryleader, HOA_securing_the_adjective_future, HOA_improving_the_educational_system, HOA_construct_great_monuments, HOA_the_adjective_volunteer_force, HOA_military_cooperation, HOA_that_which_is_rightfully_ours, HOA_commandos, HOA_a_jagged_alliance, HOA_observe_and_learn, HOA_foreign_investors, HOA_research_exchange_programmes, HOA_foreign_trained_officials, HOA_countryadjective_loyalist_advisors, HOA_expansion_effort_i, HOA_expansion_effort_ii, HOA_expansion_effort_iii, HOA_rallying_the_adjective_people, HOA_the_capital_school_of_technology, HOA_promote_countryadjective_nationalism, HOA_reunification_effort, HOA_proclaim_hegemony, HOA_a_change_in_course, ETH_military_communism, ETH_international_brigades_communist, ETH_peoples_army, ETH_local_committees, ETH_a_guiding_hand, ETH_seize_the_means, ETH_communal_agriculture, HOA_nationalism_focus, HOA_reinforce_dynamic_identity, ETH_expand_the_bodyguard, ETH_contact_the_exiles, ETH_underground_wargames, ETH_set_up_a_customs_barrier, HOA_ideological_fanaticism, HOA_democracy_focus, HOA_hold_elections, ETH_re-convene_the_parliament, ETH_empower_the_ras, ETH_empower_the_chambers, ETH_a_federal_empire, ETH_improve_the_administration, HOA_rally_around_na_leader, HOA_behind_the_forts, HOA_from_the_fields, ETH_the_king_of_kings, ETH_lord_of_lords, ETH_volunteers, HOA_strict_neutrality, HOA_why_we_fight, HOA_technology_sharing }
					cost = [COST]
				}
			}
			COST = "[?global.focus_length_10]"
		}
	}
	else_if = {
		limit = { has_focus_tree = china_warlord_sea_focus }

		meta_effect = {
			text = {
				reduce_focus_completion_cost = {
					focus = { CHI_sea_new_model_province, CHI_sea_land_reform, CHI_sea_propaganda_campaigns, CHI_sea_gain_warlord_support, CHI_sea_rally_the_warlords, CHI_sea_land_redistribution, PRC_strengthen_the_central_party_school, CHI_sea_communist_administrators, CHI_sea_unified_army_structure, CHI_sea_labor_reform, CHI_sea_personal_leadership, CHI_sea_cult_of_personality, CHI_sea_rapid_mobilization, CHI_sea_seek_foreign_support, CHI_tsr_reestablish_xinhua_palace, CHI_tsr_outlaw_republicanism, CHI_tsr_coronation_at_the_temple_of_heaven, CHI_tsr_reinstate_the_new_imperial_code, PRC_aviation_infrastructure, CHI_sea_heavy_weapons_development, CHI_sea_uplift_the_cavalry_regiments, CHI_sea_uplift_the_mountain_brigades, CHI_sea_infantry_efforts, CHI_sea_brigade_specialization }
					cost = [COST]
				}
			}
			COST = "[?global.focus_length_5]"
		}
		meta_effect = {
			text = {
				reduce_focus_completion_cost = {
					focus = { CHI_sea_secure_internal_politics, CHI_sea_cooperation_with_the_nationalists, CHI_sea_anti_opposition_campaigns, CHI_sea_root_out_corruption, CHI_sea_embrace_the_illicit_trade, CHI_sea_reform_the_administration, CHI_tsr_repoen_the_natioal_assembly, CHI_sea_constitutional_reform, CHI_sea_executive_yuan, CHI_sea_legislative_yuan, CHI_sea_judicial_yuan, CHI_sea_control_yuan, CHI_sea_examination_yuan, CHI_sea_technological_cooperation, CHI_sea_institute_a_dictatorship, CHI_sea_a_new_expedition, CHI_sea_battle_for_unification, CHI_sea_power_struggle, CHI_sea_cooperation_with_the_communists, CHI_sea_land_value_tax, CHI_sea_judiciary_reforms, CHI_sea_join_the_chinese_soviet, CHI_sea_ideological_education, CHI_sea_the_capital_incident, CHI_sea_opposition, CHI_sea_institute_cross_border_raids, CHI_sea_public_works, CHI_sea_rural_militias, CHI_sea_war_taxes, CHI_sea_provoke_border_clashes, CHI_sea_defensive_posture, CHI_sea_proclaim_rival_government, CHI_sea_establish_the_leader_university, CHI_tsr_form_a_preparatory_committee, CHI_tsr_legacy_of_the_hongxian_emperor, CHI_tsr_adopt_the_twelve_symbols, CHI_tsr_reclaim_the_mandate_of_heaven, CHI_tsr_tianxia, CHI_sea_industrial_research_projects, CHI_sea_develop_capital, CHI_sea_investment_into_shipbuilding, CHI_sea_light_cruiser_project, CHI_sea_heavy_cruiser_project, CHI_sea_naval_aviation, CHI_sea_carrier_air_wing, CHI_sea_order_destroyers, CHI_sea_train_marines, CHI_sea_modern_submarines, CHI_sea_coastal_patrol_planes, CHI_sea_camco, CHI_sea_local_fighter_production, CHI_sea_local_bomber_production, CHI_sea_sino_american_cooperative_organization, CHI_sea_the_chu_x_po, CHI_strike_at_what_is_weak, CHI_sea_the_hump, CHI_initiate_the_sky_projects, CHI_sea_further_industrial_investment, CHI_sea_develop_capital_arsenal, CHI_sea_small_arms_production, CHI_sea_rely_on_our_infantry, CHI_sea_modern_warfare, CHI_sea_mining_commission, CHI_sea_reform_the_national_bank, CHI_sea_long_term_economic_planning, PRC_establish_shorter_market_plans, CHI_sea_rural_reconstruction_movement, PRC_connecting_the_country, CHI_sea_expand_public_education, CHI_sea_capital_military_academy, CHI_sea_fund_research_projects, CHI_sea_strenghten_warlord_authority, CHI_sea_consolidate_our_rule, CHI_sea_fortification_efforts, CHI_sea_the_army }
					cost = [COST]
				}
			}
			COST = "[?global.focus_length_10]"
		}
	}
	else_if = {
		limit = { has_focus_tree = southern_south_america_focus }

		meta_effect = {
			text = {
				reduce_focus_completion_cost = {
					focus = { SMB_support_company, SMB_tank_warfare, SMB_domestic_production, SMB_artillery, SMB_foreign_designs, SMB_foreign_advisors, SMB_special_forces, SMB_special_forces_option_1, SMB_special_forces_option_2, SMB_special_forces_option_3, SMB_special_forces_option_1_continuation, SMB_special_forces_option_3_continuation, SMB_special_forces_option_2_continuation, SMB_jungle_pioneers, SMB_mountain_guns, SMB_air_academy, SMB_construct_air_bases, SMB_domestic_designs, SMB_license_designs, SMB_purchase_aircraft, SMB_aircraft_carriers, SMB_naval_foreign_advisors, SMB_purchase_destroyers_and_subs, SMB_reescalate_the_naval_arms_race, SMB_purchase_cruisers_and_dreadnoughts, SMB_minelaying, SMB_naval_invasion, SMB_midget_subs, SMB_expand_repair_yards, SMB_merchant_marine, SMB_fortification_effort, GUAY_restore_elections, GUAY_one_party_state, GUAY_urbanization, GUAY_cooperation_in_the_americas, GUAY_defense_force, GUAY_volunteers, GUAY_align_with_the_internationalists, GUAY_align_with_the_nationalists, GUAY_appease_the_generals, GUAY_wool_makers, GUAY_cash_crop_exports, GUAY_a_deal_with_devil, GUAY_exploit_mineral_wealth }
					cost = [COST]
				}
			}
			COST = "[?global.focus_length_5]"
		}
		meta_effect = {
			text = {
				reduce_focus_completion_cost = {
					focus = { SMB_army, SMB_department_of_propaganda, SMB_logistics_department, SMB_department_of_military_intelligence, SMB_military_facilities, SMB_motorized, SMB_mechanized_troops, SMB_army_academy, SMB_regular_infantry, SMB_army_professionalism, SMB_conscription, SMB_experimental_weapons_department, SMB_nuclear_program, SMB_air_defense, SMB_air_force, SMB_establish_aircraft_industry, SMB_flying_fortress, SMB_tactical_air_force, SMB_nimble_air_force, SMB_strategic_bombing, SMB_army_support, SMB_winning_the_air_war, SMB_naval_support, SMB_air_modifier_boost_1, SMB_air_modifier_boost_2, SMB_air_doctrine, SMB_joint_operative_command, SMB_war_planning_office, SMB_women_in_aviation, SMB_navy, SMB_naval_academy, SMB_construct_naval_bases, SMB_blue_water_fleet, SMB_coastal_fleet, SMB_escort_fleet, SMB_raiding_fleet, SMB_degaussing, SMB_cruiser_subs, SMB_carrier_conversion, SMB_enlarge_naval_facilities, GUAY_laissez_faire, GUAY_rekindle_old_gripes, GUAY_disperse_military_power, GUAY_nationalize_foreign_owned_companies, GUAY_abolish_low_level_income_tax, GUAY_free_seconday_schools, GUAY_specialized_terrain_training, GUAY_mass_drafts, GUAY_form_ties_with_the_military, GUAY_place_opposition_leaders_in_house_arrest, GUAY_enact_martial_law, GUAY_coup_detat, GUAY_cult_of_personality, GUAY_adopt_minority_languages, GUAY_mythologize_the_father_of_the_nation, GUAY_penal_battalions, GUAY_the_permanent_leader, GUAY_mobalize_the_economy, GUAY_technology_sharing, GUAY_land_reforms, GUAY_workers_rights, GUAY_agricultural_colonization, GUAY_beef_and_hide_industry, GUAY_heavy_industry, GUAY_empower_the_land_owners, GUAY_river_trade, GUAY_export_focus, GUAY_clamp_down_on_new_territories, GUAY_develop_new_territories, GUAY_no_second_american_colonization, GUAY_the_stuff_of_legends, GUAY_demand_a_seat_at_the_high_table, GUAY_the_tag_economic_miracle, GUAY_protect_domestic_industries, GUAY_national_academy_of_sciences, GUAY_national_academy_of_sciences_2, GUAY_national_academy_of_sciences_4 }
					cost = [COST]
				}
			}
			COST = "[?global.focus_length_10]"
		}
	}
}

randomise_stability = {
	hidden_effect = {
		set_temp_variable = { stabtoset = 50 }
		randomize_temp_variable = {
			var = stabtoset
			distribution = uniform
			min = global.setup_stability_min
			max = global.setup_stability_max
		}
		divide_temp_variable = { stabtoset = 100 }
		set_stability = stabtoset
	}
}

randomise_war_support = {
	hidden_effect = {
		set_temp_variable = { wstoset = 50 }
		randomize_temp_variable = {
			var = wstoset
			distribution = uniform
			min = global.setup_war_support_min
			max = global.setup_war_support_max
		}
		divide_temp_variable = { wstoset = 100 }
		set_war_support = wstoset
	}
}

randomise_intelligence_agency = {
	set_temp_variable = { intelligence_agency_minus = global.setup_intelligence_agency_chance }
	multiply_temp_variable = { intelligence_agency_minus = -1 }
	random_list = {
		seed = random
		0 = {
			modifier = { add = global.setup_intelligence_agency_chance }

			create_intelligence_agency = yes
		}
		1046 = {
			modifier = { add = intelligence_agency_minus }
		}
	}
}

remove_political_advisor = {
	random_list = {
		seed = random
		6 = {
			set_country_flag = popular_figurehead_disabled

			modifier = {
				factor = 0
				
				has_country_flag = popular_figurehead_disabled
			}
		}
		6 = {
			set_country_flag = propaganda_expert_disabled

			modifier = {
				factor = 0
				
				has_country_flag = propaganda_expert_disabled
			}
		}
		6 = {
			set_country_flag = silent_workhorse_disabled

			modifier = {
				factor = 0
				
				has_country_flag = silent_workhorse_disabled
			}
		}
		6 = {
			set_country_flag = prince_of_terror_disabled

			modifier = {
				factor = 0
				
				has_country_flag = prince_of_terror_disabled
			}
		}
		6 = {
			set_country_flag = backroom_backstabber_disabled

			modifier = {
				factor = 0
				
				has_country_flag = backroom_backstabber_disabled
			}
		}
		6 = {
			set_country_flag = editor_disabled

			modifier = {
				factor = 0
				
				has_country_flag = editor_disabled
			}
		}
		6 = {
			set_country_flag = compassionate_gentleman_disabled

			modifier = {
				factor = 0
				
				has_country_flag = compassionate_gentleman_disabled
			}
		}
		6 = {
			set_country_flag = smooth_talking_charmer_disabled

			modifier = {
				factor = 0
				
				has_country_flag = smooth_talking_charmer_disabled
			}
		}
		6 = {
			set_country_flag = financial_expert_disabled

			modifier = {
				factor = 0
				
				has_country_flag = financial_expert_disabled
			}
		}
		6 = {
			set_country_flag = economist_disabled

			modifier = {
				factor = 0
				
				has_country_flag = economist_disabled
			}
		}
		6 = {
			set_country_flag = captain_of_industry_disabled

			modifier = {
				factor = 0
				
				has_country_flag = captain_of_industry_disabled
			}
		}
		6 = {
			set_country_flag = war_industrialist_disabled

			modifier = {
				factor = 0
				
				has_country_flag = war_industrialist_disabled
			}
		}
		6 = {
			set_country_flag = fortification_engineer_disabled

			modifier = {
				factor = 0
				
				has_country_flag = fortification_engineer_disabled
			}
		}
		6 = {
			set_country_flag = quartermaster_general_disabled

			modifier = {
				factor = 0
				
				has_country_flag = quartermaster_general_disabled
			}
		}
		12 = {
			set_country_flag = armaments_organizer_disabled

			modifier = {
				factor = 0
				
				has_country_flag = armaments_organizer_disabled
			}
		}
	}
}

remove_spymaster = {
	random_list = {
		seed = random
		30 = {
			set_country_flag = head_of_intelligence_disabled

			modifier = {
				factor = 0

				has_country_flag = head_of_intelligence_disabled
			}
		}
		35 = {
			set_country_flag = code_breaker_disabled

			modifier = {
				factor = 0

				has_country_flag = code_breaker_disabled
			}
		}
		35 = {
			set_country_flag = encryption_expert_disabled

			modifier = {
				factor = 0

				has_country_flag = encryption_expert_disabled
			}
		}
	}
}

remove_theorist = {
	random_list = {
		seed = random
		1 = {
			set_country_flag = military_theorist_disabled

			modifier = {
				factor = 0
				
				OR = {
					has_country_flag = military_theorist_disabled
					has_country_flag = naval_theorist_disabled
					has_country_flag = air_warfare_theorist_disabled
				}
			}
		}
		5 = {
			set_country_flag = naval_theorist_disabled

			modifier = {
				factor = 0
				
				OR = {
					has_country_flag = military_theorist_disabled
					has_country_flag = naval_theorist_disabled
				}
			}
		}
		5 = {
			set_country_flag = air_warfare_theorist_disabled

			modifier = {
				factor = 0
				
				OR = {
					has_country_flag = military_theorist_disabled
					has_country_flag = air_warfare_theorist_disabled
				}
			}
		}
		89 = { }
	}
}

get_branch_specific_military_theorist = {
	random_list = {
		seed = random
		3 = {
			set_country_flag = mobile_warfare_expert_enabled

			modifier = {
				factor = 0
				
				OR = {
					has_country_flag = military_theorist_disabled
					has_country_flag = mobile_warfare_expert_enabled
				}
			}
		}
		3 = {
			set_country_flag = superior_firepower_expert_enabled

			modifier = {
				factor = 0
				
				OR = {
					has_country_flag = military_theorist_disabled
					has_country_flag = superior_firepower_expert_enabled
				}
			}
		}
		3 = {
			set_country_flag = grand_battle_plan_expert_enabled

			modifier = {
				factor = 0
				
				OR = {
					has_country_flag = military_theorist_disabled
					has_country_flag = grand_battle_plan_expert_enabled
				}
			}
		}
		3 = {
			set_country_flag = mass_assault_expert_enabled

			modifier = {
				factor = 0
				
				OR = {
					has_country_flag = military_theorist_disabled
					has_country_flag = mass_assault_expert_enabled
				}
			}
		}
		88 = { }
	}
}

get_branch_specific_naval_theorist = {
	random_list = {
		seed = random
		4 = {
			set_country_flag = naval_aviation_pioneer_enabled

			modifier = {
				factor = 0
				
				OR = {
					has_country_flag = naval_theorist_disabled
					has_country_flag = naval_aviation_pioneer_enabled
				}
			}
		}
		4 = {
			set_country_flag = grand_fleet_proponent_enabled

			modifier = {
				factor = 0
				
				OR = {
					has_country_flag = naval_theorist_disabled
					has_country_flag = grand_fleet_proponent_enabled
				}
			}
		}
		4 = {
			set_country_flag = submarine_specialist_enabled

			modifier = {
				factor = 0
				
				OR = {
					has_country_flag = naval_theorist_disabled
					has_country_flag = submarine_specialist_enabled
				}
			}
		}
		88 = { }
	}
}

get_branch_specific_air_warfare_theorist = {
	random_list = {
		seed = random
		4 = {
			set_country_flag = victory_through_airpower_enabled

			modifier = {
				factor = 0
				
				OR = {
					has_country_flag = air_warfare_theorist_disabled
					has_country_flag = victory_through_airpower_enabled
				}
			}
		}
		4 = {
			set_country_flag = close_air_support_proponent_enabled

			modifier = {
				factor = 0
				
				OR = {
					has_country_flag = air_warfare_theorist_disabled
					has_country_flag = close_air_support_proponent_enabled
				}
			}
		}
		4 = {
			set_country_flag = assault_avaition_enabled

			modifier = {
				factor = 0
				
				OR = {
					has_country_flag = air_warfare_theorist_disabled
					has_country_flag = assault_avaition_enabled
				}
			}
		}
		88 = { }
	}
}

remove_scientist = {
	random_list = {
		seed = random
		15 = {
			set_country_flag = nuclear_scientist_disabled

			modifier = {
				factor = 0

				has_country_flag = nuclear_scientist_disabled
			}
		}
		15 = {
			set_country_flag = rocket_scientist_disabled

			modifier = {
				factor = 0

				has_country_flag = rocket_scientist_disabled
			}
		}
		15 = { }
	}
}

remove_army_chief = {
	random_list = {
		seed = random
		10 = {
			set_country_flag = army_chief_offensive_disabled

			modifier = {
				factor = 0
				
				OR = {
					has_country_flag = army_chief_offensive_disabled
					has_country_flag = army_chief_defensive_disabled
				}
			}
		}
		10 = {
			set_country_flag = army_chief_defensive_disabled

			modifier = {
				factor = 0
				
				OR = {
					has_country_flag = army_chief_offensive_disabled
					has_country_flag = army_chief_defensive_disabled
				}
			}
		}
		10 = {
			set_country_flag = army_chief_maneuver_disabled

			modifier = {
				factor = 0
				
				has_country_flag = army_chief_maneuver_disabled
			}
		}
		10 = {
			set_country_flag = army_chief_drill_disabled

			modifier = {
				factor = 0
				
				has_country_flag = army_chief_drill_disabled
			}
		}
		10 = {
			set_country_flag = army_chief_planning_disabled

			modifier = {
				factor = 0
				
				has_country_flag = army_chief_planning_disabled
			}
		}
		10 = {
			set_country_flag = army_chief_morale_disabled

			modifier = {
				factor = 0
				
				has_country_flag = army_chief_morale_disabled
			}
		}
		10 = {
			set_country_flag = army_chief_organizational_disabled

			modifier = {
				factor = 0
				
				has_country_flag = army_chief_organizational_disabled
			}
		}
		10 = {
			set_country_flag = army_chief_entrenchment_disabled

			modifier = {
				factor = 0
				
				has_country_flag = army_chief_entrenchment_disabled
			}
		}
		10 = {
			set_country_flag = army_chief_reform_disabled

			modifier = {
				factor = 0
				
				has_country_flag = army_chief_reform_disabled
			}
		}
		10 = {
			set_country_flag = army_chief_old_guard_disabled

			modifier = {
				factor = 0
				
				has_country_flag = army_chief_old_guard_disabled
			}
		}
	}
}

randomise_army_chief_offensive_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_chief_offensive_1
				has_trait = army_chief_offensive_2
				has_trait = army_chief_offensive_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_offensive_1 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_offensive_esicolor
							cost = 50
							traits = { army_chief_offensive_1 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_offensive_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_offensive_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_offensive_2 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_offensive_esicolor
							cost = 100
							traits = { army_chief_offensive_2 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_offensive_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_offensive_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_offensive_3 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_offensive_esicolor
							cost = 200
							traits = { army_chief_offensive_3 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_offensive_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_offensive_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_army_chief_defensive_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_chief_defensive_1
				has_trait = army_chief_defensive_2
				has_trait = army_chief_defensive_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_defensive_1 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_defensive_esicolor
							cost = 50
							traits = { army_chief_defensive_1 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_defensive_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_defensive_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_defensive_2 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_defensive_esicolor
							cost = 100
							traits = { army_chief_defensive_2 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_defensive_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_defensive_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_defensive_3 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_defensive_esicolor
							cost = 200
							traits = { army_chief_defensive_3 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_defensive_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_defensive_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_army_chief_maneuver_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_chief_maneuver_1
				has_trait = army_chief_maneuver_2
				has_trait = army_chief_maneuver_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_maneuver_1 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_maneuver
							cost = 50
							traits = { army_chief_maneuver_1 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_maneuver_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_maneuver_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_maneuver_2 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_maneuver
							cost = 100
							traits = { army_chief_maneuver_2 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_maneuver_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_maneuver_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_maneuver_3 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_maneuver
							cost = 200
							traits = { army_chief_maneuver_3 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_maneuver_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_maneuver_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_army_chief_drill_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_chief_drill_1
				has_trait = army_chief_drill_2
				has_trait = army_chief_drill_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_drill_1 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_drill
							cost = 50
							traits = { army_chief_drill_1 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_drill_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_drill_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_drill_2 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_drill
							cost = 100
							traits = { army_chief_drill_2 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_drill_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_drill_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_drill_3 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_drill
							cost = 200
							traits = { army_chief_drill_3 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_drill_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_drill_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_army_chief_planning_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_chief_planning_1
				has_trait = army_chief_planning_2
				has_trait = army_chief_planning_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_planning_1 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_planning
							cost = 50
							traits = { army_chief_planning_1 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_planning_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_planning_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_planning_2 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_planning
							cost = 100
							traits = { army_chief_planning_2 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_planning_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_planning_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_planning_3 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_planning
							cost = 200
							traits = { army_chief_planning_3 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_planning_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_planning_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_army_chief_morale_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_chief_morale_1
				has_trait = army_chief_morale_2
				has_trait = army_chief_morale_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_morale_1 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_morale
							cost = 50
							traits = { army_chief_morale_1 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_morale_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_morale_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_morale_2 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_morale
							cost = 100
							traits = { army_chief_morale_2 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_morale_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_morale_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_morale_3 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_morale
							cost = 200
							traits = { army_chief_morale_3 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_morale_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_morale_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_army_chief_organizational_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_chief_organizational_1
				has_trait = army_chief_organizational_2
				has_trait = army_chief_organizational_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_organizational_1 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_organizational
							cost = 50
							traits = { army_chief_organizational_1 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_organizational_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_organizational_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_organizational_2 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_organizational
							cost = 100
							traits = { army_chief_organizational_2 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_organizational_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_organizational_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_organizational_3 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_organizational
							cost = 200
							traits = { army_chief_organizational_3 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_organizational_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_organizational_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_army_chief_entrenchment_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_chief_entrenchment_1
				has_trait = army_chief_entrenchment_2
				has_trait = army_chief_entrenchment_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_entrenchment_1 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_entrenchment
							cost = 50
							traits = { army_chief_entrenchment_1 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_entrenchment_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_entrenchment_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_entrenchment_2 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_entrenchment
							cost = 100
							traits = { army_chief_entrenchment_2 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_entrenchment_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_entrenchment_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_entrenchment_3 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_entrenchment
							cost = 200
							traits = { army_chief_entrenchment_3 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_entrenchment_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_entrenchment_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_army_chief_reform_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_chief_reform_1
				has_trait = army_chief_reform_2
				has_trait = army_chief_reform_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_reform_1 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_reform_esicolor
							cost = 50
							traits = { army_chief_reform_1 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_reform_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_reform_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_reform_2 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_reform_esicolor
							cost = 100
							traits = { army_chief_reform_2 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_reform_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_reform_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_chief_reform_3 } }

					remove_advisor_role = { slot = army_chief }
					add_advisor_role = {
						advisor = {
							slot = army_chief
							idea_token = generic_army_chief_reform_esicolor
							cost = 200
							traits = { army_chief_reform_3 }

							#visible = {
							#	NOT = { has_country_flag = army_chief_reform_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_chief_reform_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

remove_navy_chief = {
	random_list = {
		seed = random
		15 = {
			set_country_flag = navy_chief_commerce_raiding_disabled

			modifier = {
				factor = 0
				
				has_country_flag = navy_chief_commerce_raiding_disabled
			}
		}
		15 = {
			set_country_flag = navy_chief_maneuver_disabled

			modifier = {
				factor = 0
				
				has_country_flag = navy_chief_maneuver_disabled
			}
		}
		15 = {
			set_country_flag = navy_chief_decisive_battle_disabled

			modifier = {
				factor = 0
				
				has_country_flag = navy_chief_decisive_battle_disabled
			}
		}
		15 = {
			set_country_flag = navy_chief_naval_aviation_disabled

			modifier = {
				factor = 0
				
				has_country_flag = navy_chief_naval_aviation_disabled
			}
		}
		15 = {
			set_country_flag = navy_chief_reform_disabled

			modifier = {
				factor = 0
				
				has_country_flag = navy_chief_reform_disabled
			}
		}
		20 = {
			set_country_flag = navy_chief_old_guard_disabled

			modifier = {
				factor = 0
				
				has_country_flag = navy_chief_old_guard_disabled
			}
		}
	}
}

randomise_navy_chief_commerce_raiding_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = navy_chief_commerce_raiding_1
				has_trait = navy_chief_commerce_raiding_2
				has_trait = navy_chief_commerce_raiding_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_chief_commerce_raiding_1 } }

					remove_advisor_role = { slot = navy_chief }
					add_advisor_role = {
						advisor = {
							slot = navy_chief
							idea_token = generic_navy_chief_commerce_raiding_esicolor
							cost = 50
							traits = { navy_chief_commerce_raiding_1 }

							#visible = {
							#	NOT = { has_country_flag = navy_chief_commerce_raiding_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_chief_commerce_raiding_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_chief_commerce_raiding_2 } }

					remove_advisor_role = { slot = navy_chief }
					add_advisor_role = {
						advisor = {
							slot = navy_chief
							idea_token = generic_navy_chief_commerce_raiding_esicolor
							cost = 100
							traits = { navy_chief_commerce_raiding_2 }

							#visible = {
							#	NOT = { has_country_flag = navy_chief_commerce_raiding_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_chief_commerce_raiding_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_chief_commerce_raiding_3 } }

					remove_advisor_role = { slot = navy_chief }
					add_advisor_role = {
						advisor = {
							slot = navy_chief
							idea_token = generic_navy_chief_commerce_raiding_esicolor
							cost = 200
							traits = { navy_chief_commerce_raiding_3 }

							#visible = {
							#	NOT = { has_country_flag = navy_chief_commerce_raiding_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_chief_commerce_raiding_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_navy_chief_maneuver_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = navy_chief_maneuver_1
				has_trait = navy_chief_maneuver_2
				has_trait = navy_chief_maneuver_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_chief_maneuver_1 } }

					remove_advisor_role = { slot = navy_chief }
					add_advisor_role = {
						advisor = {
							slot = navy_chief
							idea_token = generic_navy_chief_maneuver
							cost = 50
							traits = { navy_chief_maneuver_1 }

							#visible = {
							#	NOT = { has_country_flag = navy_chief_maneuver_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_chief_maneuver_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_chief_maneuver_2 } }

					remove_advisor_role = { slot = navy_chief }
					add_advisor_role = {
						advisor = {
							slot = navy_chief
							idea_token = generic_navy_chief_maneuver
							cost = 100
							traits = { navy_chief_maneuver_2 }

							#visible = {
							#	NOT = { has_country_flag = navy_chief_maneuver_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_chief_maneuver_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_chief_maneuver_3 } }

					remove_advisor_role = { slot = navy_chief }
					add_advisor_role = {
						advisor = {
							slot = navy_chief
							idea_token = generic_navy_chief_maneuver
							cost = 200
							traits = { navy_chief_maneuver_3 }

							#visible = {
							#	NOT = { has_country_flag = navy_chief_maneuver_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_chief_maneuver_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_navy_chief_decisive_battle_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = navy_chief_decisive_battle_1
				has_trait = navy_chief_decisive_battle_2
				has_trait = navy_chief_decisive_battle_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_chief_decisive_battle_1 } }

					remove_advisor_role = { slot = navy_chief }
					add_advisor_role = {
						advisor = {
							slot = navy_chief
							idea_token = generic_navy_chief_decisive_battle_esicolor
							cost = 50
							traits = { navy_chief_decisive_battle_1 }

							#visible = {
							#	NOT = { has_country_flag = navy_chief_decisive_battle_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_chief_decisive_battle_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_chief_decisive_battle_2 } }

					remove_advisor_role = { slot = navy_chief }
					add_advisor_role = {
						advisor = {
							slot = navy_chief
							idea_token = generic_navy_chief_decisive_battle_esicolor
							cost = 100
							traits = { navy_chief_decisive_battle_2 }

							#visible = {
							#	NOT = { has_country_flag = navy_chief_decisive_battle_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_chief_decisive_battle_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_chief_decisive_battle_3 } }

					remove_advisor_role = { slot = navy_chief }
					add_advisor_role = {
						advisor = {
							slot = navy_chief
							idea_token = generic_navy_chief_decisive_battle_esicolor
							cost = 200
							traits = { navy_chief_decisive_battle_3 }

							#visible = {
							#	NOT = { has_country_flag = navy_chief_decisive_battle_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_chief_decisive_battle_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_navy_chief_naval_aviation_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = navy_chief_naval_aviation_1
				has_trait = navy_chief_naval_aviation_2
				has_trait = navy_chief_naval_aviation_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_chief_naval_aviation_1 } }

					remove_advisor_role = { slot = navy_chief }
					add_advisor_role = {
						advisor = {
							slot = navy_chief
							idea_token = generic_navy_chief_naval_aviation
							cost = 50
							traits = { navy_chief_naval_aviation_1 }

							#visible = {
							#	NOT = { has_country_flag = navy_chief_naval_aviation_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_chief_naval_aviation_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_chief_naval_aviation_2 } }

					remove_advisor_role = { slot = navy_chief }
					add_advisor_role = {
						advisor = {
							slot = navy_chief
							idea_token = generic_navy_chief_naval_aviation
							cost = 100
							traits = { navy_chief_naval_aviation_2 }

							#visible = {
							#	NOT = { has_country_flag = navy_chief_naval_aviation_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_chief_naval_aviation_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_chief_naval_aviation_3 } }

					remove_advisor_role = { slot = navy_chief }
					add_advisor_role = {
						advisor = {
							slot = navy_chief
							idea_token = generic_navy_chief_naval_aviation
							cost = 200
							traits = { navy_chief_naval_aviation_3 }

							#visible = {
							#	NOT = { has_country_flag = navy_chief_naval_aviation_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_chief_naval_aviation_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_navy_chief_reform_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = navy_chief_reform_1
				has_trait = navy_chief_reform_2
				has_trait = navy_chief_reform_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_chief_reform_1 } }

					remove_advisor_role = { slot = navy_chief }
					add_advisor_role = {
						advisor = {
							slot = navy_chief
							idea_token = generic_navy_chief_reform_esicolor
							cost = 50
							traits = { navy_chief_reform_1 }

							#visible = {
							#	NOT = { has_country_flag = navy_chief_reform_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_chief_reform_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_chief_reform_2 } }

					remove_advisor_role = { slot = navy_chief }
					add_advisor_role = {
						advisor = {
							slot = navy_chief
							idea_token = generic_navy_chief_reform_esicolor
							cost = 100
							traits = { navy_chief_reform_2 }

							#visible = {
							#	NOT = { has_country_flag = navy_chief_reform_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_chief_reform_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_chief_reform_3 } }

					remove_advisor_role = { slot = navy_chief }
					add_advisor_role = {
						advisor = {
							slot = navy_chief
							idea_token = generic_navy_chief_reform_esicolor
							cost = 200
							traits = { navy_chief_reform_3 }

							#visible = {
							#	NOT = { has_country_flag = navy_chief_reform_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_chief_reform_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

remove_air_chief = {
	random_list = {
		seed = random
		15 = {
			set_country_flag = air_chief_night_operations_disabled

			modifier = {
				factor = 0
				
				has_country_flag = air_chief_night_operations_disabled
			}
		}
		15 = {
			set_country_flag = air_chief_ground_support_disabled

			modifier = {
				factor = 0
				
				has_country_flag = air_chief_ground_support_disabled
			}
		}
		15 = {
			set_country_flag = air_chief_all_weather_disabled

			modifier = {
				factor = 0
				
				has_country_flag = air_chief_all_weather_disabled
			}
		}
		15 = {
			set_country_flag = air_chief_safety_disabled

			modifier = {
				factor = 0
				
				has_country_flag = air_chief_safety_disabled
			}
		}
		15 = {
			set_country_flag = air_chief_reform_disabled

			modifier = {
				factor = 0
				
				has_country_flag = air_chief_reform_disabled
			}
		}
		20 = {
			set_country_flag = air_chief_old_guard_disabled

			modifier = {
				factor = 0
				
				has_country_flag = air_chief_old_guard_disabled
			}
		}
	}
}

randomise_air_chief_night_operations_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = air_chief_night_operations_1
				has_trait = air_chief_night_operations_2
				has_trait = air_chief_night_operations_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_chief_night_operations_1 } }

					remove_advisor_role = { slot = air_chief }
					add_advisor_role = {
						advisor = {
							slot = air_chief
							idea_token = generic_air_chief_night_operations
							cost = 50
							traits = { air_chief_night_operations_1 }

							#visible = {
							#	NOT = { has_country_flag = air_chief_night_operations_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_chief_night_operations_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_chief_night_operations_2 } }

					remove_advisor_role = { slot = air_chief }
					add_advisor_role = {
						advisor = {
							slot = air_chief
							idea_token = generic_air_chief_night_operations
							cost = 100
							traits = { air_chief_night_operations_2 }

							#visible = {
							#	NOT = { has_country_flag = air_chief_night_operations_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_chief_night_operations_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = air_chief_night_operations_3 } }

					remove_advisor_role = { slot = air_chief }
					add_advisor_role = {
						advisor = {
							slot = air_chief
							idea_token = generic_air_chief_night_operations
							cost = 200
							traits = { air_chief_night_operations_3 }

							#visible = {
							#	NOT = { has_country_flag = air_chief_night_operations_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_chief_night_operations_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_air_chief_ground_support_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = air_chief_ground_support_1
				has_trait = air_chief_ground_support_2
				has_trait = air_chief_ground_support_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_chief_ground_support_1 } }

					remove_advisor_role = { slot = air_chief }
					add_advisor_role = {
						advisor = {
							slot = air_chief
							idea_token = generic_air_chief_ground_support_esicolor
							cost = 50
							traits = { air_chief_ground_support_1 }

							#visible = {
							#	NOT = { has_country_flag = air_chief_ground_support_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_chief_ground_support_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_chief_ground_support_2 } }

					remove_advisor_role = { slot = air_chief }
					add_advisor_role = {
						advisor = {
							slot = air_chief
							idea_token = generic_air_chief_ground_support_esicolor
							cost = 100
							traits = { air_chief_ground_support_2 }

							#visible = {
							#	NOT = { has_country_flag = air_chief_ground_support_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_chief_ground_support_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = air_chief_ground_support_3 } }

					remove_advisor_role = { slot = air_chief }
					add_advisor_role = {
						advisor = {
							slot = air_chief
							idea_token = generic_air_chief_ground_support_esicolor
							cost = 200
							traits = { air_chief_ground_support_3 }

							#visible = {
							#	NOT = { has_country_flag = air_chief_ground_support_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_chief_ground_support_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_air_chief_all_weather_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = air_chief_all_weather_1
				has_trait = air_chief_all_weather_2
				has_trait = air_chief_all_weather_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_chief_all_weather_1 } }

					remove_advisor_role = { slot = air_chief }
					add_advisor_role = {
						advisor = {
							slot = air_chief
							idea_token = generic_air_chief_all_weather_esicolor
							cost = 50
							traits = { air_chief_all_weather_1 }

							#visible = {
							#	NOT = { has_country_flag = air_chief_all_weather_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_chief_all_weather_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_chief_all_weather_2 } }

					remove_advisor_role = { slot = air_chief }
					add_advisor_role = {
						advisor = {
							slot = air_chief
							idea_token = generic_air_chief_all_weather_esicolor
							cost = 100
							traits = { air_chief_all_weather_2 }

							#visible = {
							#	NOT = { has_country_flag = air_chief_all_weather_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_chief_all_weather_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = air_chief_all_weather_3 } }

					remove_advisor_role = { slot = air_chief }
					add_advisor_role = {
						advisor = {
							slot = air_chief
							idea_token = generic_air_chief_all_weather_esicolor
							cost = 200
							traits = { air_chief_all_weather_3 }

							#visible = {
							#	NOT = { has_country_flag = air_chief_all_weather_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_chief_all_weather_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_air_chief_safety_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = air_chief_safety_1
				has_trait = air_chief_safety_2
				has_trait = air_chief_safety_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_chief_safety_1 } }

					remove_advisor_role = { slot = air_chief }
					add_advisor_role = {
						advisor = {
							slot = air_chief
							idea_token = generic_air_chief_safety_esicolor
							cost = 50
							traits = { air_chief_safety_1 }

							#visible = {
							#	NOT = { has_country_flag = air_chief_safety_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_chief_safety_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_chief_safety_2 } }

					remove_advisor_role = { slot = air_chief }
					add_advisor_role = {
						advisor = {
							slot = air_chief
							idea_token = generic_air_chief_safety_esicolor
							cost = 100
							traits = { air_chief_safety_2 }

							#visible = {
							#	NOT = { has_country_flag = air_chief_safety_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_chief_safety_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = air_chief_safety_3 } }

					remove_advisor_role = { slot = air_chief }
					add_advisor_role = {
						advisor = {
							slot = air_chief
							idea_token = generic_air_chief_safety_esicolor
							cost = 200
							traits = { air_chief_safety_3 }

							#visible = {
							#	NOT = { has_country_flag = air_chief_safety_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_chief_safety_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_air_chief_reform_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = air_chief_reform_1
				has_trait = air_chief_reform_2
				has_trait = air_chief_reform_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_chief_reform_1 } }

					remove_advisor_role = { slot = air_chief }
					add_advisor_role = {
						advisor = {
							slot = air_chief
							idea_token = generic_air_chief_reform_esicolor
							cost = 50
							traits = { air_chief_reform_1 }

							#visible = {
							#	NOT = { has_country_flag = air_chief_reform_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_chief_reform_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_chief_reform_2 } }

					remove_advisor_role = { slot = air_chief }
					add_advisor_role = {
						advisor = {
							slot = air_chief
							idea_token = generic_air_chief_reform_esicolor
							cost = 100
							traits = { air_chief_reform_2 }

							#visible = {
							#	NOT = { has_country_flag = air_chief_reform_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_chief_reform_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = air_chief_reform_3 } }

					remove_advisor_role = { slot = air_chief }
					add_advisor_role = {
						advisor = {
							slot = air_chief
							idea_token = generic_air_chief_reform_esicolor
							cost = 200
							traits = { air_chief_reform_3 }

							#visible = {
							#	NOT = { has_country_flag = air_chief_reform_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_chief_reform_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

remove_high_command_army_specific = {
	random_list = {
		seed = random
		20 = {
			set_country_flag = army_infantry_disabled

			modifier = {
				factor = 0
				
				has_country_flag = army_infantry_disabled
			}
		}
		20 = {
			set_country_flag = army_artillery_disabled

			modifier = {
				factor = 0
				
				has_country_flag = army_artillery_disabled
			}
		}
		20 = {
			set_country_flag = army_cavalry_disabled

			modifier = {
				factor = 0
				
				has_country_flag = army_cavalry_disabled
			}
		}
		20 = {
			set_country_flag = army_combined_arms_disabled

			modifier = {
				factor = 0
				
				has_country_flag = army_combined_arms_disabled
			}
		}
		20 = {
			set_country_flag = army_armored_disabled

			modifier = {
				factor = 0
				
				has_country_flag = army_armored_disabled
			}
		}
		20 = {
			set_country_flag = army_commando_disabled

			modifier = {
				factor = 0
				
				has_country_flag = army_commando_disabled
			}
		}
	}
}


randomise_army_infantry_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_infantry_1
				has_trait = army_infantry_2
				has_trait = army_infantry_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_infantry_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_infantry
							ledger = army
							cost = 50
							traits = { army_infantry_1 }

							#visible = {
							#	NOT = { has_country_flag = army_infantry_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_infantry_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_infantry_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_infantry
							ledger = army
							cost = 100
							traits = { army_infantry_2 }

							#visible = {
							#	NOT = { has_country_flag = army_infantry_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_infantry_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_infantry_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_infantry
							ledger = army
							cost = 200
							traits = { army_infantry_3 }

							#visible = {
							#	NOT = { has_country_flag = army_infantry_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_infantry_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_army_artillery_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_artillery_1
				has_trait = army_artillery_2
				has_trait = army_artillery_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_artillery_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_artillery
							ledger = army
							cost = 50
							traits = { army_artillery_1 }

							#visible = {
							#	NOT = { has_country_flag = army_artillery_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_artillery_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_artillery_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_artillery
							ledger = army
							cost = 100
							traits = { army_artillery_2 }

							#visible = {
							#	NOT = { has_country_flag = army_artillery_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_artillery_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_artillery_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_artillery
							ledger = army
							cost = 200
							traits = { army_artillery_3 }

							#visible = {
							#	NOT = { has_country_flag = army_artillery_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_artillery_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_army_cavalry_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_cavalry_1
				has_trait = army_cavalry_2
				has_trait = army_cavalry_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_cavalry_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_cavalry
							ledger = army
							cost = 50
							traits = { army_cavalry_1 }

							#visible = {
							#	NOT = { has_country_flag = army_cavalry_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_cavalry_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_cavalry_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_cavalry
							ledger = army
							cost = 100
							traits = { army_cavalry_2 }

							#visible = {
							#	NOT = { has_country_flag = army_cavalry_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_cavalry_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_cavalry_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_cavalry
							ledger = army
							cost = 200
							traits = { army_cavalry_3 }

							#visible = {
							#	NOT = { has_country_flag = army_cavalry_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_cavalry_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_army_combined_arms_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_CombinedArms_1
				has_trait = army_CombinedArms_2
				has_trait = army_CombinedArms_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_CombinedArms_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_combined_arms
							ledger = army
							cost = 50
							traits = { army_CombinedArms_1 }

							#visible = {
							#	NOT = { has_country_flag = army_combined_arms_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_combined_arms_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_CombinedArms_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_combined_arms
							ledger = army
							cost = 100
							traits = { army_CombinedArms_2 }

							#visible = {
							#	NOT = { has_country_flag = army_combined_arms_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_combined_arms_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_CombinedArms_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_combined_arms
							ledger = army
							cost = 200
							traits = { army_CombinedArms_3 }

							#visible = {
							#	NOT = { has_country_flag = army_combined_arms_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_combined_arms_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_army_armored_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_armored_1
				has_trait = army_armored_2
				has_trait = army_armored_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_armored_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_armored
							ledger = army
							cost = 50
							traits = { army_armored_1 }

							#visible = {
							#	NOT = { has_country_flag = army_armored_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_armored_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_armored_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_armored
							ledger = army
							cost = 100
							traits = { army_armored_2 }

							#visible = {
							#	NOT = { has_country_flag = army_armored_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_armored_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_armored_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_armored
							ledger = army
							cost = 200
							traits = { army_armored_3 }

							#visible = {
							#	NOT = { has_country_flag = army_armored_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_armored_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_army_commando_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_commando_1
				has_trait = army_commando_2
				has_trait = army_commando_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_commando_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_commando
							ledger = army
							cost = 50
							traits = { army_commando_1 }

							#visible = {
							#	NOT = { has_country_flag = army_commando_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_commando_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_commando_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_commando
							ledger = army
							cost = 100
							traits = { army_commando_2 }

							#visible = {
							#	NOT = { has_country_flag = army_commando_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_commando_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_commando_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_commando
							ledger = army
							cost = 200
							traits = { army_commando_3 }

							#visible = {
							#	NOT = { has_country_flag = army_commando_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_commando_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

remove_high_command_army_generic = {
	random_list = {
		seed = random
		20 = {
			set_country_flag = army_entrenchment_disabled

			modifier = {
				factor = 0
				
				has_country_flag = army_entrenchment_disabled
			}
		}
		20 = {
			set_country_flag = army_logistics_disabled

			modifier = {
				factor = 0
				
				has_country_flag = army_logistics_disabled
			}
		}
		20 = {
			set_country_flag = army_regrouping_disabled

			modifier = {
				factor = 0
				
				has_country_flag = army_regrouping_disabled
			}
		}
		20 = {
			set_country_flag = army_concealment_disabled

			modifier = {
				factor = 0
				
				has_country_flag = army_concealment_disabled
			}
		}
		20 = {
			set_country_flag = army_radio_intelligence_disabled

			modifier = {
				factor = 0
				
				has_country_flag = army_radio_intelligence_disabled
			}
		}
		20 = {
			set_country_flag = army_jungle_warfare_disabled

			modifier = {
				factor = 0
				
				has_country_flag = army_jungle_warfare_disabled
			}
		}
	}
}

randomise_army_entrenchment_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_entrenchment_1
				has_trait = army_entrenchment_2
				has_trait = army_entrenchment_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_entrenchment_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_entrenchment_esicolor
							ledger = army
							cost = 50
							traits = { army_entrenchment_1 }

							#visible = {
							#	NOT = { has_country_flag = army_entrenchment_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_entrenchment_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_entrenchment_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_entrenchment_esicolor
							ledger = army
							cost = 100
							traits = { army_entrenchment_2 }

							#visible = {
							#	NOT = { has_country_flag = army_entrenchment_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_entrenchment_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_entrenchment_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_entrenchment_esicolor
							ledger = army
							cost = 200
							traits = { army_entrenchment_3 }

							#visible = {
							#	NOT = { has_country_flag = army_entrenchment_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_entrenchment_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_army_logistics_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_logistics_1
				has_trait = army_logistics_2
				has_trait = army_logistics_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_logistics_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_logistics_esicolor
							ledger = army
							cost = 50
							traits = { army_logistics_1 }

							#visible = {
							#	NOT = { has_country_flag = army_logistics_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_logistics_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_logistics_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_logistics_esicolor
							ledger = army
							cost = 100
							traits = { army_logistics_2 }

							#visible = {
							#	NOT = { has_country_flag = army_logistics_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_logistics_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_logistics_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_logistics_esicolor
							ledger = army
							cost = 200
							traits = { army_logistics_3 }

							#visible = {
							#	NOT = { has_country_flag = army_logistics_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_logistics_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_army_regrouping_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_regrouping_1
				has_trait = army_regrouping_2
				has_trait = army_regrouping_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_regrouping_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_regrouping_esicolor
							ledger = army
							cost = 50
							traits = { army_regrouping_1 }

							#visible = {
							#	NOT = { has_country_flag = army_regrouping_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_regrouping_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_regrouping_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_regrouping_esicolor
							ledger = army
							cost = 100
							traits = { army_regrouping_2 }

							#visible = {
							#	NOT = { has_country_flag = army_regrouping_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_regrouping_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_regrouping_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_regrouping_esicolor
							ledger = army
							cost = 200
							traits = { army_regrouping_3 }

							#visible = {
							#	NOT = { has_country_flag = army_regrouping_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_regrouping_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_army_concealment_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_concealment_1
				has_trait = army_concealment_2
				has_trait = army_concealment_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_concealment_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_concealment
							ledger = army
							cost = 50
							traits = { army_concealment_1 }

							#visible = {
							#	NOT = { has_country_flag = army_concealment_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_concealment_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_concealment_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_concealment
							ledger = army
							cost = 100
							traits = { army_concealment_2 }

							#visible = {
							#	NOT = { has_country_flag = army_concealment_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_concealment_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_concealment_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_concealment
							ledger = army
							cost = 200
							traits = { army_concealment_3 }

							#visible = {
							#	NOT = { has_country_flag = army_concealment_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_concealment_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_army_radio_intelligence_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_radio_intelligence_1
				has_trait = army_radio_intelligence_2
				has_trait = army_radio_intelligence_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_radio_intelligence_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_radio_intelligence
							ledger = army
							cost = 50
							traits = { army_radio_intelligence_1 }

							#visible = {
							#	NOT = { has_country_flag = army_radio_intelligence_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_radio_intelligence_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_radio_intelligence_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_radio_intelligence
							ledger = army
							cost = 100
							traits = { army_radio_intelligence_2 }

							#visible = {
							#	NOT = { has_country_flag = army_radio_intelligence_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_radio_intelligence_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_radio_intelligence_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_radio_intelligence
							ledger = army
							cost = 200
							traits = { army_radio_intelligence_3 }

							#visible = {
							#	NOT = { has_country_flag = army_radio_intelligence_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_radio_intelligence_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_army_jungle_warfare_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = army_jungle_warfare_1
				has_trait = army_jungle_warfare_2
				has_trait = army_jungle_warfare_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_jungle_warfare_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_jungle_warfare
							ledger = army
							cost = 50
							traits = { army_jungle_warfare_1 }

							#visible = {
							#	NOT = { has_country_flag = army_jungle_warfare_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_jungle_warfare_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = army_jungle_warfare_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_jungle_warfare
							ledger = army
							cost = 100
							traits = { army_jungle_warfare_2 }

							#visible = {
							#	NOT = { has_country_flag = army_jungle_warfare_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_jungle_warfare_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = army_jungle_warfare_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_army_jungle_warfare
							ledger = army
							cost = 200
							traits = { army_jungle_warfare_3 }

							#visible = {
							#	NOT = { has_country_flag = army_jungle_warfare_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = army_jungle_warfare_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

remove_high_command_navy = {
	random_list = {
		seed = random
		12 = {
			set_country_flag = navy_amphibious_assault_disabled

			modifier = {
				factor = 0
				
				has_country_flag = navy_amphibious_assault_disabled
			}
		}
		12 = {
			set_country_flag = navy_fleet_logistics_disabled

			modifier = {
				factor = 0
				
				has_country_flag = navy_fleet_logistics_disabled
			}
		}
		12 = {
			set_country_flag = navy_naval_air_defense_disabled

			modifier = {
				factor = 0
				
				has_country_flag = navy_naval_air_defense_disabled
			}
		}
		12 = {
			set_country_flag = navy_anti_submarine_disabled

			modifier = {
				factor = 0
				
				has_country_flag = navy_anti_submarine_disabled
			}
		}
		12 = {
			set_country_flag = navy_submarine_disabled

			modifier = {
				factor = 0
				
				has_country_flag = navy_submarine_disabled
			}
		}
		12 = {
			set_country_flag = navy_capital_ship_disabled

			modifier = {
				factor = 0
				
				has_country_flag = navy_capital_ship_disabled
			}
		}
		12 = {
			set_country_flag = navy_screen_disabled

			modifier = {
				factor = 0
				
				has_country_flag = navy_screen_disabled
			}
		}
		12 = {
			set_country_flag = navy_carrier_disabled

			modifier = {
				factor = 0
				
				has_country_flag = navy_carrier_disabled
			}
		}
	}
}

randomise_navy_amphibious_assault_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = navy_amphibious_assault_1
				has_trait = navy_amphibious_assault_2
				has_trait = navy_amphibious_assault_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_amphibious_assault_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_amphibious_assault_esicolor
							ledger = navy
							cost = 50
							traits = { navy_amphibious_assault_1 }

							#visible = {
							#	NOT = { has_country_flag = navy_amphibious_assault_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_amphibious_assault_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_amphibious_assault_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_amphibious_assault_esicolor
							ledger = navy
							cost = 100
							traits = { navy_amphibious_assault_2 }

							#visible = {
							#	NOT = { has_country_flag = navy_amphibious_assault_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_amphibious_assault_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_amphibious_assault_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_amphibious_assault_esicolor
							ledger = navy
							cost = 200
							traits = { navy_amphibious_assault_3 }

							#visible = {
							#	NOT = { has_country_flag = navy_amphibious_assault_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_amphibious_assault_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_navy_fleet_logistics_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = navy_fleet_logistics_1
				has_trait = navy_fleet_logistics_2
				has_trait = navy_fleet_logistics_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_fleet_logistics_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_fleet_logistics_esicolor
							ledger = navy
							cost = 50
							traits = { navy_fleet_logistics_1 }

							#visible = {
							#	NOT = { has_country_flag = navy_fleet_logistics_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_fleet_logistics_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_fleet_logistics_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_fleet_logistics_esicolor
							ledger = navy
							cost = 100
							traits = { navy_fleet_logistics_2 }

							#visible = {
							#	NOT = { has_country_flag = navy_fleet_logistics_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_fleet_logistics_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_fleet_logistics_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_fleet_logistics_esicolor
							ledger = navy
							cost = 200
							traits = { navy_fleet_logistics_3 }

							#visible = {
							#	NOT = { has_country_flag = navy_fleet_logistics_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_fleet_logistics_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_navy_naval_air_defense_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = navy_naval_air_defense_1
				has_trait = navy_naval_air_defense_2
				has_trait = navy_naval_air_defense_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_naval_air_defense_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_naval_air_defense_esicolor
							ledger = navy
							cost = 50
							traits = { navy_naval_air_defense_1 }

							#visible = {
							#	NOT = { has_country_flag = navy_naval_air_defense_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_naval_air_defense_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_naval_air_defense_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_naval_air_defense_esicolor
							ledger = navy
							cost = 100
							traits = { navy_naval_air_defense_2 }

							#visible = {
							#	NOT = { has_country_flag = navy_naval_air_defense_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_naval_air_defense_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_naval_air_defense_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_naval_air_defense_esicolor
							ledger = navy
							cost = 200
							traits = { navy_naval_air_defense_3 }

							#visible = {
							#	NOT = { has_country_flag = navy_naval_air_defense_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_naval_air_defense_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_navy_anti_submarine_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = navy_anti_submarine_1
				has_trait = navy_anti_submarine_2
				has_trait = navy_anti_submarine_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_anti_submarine_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_anti_submarine
							ledger = navy
							cost = 50
							traits = { navy_anti_submarine_1 }

							#visible = {
							#	NOT = { has_country_flag = navy_anti_submarine_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_anti_submarine_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_anti_submarine_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_anti_submarine
							ledger = navy
							cost = 100
							traits = { navy_anti_submarine_2 }

							#visible = {
							#	NOT = { has_country_flag = navy_anti_submarine_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_anti_submarine_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_anti_submarine_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_anti_submarine
							ledger = navy
							cost = 200
							traits = { navy_anti_submarine_3 }

							#visible = {
							#	NOT = { has_country_flag = navy_anti_submarine_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_anti_submarine_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_navy_submarine_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = navy_submarine_1
				has_trait = navy_submarine_2
				has_trait = navy_submarine_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_submarine_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_submarine
							ledger = navy
							cost = 50
							traits = { navy_submarine_1 }

							#visible = {
							#	NOT = { has_country_flag = navy_submarine_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_submarine_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_submarine_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_submarine
							ledger = navy
							cost = 100
							traits = { navy_submarine_2 }

							#visible = {
							#	NOT = { has_country_flag = navy_submarine_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_submarine_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_submarine_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_submarine
							ledger = navy
							cost = 200
							traits = { navy_submarine_3 }

							#visible = {
							#	NOT = { has_country_flag = navy_submarine_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_submarine_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_navy_capital_ship_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = navy_capital_ship_1
				has_trait = navy_capital_ship_2
				has_trait = navy_capital_ship_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_capital_ship_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_capital_ship
							ledger = navy
							cost = 50
							traits = { navy_capital_ship_1 }

							#visible = {
							#	NOT = { has_country_flag = navy_capital_ship_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_capital_ship_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_capital_ship_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_capital_ship
							ledger = navy
							cost = 100
							traits = { navy_capital_ship_2 }

							#visible = {
							#	NOT = { has_country_flag = navy_capital_ship_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_capital_ship_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_capital_ship_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_capital_ship
							ledger = navy
							cost = 200
							traits = { navy_capital_ship_3 }

							#visible = {
							#	NOT = { has_country_flag = navy_capital_ship_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_capital_ship_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_navy_screen_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = navy_screen_1
				has_trait = navy_screen_2
				has_trait = navy_screen_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_screen_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_screen
							ledger = navy
							cost = 50
							traits = { navy_screen_1 }

							#visible = {
							#	NOT = { has_country_flag = navy_screen_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_screen_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_screen_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_screen
							ledger = navy
							cost = 100
							traits = { navy_screen_2 }

							#visible = {
							#	NOT = { has_country_flag = navy_screen_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_screen_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_screen_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_screen
							ledger = navy
							cost = 200
							traits = { navy_screen_3 }

							#visible = {
							#	NOT = { has_country_flag = navy_screen_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_screen_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_navy_carrier_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = navy_carrier_1
				has_trait = navy_carrier_2
				has_trait = navy_carrier_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_carrier_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_carrier
							ledger = navy
							cost = 50
							traits = { navy_carrier_1 }

							#visible = {
							#	NOT = { has_country_flag = navy_carrier_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_carrier_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_carrier_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_carrier
							ledger = navy
							cost = 100
							traits = { navy_carrier_2 }

							#visible = {
							#	NOT = { has_country_flag = navy_carrier_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_carrier_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = navy_carrier_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_navy_carrier
							ledger = navy
							cost = 200
							traits = { navy_carrier_3 }

							#visible = {
							#	NOT = { has_country_flag = navy_carrier_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = navy_carrier_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

remove_high_command_air = {
	random_list = {
		seed = random
		12 = {
			set_country_flag = air_air_superiority_disabled

			modifier = {
				factor = 0
				
				has_country_flag = air_air_superiority_disabled
			}
		}
		12 = {
			set_country_flag = air_bomber_interception_disabled

			modifier = {
				factor = 0
				
				has_country_flag = air_bomber_interception_disabled
			}
		}
		12 = {
			set_country_flag = air_close_air_support_disabled

			modifier = {
				factor = 0
				
				has_country_flag = air_close_air_support_disabled
			}
		}
		12 = {
			set_country_flag = air_naval_strike_disabled

			modifier = {
				factor = 0
				
				has_country_flag = air_naval_strike_disabled
			}
		}
		12 = {
			set_country_flag = air_tactical_bombing_disabled

			modifier = {
				factor = 0
				
				has_country_flag = air_tactical_bombing_disabled
			}
		}
		12 = {
			set_country_flag = air_strategic_bombing_disabled

			modifier = {
				factor = 0
				
				has_country_flag = air_strategic_bombing_disabled
			}
		}
		12 = {
			set_country_flag = air_airborne_disabled

			modifier = {
				factor = 0
				
				has_country_flag = air_airborne_disabled
			}
		}
		12 = {
			set_country_flag = air_air_combat_training_disabled

			modifier = {
				factor = 0
				
				has_country_flag = air_air_combat_training_disabled
			}
		}
	}
}

randomise_air_air_superiority_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = air_air_superiority_1
				has_trait = air_air_superiority_2
				has_trait = air_air_superiority_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_air_superiority_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_air_superiority_esicolor
							ledger = air
							cost = 50
							traits = { air_air_superiority_1 }

							#visible = {
							#	NOT = { has_country_flag = air_air_superiority_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_air_superiority_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_air_superiority_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_air_superiority_esicolor
							ledger = air
							cost = 100
							traits = { air_air_superiority_2 }

							#visible = {
							#	NOT = { has_country_flag = air_air_superiority_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_air_superiority_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = air_bomber_interception_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_air_superiority_esicolor
							ledger = air
							cost = 200
							traits = { air_air_superiority_3 }

							#visible = {
							#	NOT = { has_country_flag = air_air_superiority_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_air_superiority_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_air_bomber_interception_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = air_bomber_interception_1
				has_trait = air_bomber_interception_2
				has_trait = air_bomber_interception_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_bomber_interception_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_bomber_interception
							ledger = air
							cost = 50
							traits = { air_bomber_interception_1 }

							#visible = {
							#	NOT = { has_country_flag = air_bomber_interception_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_bomber_interception_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_bomber_interception_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_bomber_interception
							ledger = air
							cost = 100
							traits = { air_bomber_interception_2 }

							#visible = {
							#	NOT = { has_country_flag = air_bomber_interception_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_bomber_interception_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = air_bomber_interception_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_bomber_interception
							ledger = air
							cost = 200
							traits = { air_bomber_interception_3 }

							#visible = {
							#	NOT = { has_country_flag = air_bomber_interception_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_bomber_interception_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_air_close_air_support_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = air_close_air_support_1
				has_trait = air_close_air_support_2
				has_trait = air_close_air_support_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_close_air_support_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_close_air_support_esicolor
							ledger = air
							cost = 50
							traits = { air_close_air_support_1 }

							#visible = {
							#	NOT = { has_country_flag = air_close_air_support_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_close_air_support_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_close_air_support_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_close_air_support_esicolor
							ledger = air
							cost = 100
							traits = { air_close_air_support_2 }

							#visible = {
							#	NOT = { has_country_flag = air_close_air_support_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_close_air_support_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = air_close_air_support_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_close_air_support_esicolor
							ledger = air
							cost = 200
							traits = { air_close_air_support_3 }

							#visible = {
							#	NOT = { has_country_flag = air_close_air_support_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_close_air_support_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_air_naval_strike_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = air_naval_strike_1
				has_trait = air_naval_strike_2
				has_trait = air_naval_strike_3
			}
		}

		random_list = {
			seed = random
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_naval_strike_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_naval_strike
							ledger = air
							cost = 50
							traits = { air_naval_strike_1 }

							#visible = {
							#	NOT = { has_country_flag = air_naval_strike_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_naval_strike_disabled } }
							#}
						}
					}
				}
			}
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_naval_strike_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_naval_strike
							ledger = air
							cost = 100
							traits = { air_naval_strike_2 }

							#visible = {
							#	NOT = { has_country_flag = air_naval_strike_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_naval_strike_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = air_naval_strike_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_naval_strike
							ledger = air
							cost = 200
							traits = { air_naval_strike_3 }

							#visible = {
							#	NOT = { has_country_flag = air_naval_strike_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_naval_strike_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_air_tactical_bombing_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = air_tactical_bombing_1
				has_trait = air_tactical_bombing_2
				has_trait = air_tactical_bombing_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_tactical_bombing_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_tactical_bombing_esicolor
							ledger = air
							cost = 50
							traits = { air_tactical_bombing_1 }

							#visible = {
							#	NOT = { has_country_flag = air_tactical_bombing_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_tactical_bombing_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_tactical_bombing_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_tactical_bombing_esicolor
							ledger = air
							cost = 100
							traits = { air_tactical_bombing_2 }

							#visible = {
							#	NOT = { has_country_flag = air_tactical_bombing_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_tactical_bombing_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = air_tactical_bombing_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_tactical_bombing_esicolor
							ledger = air
							cost = 200
							traits = { air_tactical_bombing_3 }

							#visible = {
							#	NOT = { has_country_flag = air_tactical_bombing_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_tactical_bombing_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_air_strategic_bombing_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = air_strategic_bombing_1
				has_trait = air_strategic_bombing_2
				has_trait = air_strategic_bombing_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_strategic_bombing_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_strategic_bombing_esicolor
							ledger = air
							cost = 50
							traits = { air_strategic_bombing_1 }

							#visible = {
							#	NOT = { has_country_flag = air_strategic_bombing_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_strategic_bombing_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_strategic_bombing_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_strategic_bombing_esicolor
							ledger = air
							cost = 100
							traits = { air_strategic_bombing_2 }

							#visible = {
							#	NOT = { has_country_flag = air_strategic_bombing_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_strategic_bombing_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = air_strategic_bombing_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_strategic_bombing_esicolor
							ledger = air
							cost = 200
							traits = { air_strategic_bombing_3 }

							#visible = {
							#	NOT = { has_country_flag = air_strategic_bombing_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_strategic_bombing_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_air_airborne_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = air_airborne_1
				has_trait = air_airborne_2
				has_trait = air_airborne_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_airborne_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_airborne
							ledger = air
							cost = 50
							traits = { air_airborne_1 }

							#visible = {
							#	NOT = { has_country_flag = air_airborne_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_airborne_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_airborne_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_airborne
							ledger = air
							cost = 100
							traits = { air_airborne_2 }

							#visible = {
							#	NOT = { has_country_flag = air_airborne_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_airborne_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = air_airborne_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_airborne
							ledger = air
							cost = 200
							traits = { air_airborne_3 }

							#visible = {
							#	NOT = { has_country_flag = air_airborne_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_airborne_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

randomise_air_air_combat_training_levels = {
	every_character = {
		limit = {
			is_advisor = yes
			OR = {
				has_trait = air_air_combat_training_1
				has_trait = air_air_combat_training_2
				has_trait = air_air_combat_training_3
			}
		}

		random_list = {
			seed = random
			30 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_2
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_air_combat_training_1 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_air_combat_training_esicolor
							ledger = air
							cost = 50
							traits = { air_air_combat_training_1 }

							#visible = {
							#	NOT = { has_country_flag = air_air_combat_training_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_air_combat_training_disabled } }
							#}
						}
					}
				}
			}
			40 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_3
					}
				}

				if = {
					limit = { NOT = { has_trait = air_air_combat_training_2 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_air_combat_training_esicolor
							ledger = air
							cost = 100
							traits = { air_air_combat_training_2 }

							#visible = {
							#	NOT = { has_country_flag = air_air_combat_training_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_air_combat_training_disabled } }
							#}
						}
					}
				}
			}
			20 = {
				modifier = {
					factor = 0

					OR = {
						has_global_flag = military_advisor_levels_1
						has_global_flag = military_advisor_levels_2
					}
				}

				if = {
					limit = { NOT = { has_trait = air_air_combat_training_3 } }

					remove_advisor_role = { slot = high_command }
					add_advisor_role = {
						advisor = {
							slot = high_command
							idea_token = generic_air_air_combat_training_esicolor
							ledger = air
							cost = 200
							traits = { air_air_combat_training_3 }

							#visible = {
							#	NOT = { has_country_flag = air_air_combat_training_disabled }
							#}
							#available = {
							#	hidden_trigger = { NOT = { has_country_flag = air_air_combat_training_disabled } }
							#}
						}
					}
				}
			}
		}
	}
}

enable_all_advisors = {
	clear_advisor_disabled_flags = yes

	set_country_flag = all_advisors_enabled

	set_country_flag = mobile_warfare_expert_enabled
	set_country_flag = superior_firepower_expert_enabled
	set_country_flag = grand_battle_plan_expert_enabled
	set_country_flag = mass_assault_expert_enabled

	set_country_flag = naval_aviation_pioneer_enabled
	set_country_flag = grand_fleet_proponent_enabled
	set_country_flag = submarine_specialist_enabled

	set_country_flag = victory_through_airpower_enabled
	set_country_flag = close_air_support_proponent_enabled
	set_country_flag = assault_avaition_enabled
}

randomise_advisors = {
	clear_advisor_disabled_flags = yes

	remove_political_advisor = yes
	remove_political_advisor = yes
	remove_political_advisor = yes
	remove_political_advisor = yes
	remove_political_advisor = yes
	remove_political_advisor = yes
	remove_political_advisor = yes
	remove_political_advisor = yes
	remove_political_advisor = yes
	remove_political_advisor = yes
	remove_political_advisor = yes

	remove_spymaster = yes
	remove_spymaster = yes

	remove_theorist = yes
	remove_theorist = yes
	remove_theorist = yes

	get_branch_specific_military_theorist = yes
	get_branch_specific_naval_theorist = yes
	get_branch_specific_air_warfare_theorist = yes

	remove_scientist = yes
	remove_scientist = yes

	remove_army_chief = yes
	remove_army_chief = yes
	remove_army_chief = yes
	remove_army_chief = yes
	remove_army_chief = yes
	remove_army_chief = yes
	remove_army_chief = yes

	remove_navy_chief = yes
	remove_navy_chief = yes
	remove_navy_chief = yes

	remove_air_chief = yes
	remove_air_chief = yes
	remove_air_chief = yes

	remove_high_command_army_specific = yes
	remove_high_command_army_specific = yes
	remove_high_command_army_specific = yes
	remove_high_command_army_specific = yes

	remove_high_command_army_generic = yes
	remove_high_command_army_generic = yes
	remove_high_command_army_generic = yes
	remove_high_command_army_generic = yes

	remove_high_command_navy = yes
	remove_high_command_navy = yes
	remove_high_command_navy = yes
	remove_high_command_navy = yes
	remove_high_command_navy = yes
	remove_high_command_navy = yes

	remove_high_command_air = yes
	remove_high_command_air = yes
	remove_high_command_air = yes
	remove_high_command_air = yes
	remove_high_command_air = yes
	remove_high_command_air = yes
}

randomise_military_advisor_levels = {
	if = { limit = { NOT = { has_country_flag = army_chief_offensive_disabled } } randomise_army_chief_offensive_levels = yes }
	if = { limit = { NOT = { has_country_flag = army_chief_defensive_disabled } } randomise_army_chief_defensive_levels = yes }
	if = { limit = { NOT = { has_country_flag = army_chief_maneuver_disabled } } randomise_army_chief_maneuver_levels = yes }
	if = { limit = { NOT = { has_country_flag = army_chief_drill_disabled } } randomise_army_chief_drill_levels = yes }
	if = { limit = { NOT = { has_country_flag = army_chief_planning_disabled } } randomise_army_chief_planning_levels = yes }
	if = { limit = { NOT = { has_country_flag = army_chief_morale_disabled } } randomise_army_chief_morale_levels = yes }
	if = { limit = { NOT = { has_country_flag = army_chief_organizational_disabled } } randomise_army_chief_organizational_levels = yes }
	if = { limit = { NOT = { has_country_flag = army_chief_entrenchment_disabled } } randomise_army_chief_entrenchment_levels = yes }
	if = { limit = { NOT = { has_country_flag = army_chief_reform_disabled } } randomise_army_chief_reform_levels = yes }

	if = { limit = { NOT = { has_country_flag = navy_chief_commerce_raiding_disabled } } randomise_navy_chief_commerce_raiding_levels = yes }
	if = { limit = { NOT = { has_country_flag = navy_chief_maneuver_disabled } } randomise_navy_chief_maneuver_levels = yes }
	if = { limit = { NOT = { has_country_flag = navy_chief_decisive_battle_disabled } } randomise_navy_chief_decisive_battle_levels = yes }
	if = { limit = { NOT = { has_country_flag = navy_chief_naval_aviation_disabled } } randomise_navy_chief_naval_aviation_levels = yes }
	if = { limit = { NOT = { has_country_flag = navy_chief_reform_disabled } } randomise_navy_chief_reform_levels = yes }

	if = { limit = { NOT = { has_country_flag = air_chief_night_operations_disabled } } randomise_air_chief_night_operations_levels = yes }
	if = { limit = { NOT = { has_country_flag = air_chief_ground_support_disabled } } randomise_air_chief_ground_support_levels = yes }
	if = { limit = { NOT = { has_country_flag = air_chief_all_weather_disabled } } randomise_air_chief_all_weather_levels = yes }
	if = { limit = { NOT = { has_country_flag = air_chief_safety_disabled } } randomise_air_chief_safety_levels = yes }
	if = { limit = { NOT = { has_country_flag = air_chief_reform_disabled } } randomise_air_chief_reform_levels = yes }

	if = { limit = { NOT = { has_country_flag = army_infantry_disabled } } randomise_army_infantry_levels = yes }
	if = { limit = { NOT = { has_country_flag = army_artillery_disabled } } randomise_army_artillery_levels = yes }
	if = { limit = { NOT = { has_country_flag = army_cavalry_disabled } } randomise_army_cavalry_levels = yes }
	if = { limit = { NOT = { has_country_flag = army_combined_arms_disabled } } randomise_army_combined_arms_levels = yes }
	if = { limit = { NOT = { has_country_flag = army_armored_disabled } } randomise_army_armored_levels = yes }
	if = { limit = { NOT = { has_country_flag = army_commando_disabled } } randomise_army_commando_levels = yes }

	if = { limit = { NOT = { has_country_flag = army_entrenchment_disabled } } randomise_army_entrenchment_levels = yes }
	if = { limit = { NOT = { has_country_flag = army_logistics_disabled } } randomise_army_logistics_levels = yes }
	if = { limit = { NOT = { has_country_flag = army_regrouping_disabled } } randomise_army_regrouping_levels = yes }
	if = { limit = { NOT = { has_country_flag = army_concealment_disabled } } randomise_army_concealment_levels = yes }
	if = { limit = { NOT = { has_country_flag = army_radio_intelligence_disabled } } randomise_army_radio_intelligence_levels = yes }
	if = { limit = { NOT = { has_country_flag = army_jungle_warfare_disabled } } randomise_army_jungle_warfare_levels = yes }

	if = { limit = { NOT = { has_country_flag = navy_amphibious_assault_disabled } } randomise_navy_amphibious_assault_levels = yes }
	if = { limit = { NOT = { has_country_flag = navy_fleet_logistics_disabled } } randomise_navy_fleet_logistics_levels = yes }
	if = { limit = { NOT = { has_country_flag = navy_naval_air_defense_disabled } } randomise_navy_naval_air_defense_levels = yes }
	if = { limit = { NOT = { has_country_flag = navy_anti_submarine_disabled } } randomise_navy_anti_submarine_levels = yes }
	if = { limit = { NOT = { has_country_flag = navy_submarine_disabled } } randomise_navy_submarine_levels = yes }
	if = { limit = { NOT = { has_country_flag = navy_capital_ship_disabled } } randomise_navy_capital_ship_levels = yes }
	if = { limit = { NOT = { has_country_flag = navy_screen_disabled } } randomise_navy_screen_levels = yes }
	if = { limit = { NOT = { has_country_flag = navy_carrier_disabled } } randomise_navy_carrier_levels = yes }

	if = { limit = { NOT = { has_country_flag = air_air_superiority_disabled } } randomise_air_air_superiority_levels = yes }
	if = { limit = { NOT = { has_country_flag = air_bomber_interception_disabled } } randomise_air_bomber_interception_levels = yes }
	if = { limit = { NOT = { has_country_flag = air_close_air_support_disabled } } randomise_air_close_air_support_levels = yes }
	if = { limit = { NOT = { has_country_flag = air_naval_strike_disabled } } randomise_air_naval_strike_levels = yes }
	if = { limit = { NOT = { has_country_flag = air_tactical_bombing_disabled } } randomise_air_tactical_bombing_levels = yes }
	if = { limit = { NOT = { has_country_flag = air_strategic_bombing_disabled } } randomise_air_strategic_bombing_levels = yes }
	if = { limit = { NOT = { has_country_flag = air_airborne_disabled } } randomise_air_airborne_levels = yes }
	if = { limit = { NOT = { has_country_flag = air_air_combat_training_disabled } } randomise_air_air_combat_training_levels = yes }
}

adjust_named_advisor_traits = {
	4 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Gyula Gmbs de Jkfa
				limit = { has_trait = propaganda_expert }

				remove_trait = {
					slot = political_advisor
					trait = propaganda_expert
				}
				add_trait = {
					slot = political_advisor
					trait = AUS_prince_of_starhemberg
				}
			}
		}
	}
	7 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Walraven van Hall
				limit = { has_trait = financial_expert }

				remove_trait = {
					slot = political_advisor
					trait = financial_expert
				}
				add_trait = {
					slot = political_advisor
					trait = resistance_banker
				}
			}
		}
	}
	10 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Mieczysaw Michaowicz
				limit = { has_trait = democratic_reformer }

				remove_trait = {
					slot = political_advisor
					trait = democratic_reformer
				}
				add_trait = {
					slot = political_advisor
					trait = socdem_reformist
				}
			}
		}
		for_each_scope_loop = {
			array = state_advisors
			if = { # Marian Rejewski
				limit = { has_trait = code_breaker }

				remove_trait = {
					slot = political_advisor
					trait = code_breaker
				}
				add_trait = {
					slot = political_advisor
					trait = mastermind_code_cracker
				}
			}
		}
	}
	37 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Vilhelm Buhl
				limit = { has_trait = financial_expert }

				remove_trait = {
					slot = political_advisor
					trait = financial_expert
				}
				add_trait = {
					slot = political_advisor
					trait = finansminister
				}
			}
			if = { # Karl Kristian Steincke
				limit = { has_trait = editor }

				remove_trait = {
					slot = political_advisor
					trait = editor
				}
				add_trait = {
					slot = political_advisor
					trait = welfare_architect
				}
			}
			if = { # Alsing Andersen
				limit = { has_trait = war_industrialist }

				remove_trait = {
					slot = political_advisor
					trait = war_industrialist
				}
				add_trait = {
					slot = political_advisor
					trait = forsvarsminister
				}
			}
			if = { # Peter Horn
				limit = { has_trait = air_warfare_theorist }

				remove_trait = {
					slot = theorist
					trait = air_warfare_theorist
				}
				add_trait = {
					slot = theorist
					trait = dive_bomber
				}
			}
		}
	}
	43 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Gyula Gmbs de Jkfa
				limit = { has_trait = fascist_demagogue }

				remove_trait = {
					slot = political_advisor
					trait = fascist_demagogue
				}
				add_trait = {
					slot = political_advisor
					trait = HUN_fascist_prime_minister
				}
			}
			if = { # Magdolna Purgly
				limit = { has_trait = silent_workhorse }

				remove_trait = {
					slot = political_advisor
					trait = silent_workhorse
				}
				add_trait = {
					slot = political_advisor
					trait = HUN_her_serene_highness
				}
			}
			if = { # Mikls Horthy Jr.
				limit = { has_trait = editor }

				set_character_name = HUN_miklos_horthy_jr
				remove_trait = {
					slot = political_advisor
					trait = editor
				}
				add_trait = {
					slot = political_advisor
					trait = modernizer_and_diplomat
				}

				if = {
					limit = { has_dlc = "Gotterdammerung" }

					set_portraits = {
						civilian = {
							small = GFX_portrait_HUN_miklos_horthy_jr_small
						}
						army = {
							small = GFX_portrait_HUN_miklos_horthy_jr_small
						}
						navy = {
							small = GFX_portrait_HUN_miklos_horthy_jr_small
						}
					}
				}
				else = {
					set_portraits = {
						civilian = {
							small = GFX_portrait_europe_generic_fascism_3_small
						}
						army = {
							small = GFX_portrait_europe_generic_fascism_3_small
						}
						navy = {
							small = GFX_portrait_europe_generic_fascism_3_small
						}
					}
				}
			}
			if = { # Klmn Knya
				limit = { has_trait = compassionate_gentleman }

				remove_trait = {
					slot = political_advisor
					trait = compassionate_gentleman
				}
				add_trait = {
					slot = political_advisor
					trait = HUN_irredentist_foreign_minister
				}
			}
			if = { # Klmn Knya
				limit = { has_trait = smooth_talking_charmer }

				remove_trait = {
					slot = political_advisor
					trait = smooth_talking_charmer
				}
				add_trait = {
					slot = political_advisor
					trait = HUN_moderate_authoritarian
				}
			}
		}
	}
	45 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Slobodan Jovanovi
				limit = { has_trait = popular_figurehead }

				remove_trait = {
					slot = political_advisor
					trait = popular_figurehead
				}
				add_trait = {
					slot = political_advisor
					trait = constitutional_philosopher
				}
			}
		}
	}
	47 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Aristotle Onassis
				limit = { has_trait = captain_of_industry }

				remove_trait = {
					slot = political_advisor
					trait = captain_of_industry
				}
				add_trait = {
					slot = political_advisor
					trait = gifted_shipping_magnate
				}
			}
		}
	}
	48 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Georgi Ivanov Kyoseivanov
				limit = { has_trait = backroom_backstabber }

				remove_trait = {
					slot = political_advisor
					trait = backroom_backstabber
				}
				add_trait = {
					slot = political_advisor
					trait = tsars_puppet
				}
			}
		}
	}
	60 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Ernst Thlmann
				limit = { has_trait = communist_revolutionary }

				remove_trait = {
					slot = political_advisor
					trait = communist_revolutionary
				}
				add_trait = {
					slot = political_advisor
					trait = GER_proletarian_leader
				}
			}
		}
	}
	87 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Jerzy Rutkowski
				limit = { has_trait = prince_of_terror }

				remove_trait = {
					slot = political_advisor
					trait = prince_of_terror
				}
				add_trait = {
					slot = political_advisor
					trait = falangist_militarist
				}
			}
		}
	}
	99 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Peter Rochegune Munch
				limit = { has_trait = smooth_talking_charmer }

				remove_trait = {
					slot = political_advisor
					trait = smooth_talking_charmer
				}
				add_trait = {
					slot = political_advisor
					trait = disarmament_proponent
				}
			}
		}
	}
	100 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Skli Gumundsson
				limit = { has_trait = popular_figurehead }

				remove_trait = {
					slot = political_advisor
					trait = popular_figurehead
				}
				add_trait = {
					slot = political_advisor
					trait = ICE_minister_of_healthcare_and_finance
				}
			}
			if = { # Olaf J Thorlacius
				limit = { has_trait = backroom_backstabber }

				set_character_name = ICE_olaf_j_thorlacius
				remove_trait = {
					slot = political_advisor
					trait = backroom_backstabber
				}
				add_trait = {
					slot = political_advisor
					trait = ICE_progressive_doctor
				}

				if = {
					limit = { has_dlc = "Gotterdammerung" }

					set_portraits = {
						civilian = {
							small = GFX_portrait_ICE_olaf_j_thorlacius_small
						}
						army = {
							small = GFX_portrait_ICE_olaf_j_thorlacius_small
						}
						navy = {
							small = GFX_portrait_ICE_olaf_j_thorlacius_small
						}
					}
				}
				else = {
					set_portraits = {
						civilian = {
							small = GFX_idea_generic_political_advisor_europe_5
						}
						army = {
							small = GFX_idea_generic_political_advisor_europe_5
						}
						navy = {
							small = GFX_idea_generic_political_advisor_europe_5
						}
					}
				}
			}
		}
	}
	152 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Heimito von Doderer
				limit = { has_trait = editor }

				remove_trait = {
					slot = political_advisor
					trait = editor
				}
				add_trait = {
					slot = political_advisor
					trait = AUS_fascist_writer
				}
			}
		}
	}
	153 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Heimito von Doderer
				limit = { has_trait = communist_revolutionary }

				remove_trait = {
					slot = political_advisor
					trait = communist_revolutionary
				}
				add_trait = {
					slot = political_advisor
					trait = AUS_communist_revolutionary
				}
			}
			if = { # Otto Bauer
				limit = { has_trait = popular_figurehead }

				remove_trait = {
					slot = political_advisor
					trait = popular_figurehead
				}
				add_trait = {
					slot = political_advisor
					trait = AUS_the_father_of_austromarxism
				}
			}
		}
	}
	154 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Imre Nagy
				limit = { has_trait = communist_revolutionary }

				remove_trait = {
					slot = political_advisor
					trait = communist_revolutionary
				}
				add_trait = {
					slot = political_advisor
					trait = HUN_internationalist_marxist
				}
			}
			if = { # Ern Ger
				limit = { has_trait = head_of_intelligence }

				remove_trait = {
					slot = political_advisor
					trait = head_of_intelligence
				}
				add_trait = {
					slot = political_advisor
					trait = HUN_stalinist_agent
				}
			}
		}
	}
	155 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Istvn Bethlen
				limit = { has_trait = popular_figurehead }

				remove_trait = {
					slot = political_advisor
					trait = popular_figurehead
				}
				add_trait = {
					slot = political_advisor
					trait = HUN_popular_liberal
				}
			}
			if = { # Jusztinin Serdi
				limit = { has_trait = silent_workhorse }

				remove_trait = {
					slot = political_advisor
					trait = silent_workhorse
				}
				add_trait = {
					slot = political_advisor
					trait = HUN_archbishop_of_esztergom
				}
			}
		}
	}
	182 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Xenophon Giosmas
				limit = { has_trait = fascist_demagogue }

				remove_trait = {
					slot = political_advisor
					trait = fascist_demagogue
				}
				add_trait = {
					slot = political_advisor
					trait = national_socialist_paramilitarist
				}
			}
		}
	}
	184 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Dimitris Glinos
				limit = { has_trait = communist_revolutionary }

				remove_trait = {
					slot = political_advisor
					trait = communist_revolutionary
				}
				add_trait = {
					slot = political_advisor
					trait = marxist_academic
				}
			}
		}
	}
	266 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Karim Buzarjomehri
				limit = { has_trait = captain_of_industry }

				remove_trait = {
					slot = political_advisor
					trait = captain_of_industry
				}
				add_trait = {
					slot = political_advisor
					trait = PER_head_of_transport
				}
			}
			if = { # Rokneddin Mokhtari
				limit = { has_trait = head_of_intelligence }

				remove_trait = {
					slot = political_advisor
					trait = head_of_intelligence
				}
				add_trait = {
					slot = political_advisor
					trait = PER_head_of_military_police
				}
			}
		}
	}
	291 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Ma'ruf al-Rusafi
				limit = { has_trait = propaganda_expert }

				remove_trait = {
					slot = political_advisor
					trait = propaganda_expert
				}
				add_trait = {
					slot = political_advisor
					trait = IRQ_poet_of_freedom
				}
			}
		}
	}
	212 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Nikola Zhekov
				limit = { has_trait = ideological_crusader }

				remove_trait = {
					slot = political_advisor
					trait = ideological_crusader
				}
				add_trait = {
					slot = political_advisor
					trait = nazi_sympathizer
				}
			}
			if = { # Aleksandar Tsankov
				limit = { has_trait = financial_expert }

				remove_trait = {
					slot = political_advisor
					trait = financial_expert
				}
				add_trait = {
					slot = political_advisor
					trait = statism_adept
				}
			}
		}
	}
	278 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Roberto Marcelino Ortiz
				limit = { has_trait = editor }

				remove_trait = {
					slot = political_advisor
					trait = editor
				}
				add_trait = {
					slot = political_advisor
					trait = NOR_compliant_politician
				}
			}
			if = { # Ramn Castillo
				limit = { has_trait = smooth_talking_charmer }

				remove_trait = {
					slot = political_advisor
					trait = smooth_talking_charmer
				}
				add_trait = {
					slot = political_advisor
					trait = sharp_tongued_lawyer
				}
			}
		}
	}
	279 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Ulk
				limit = { has_trait = propaganda_expert }

				remove_trait = {
					slot = political_advisor
					trait = propaganda_expert
				}
				add_trait = {
					slot = political_advisor
					trait = face_licker
				}
			}
			if = { # Ernesto Barros Jarpa
				limit = { has_trait = smooth_talking_charmer }

				remove_trait = {
					slot = political_advisor
					trait = smooth_talking_charmer
				}
				add_trait = {
					slot = political_advisor
					trait = JUNO_minister_of_foreign_affairs
				}
			}
			if = { # Gustavo Ross Santa Mara
				limit = { has_trait = financial_expert }

				remove_trait = {
					slot = political_advisor
					trait = financial_expert
				}
				add_trait = {
					slot = political_advisor
					trait = JUNO_minister_of_finance
				}
			}
			if = { # Jorge Alessandri
				limit = { has_trait = economist }

				remove_trait = {
					slot = political_advisor
					trait = economist
				}
				add_trait = {
					slot = political_advisor
					trait = JUNO_conservative_businessman
				}
			}
			if = { # Benjamn Matte Larran
				limit = { has_trait = captain_of_industry }

				remove_trait = {
					slot = political_advisor
					trait = captain_of_industry
				}
				add_trait = {
					slot = political_advisor
					trait = SWE_minister_of_agriculture
				}
			}
		}
	}
	300 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Jos Espalter
				limit = { has_trait = smooth_talking_charmer }

				remove_trait = {
					slot = political_advisor
					trait = smooth_talking_charmer
				}
				if = {
					limit = { has_dlc = "La Resistance" }

					add_trait = {
						slot = political_advisor
						trait = minister_of_the_interior_aregai
					}
				}
				else = {
					add_trait = {
						slot = political_advisor
						trait = minister_of_the_interior_aregai_no_lar
					}
				}
			}
		}
	}
	309 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Anton de Kom
				limit = { has_trait = communist_revolutionary }

				remove_trait = {
					slot = political_advisor
					trait = communist_revolutionary
				}
				add_trait = {
					slot = political_advisor
					trait = colonial_communist
				}
			}
		}
	}
	341 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Said-i Nurs
				limit = { has_trait = staunch_monarchist }

				remove_trait = {
					slot = political_advisor
					trait = staunch_monarchist
				}
				add_trait = {
					slot = political_advisor
					trait = grand_vizier_nursi
				}
			}
		}
	}
	354 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Nzm Hikmet
				limit = { has_trait = silent_workhorse }

				remove_trait = {
					slot = political_advisor
					trait = silent_workhorse
				}
				add_trait = {
					slot = political_advisor
					trait = revolutionary_author
				}
			}
		}
	}
	411 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Abdolsamad Kambakhsh
				limit = { has_trait = propaganda_expert }

				remove_trait = {
					slot = political_advisor
					trait = propaganda_expert
				}
				add_trait = {
					slot = political_advisor
					trait = patriotic_socialist
				}
			}
		}
	}
	487 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Bernardino Bilbao Rioja
				limit = {
					OR = {
						has_trait = air_chief_reform_1
						has_trait = air_chief_reform_2
						has_trait = air_chief_reform_3
					}
				}

				set_character_name = BOL_bernardino_bilbao_rioja

				set_portraits = {
					civilian = {
						small = GFX_idea_generic_air_south_america_1
					}
					army = {
						small = GFX_idea_generic_air_south_america_1
					}
					navy = {
						small = GFX_idea_generic_air_south_america_1
					}
				}
			}
		}
	}
	496 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Benedito Valadares
				limit = { has_trait = silent_workhorse }

				remove_trait = {
					slot = political_advisor
					trait = silent_workhorse
				}
				add_trait = {
					slot = political_advisor
					trait = BRA_political_fox
				}
			}
		}
	}
	498 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Lencio Basbaum
				limit = { has_trait = communist_revolutionary }

				remove_trait = {
					slot = political_advisor
					trait = communist_revolutionary
				}
				add_trait = {
					slot = political_advisor
					trait = leftist_intellectual
				}
			}
		}
		for_each_scope_loop = {
			array = state_advisors
			if = { # Olga Benrio Prestes
				limit = { has_trait = propaganda_expert }

				remove_trait = {
					slot = political_advisor
					trait = propaganda_expert
				}
				add_trait = {
					slot = political_advisor
					trait = SWI_soviet_spy
				}
			}
		}
	}
	500 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Francisco Campos
				limit = { has_trait = ideological_crusader }

				remove_trait = {
					slot = political_advisor
					trait = ideological_crusader
				}
				add_trait = {
					slot = political_advisor
					trait = BRA_right_wing_ideologue
				}
			}
			if = { # Oswaldo Aranha
				limit = { has_trait = compassionate_gentleman }

				remove_trait = {
					slot = political_advisor
					trait = compassionate_gentleman
				}
				add_trait = {
					slot = political_advisor
					trait = BRA_renowned_ambassador
				}
			}
			if = { # Filinto Mller
				limit = { has_trait = head_of_intelligence }

				remove_trait = {
					slot = political_advisor
					trait = head_of_intelligence
				}
				add_trait = {
					slot = political_advisor
					trait = BRA_head_of_political_police
				}
			}
		}
	}
	#501 = { # His trait sucks, keep the generic/no-DLC one.
	#	for_each_scope_loop = {
	#		array = state_advisors
	#		if = { # Washington Luis Pereira
	#			limit = { has_trait = backroom_backstabber }
	#
	#			remove_trait = {
	#				slot = political_advisor
	#				trait = backroom_backstabber
	#			}
	#			add_trait = {
	#				slot = political_advisor
	#				trait = BRA_deposed_former_president
	#			}
	#		}
	#	}
	#}
	688 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Anselmo Jover Peralta
				limit = { has_trait = compassionate_gentleman }

				remove_trait = {
					slot = political_advisor
					trait = compassionate_gentleman
				}
				add_trait = {
					slot = political_advisor
					trait = SWE_minister_of_justice
				}
			}
		}
	}
	695 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Husain al-Rahhal
				limit = { has_trait = smooth_talking_charmer }

				remove_trait = {
					slot = political_advisor
					trait = smooth_talking_charmer
				}
				add_trait = {
					slot = political_advisor
					trait = IRQ_as_sahifah_editor
				}
			}
		}
	}
	696 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Muhammad Amin Zaki
				limit = { has_trait = popular_figurehead }

				remove_trait = {
					slot = political_advisor
					trait = popular_figurehead
				}
				add_trait = {
					slot = political_advisor
					trait = IRQ_kurdish_politician
				}
			}
		}
	}
	764 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Dimitrije Ljoti
				limit = { has_trait = fascist_demagogue }

				remove_trait = {
					slot = political_advisor
					trait = fascist_demagogue
				}
				add_trait = {
					slot = political_advisor
					trait = harsh_propagandist
				}
			}
		}
	}
	798 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Nejdet Sanar
				limit = { has_trait = propaganda_expert }

				remove_trait = {
					slot = political_advisor
					trait = propaganda_expert
				}
				add_trait = {
					slot = political_advisor
					trait = avid_turanist
				}
			}
		}
	}
	801 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Nikola Petkov
				limit = { has_trait = silent_workhorse }

				remove_trait = {
					slot = political_advisor
					trait = silent_workhorse
				}
				add_trait = {
					slot = political_advisor
					trait = leader_of_the_agrarian_union
				}
			}
			if = { # Stefan Stefanov
				limit = { has_trait = captain_of_industry }

				remove_trait = {
					slot = political_advisor
					trait = captain_of_industry
				}
				add_trait = {
					slot = political_advisor
					trait = industry_reformer
				}
			}
		}
	}
	804 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Milovan Djilas
				limit = { has_trait = democratic_reformer }

				remove_trait = {
					slot = political_advisor
					trait = democratic_reformer
				}
				add_trait = {
					slot = political_advisor
					trait = democratic_firebrand
				}
			}
		}
	}
	848 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Elizabet von Gutmann
				limit = { has_trait = captain_of_industry }

				remove_trait = {
					slot = political_advisor
					trait = captain_of_industry
				}
				add_trait = {
					slot = political_advisor
					trait = AUS_resourceful_princess
				}
			}
		}
	}
	853 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Dimitrije Ljoti
				limit = { has_trait = communist_revolutionary }

				remove_trait = {
					slot = political_advisor
					trait = communist_revolutionary
				}
				add_trait = {
					slot = political_advisor
					trait = communist_orator
				}
			}
		}
	}
	945 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Csar Charlone
				limit = { has_trait = financial_expert }

				remove_trait = {
					slot = political_advisor
					trait = financial_expert
				}
				add_trait = {
					slot = political_advisor
					trait = JUNO_minister_of_finance
				}
			}
		}
	}
	946 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Teodomiro Varela de Andrade
				limit = { has_trait = fascist_demagogue }

				remove_trait = {
					slot = political_advisor
					trait = fascist_demagogue
				}
				add_trait = {
					slot = political_advisor
					trait = fascist_corporatist
				}
			}
		}
	}
	950 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Manuel Aburto Panguilef
				limit = { has_trait = staunch_traditionalist }

				remove_trait = {
					slot = political_advisor
					trait = staunch_traditionalist
				}
				add_trait = {
					slot = political_advisor
					trait = JUNO_mapuche_traditionalist
				}
			}
			if = { # Rayn Quitral
				limit = { has_trait = popular_figurehead }

				remove_trait = {
					slot = political_advisor
					trait = popular_figurehead
				}
				add_trait = {
					slot = political_advisor
					trait = JUNO_famous_soprano
				}
			}
			if = { # Carlos Huayquiir
				limit = { has_trait = silent_workhorse }

				remove_trait = {
					slot = political_advisor
					trait = silent_workhorse
				}
				add_trait = {
					slot = political_advisor
					trait = JUNO_mapuche_journalist
				}
			}
			if = { # Guido Beck
				limit = { has_trait = compassionate_gentleman }

				remove_trait = {
					slot = political_advisor
					trait = compassionate_gentleman
				}
				add_trait = {
					slot = political_advisor
					trait = JUNO_apostlic_prefect_of_araucania
				}
			}
			if = { # Esteban Romero Sandoval
				limit = { has_trait = economist }

				remove_trait = {
					slot = political_advisor
					trait = economist
				}
				add_trait = {
					slot = political_advisor
					trait = JUNO_mapuche_economist
				}
			}
		}
	}
	951 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Pablo Neruda
				limit = { has_trait = communist_revolutionary }

				remove_trait = {
					slot = political_advisor
					trait = communist_revolutionary
				}
				add_trait = {
					slot = political_advisor
					trait = socialist_writer
				}
			}
			if = { # Salvador Allende
				limit = { has_trait = popular_figurehead }

				remove_trait = {
					slot = political_advisor
					trait = popular_figurehead
				}
				add_trait = {
					slot = political_advisor
					trait = JUNO_reformist_minister_of_health
				}
			}
		}
	}
	952 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Miguel Serrano
				limit = { has_trait = fascist_demagogue }

				remove_trait = {
					slot = political_advisor
					trait = fascist_demagogue
				}
				add_trait = {
					slot = political_advisor
					trait = JUNO_national_socialist_occultist
				}
			}
			if = { # Francisco Antonio Encina
				limit = { has_trait = economist }

				remove_trait = {
					slot = political_advisor
					trait = economist
				}
				add_trait = {
					slot = political_advisor
					trait = JUNO_agricultural_national_socialist
				}
			}
		}
	}
	956 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Marcelo Torcuato de Alvear
				limit = { has_trait = democratic_reformer }

				remove_trait = {
					slot = political_advisor
					trait = democratic_reformer
				}
				add_trait = {
					slot = political_advisor
					trait = democratic_crusader
				}
			}
		}
	}
	973 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Fidl Plffy
				limit = { has_trait = fascist_demagogue }

				remove_trait = {
					slot = political_advisor
					trait = fascist_demagogue
				}
				add_trait = {
					slot = political_advisor
					trait = nazi_sympathizer
				}
			}
		}
	}
	974 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Lszl Rajk
				limit = { has_trait = communist_revolutionary }

				remove_trait = {
					slot = political_advisor
					trait = communist_revolutionary
				}
				add_trait = {
					slot = political_advisor
					trait = marxist_philosopher
				}
			}
			if = { # Sndor Garbai
				limit = { has_trait = popular_figurehead }

				remove_trait = {
					slot = political_advisor
					trait = popular_figurehead
				}
				add_trait = {
					slot = political_advisor
					trait = HUN_goulash_communist
				}
			}
			if = { # Sndor Garbai
				limit = { has_trait = financial_expert }

				remove_trait = {
					slot = political_advisor
					trait = financial_expert
				}
				add_trait = {
					slot = political_advisor
					trait = socialist_economist
				}
			}
			if = { # Jzsef Kelen
				limit = { has_trait = captain_of_industry }

				remove_trait = {
					slot = political_advisor
					trait = captain_of_industry
				}
				add_trait = {
					slot = political_advisor
					trait = peoples_commisar_of_heavy_industries
				}
			}
		}
	}
	975 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Ludwig von Mises
				limit = { has_trait = financial_expert }

				remove_trait = {
					slot = political_advisor
					trait = financial_expert
				}
				add_trait = {
					slot = political_advisor
					trait = AUS_treasurer_of_the_monarchy
				}
			}
		}
		for_each_scope_loop = {
			array = state_advisors
			if = { # Maximilian Ronge
				limit = { has_trait = code_breaker }

				remove_trait = {
					slot = political_advisor
					trait = code_breaker
				}
				add_trait = {
					slot = political_advisor
					trait = AUS_veteran_head_of_agency
				}
			}
		}
	}
	976 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Marianne Pollak
				limit = { has_trait = communist_revolutionary }

				remove_trait = {
					slot = political_advisor
					trait = communist_revolutionary
				}
				add_trait = {
					slot = political_advisor
					trait = ARG_socialist_feminist
				}
			}
			if = { # Bruno Kreisky
				limit = { has_trait = popular_figurehead }

				remove_trait = {
					slot = political_advisor
					trait = popular_figurehead
				}
				add_trait = {
					slot = political_advisor
					trait = AUS_meticulous_lawyer
				}
			}
		}
	}
	1011 = {
		for_each_scope_loop = {
			array = state_advisors
			if = { # Hikmat Sulayman
				limit = { has_trait = silent_workhorse }

				remove_trait = {
					slot = political_advisor
					trait = silent_workhorse
				}
				add_trait = {
					slot = political_advisor
					trait = IRQ_minister_of_the_interior
				}
			}
			if = { # Sharaf bin Rajeh
				limit = { has_trait = popular_figurehead }

				remove_trait = {
					slot = political_advisor
					trait = popular_figurehead
				}
				add_trait = {
					slot = political_advisor
					trait = IRQ_emir_of_taif
				}
			}
		}
	}
}

remove_tank_designer = {
	random_list = {
		seed = random
		15 = {
			set_country_flag = armored_car_manufacturer_disabled

			modifier = {
				factor = 0

				OR = {
					NOT = { has_dlc = "La Resistance" }
					has_dlc = "Arms Against Tyranny" # MIO version is under Materiel Tab.
					has_country_flag = armored_car_manufacturer_disabled
				}
			}
		}
		15 = {
			set_country_flag = infantry_tank_manufacturer_disabled

			modifier = {
				factor = 0
				
				has_country_flag = infantry_tank_manufacturer_disabled
			}
		}
		20 = {
			set_country_flag = assault_gun_manufacturer_disabled

			modifier = {
				factor = 0
				
				has_country_flag = assault_gun_manufacturer_disabled
			}
		}
		20 = {
			set_country_flag = fast_tank_manufacturer_disabled

			modifier = {
				factor = 0
				
				has_country_flag = fast_tank_manufacturer_disabled
			}
		}
		15 = {
			set_country_flag = medium_tank_manufacturer_disabled

			modifier = {
				factor = 0
				
				has_country_flag = medium_tank_manufacturer_disabled
			}
		}
		15 = {
			set_country_flag = heavy_tank_manufacturer_disabled

			modifier = {
				factor = 0
				
				has_country_flag = heavy_tank_manufacturer_disabled
			}
		}
		20 = {
			set_country_flag = tank_refurbishment_plant_disabled

			modifier = {
				factor = 0

				has_country_flag = tank_refurbishment_plant_disabled
			}
		}
	}
}

remove_ship_designer = {
	random_list = {
		seed = random
		10 = {
			set_country_flag = pacific_fleet_naval_manufacturer_disabled

			modifier = {
				factor = 0

				OR = {
					has_country_flag = pacific_fleet_naval_manufacturer_disabled
					AND = {
						has_country_flag = atlantic_fleet_naval_manufacturer_disabled
						has_country_flag = mediterranean_fleet_naval_manufacturer_disabled
						has_country_flag = black_sea_fleet_naval_manufacturer_disabled
					}
				}
			}
		}
		10 = {
			set_country_flag = atlantic_fleet_naval_manufacturer_disabled

			modifier = {
				factor = 0

				OR = {
					has_country_flag = atlantic_fleet_naval_manufacturer_disabled
					AND = {
						has_country_flag = pacific_fleet_naval_manufacturer_disabled
						has_country_flag = mediterranean_fleet_naval_manufacturer_disabled
						has_country_flag = black_sea_fleet_naval_manufacturer_disabled
					}
				}
			}
		}
		10 = {
			set_country_flag = mediterranean_fleet_naval_manufacturer_disabled

			modifier = {
				factor = 0

				OR = {
					has_dlc = "Arms Against Tyranny"
					has_country_flag = mediterranean_fleet_naval_manufacturer_disabled
					AND = {
						has_country_flag = pacific_fleet_naval_manufacturer_disabled
						has_country_flag = atlantic_fleet_naval_manufacturer_disabled
						has_country_flag = black_sea_fleet_naval_manufacturer_disabled
					}
				}
			}
		}
		10 = {
			set_country_flag = black_sea_fleet_naval_manufacturer_disabled

			modifier = {
				factor = 0

				OR = {
					has_country_flag = black_sea_fleet_naval_manufacturer_disabled
					AND = {
						has_country_flag = pacific_fleet_naval_manufacturer_disabled
						has_country_flag = atlantic_fleet_naval_manufacturer_disabled
						has_country_flag = mediterranean_fleet_naval_manufacturer_disabled
					}
				}
			}
		}
		15 = {
			set_country_flag = battlefleet_designer_disabled

			modifier = {
				factor = 0

				OR = {
					has_dlc = "Arms Against Tyranny"
					has_country_flag = battlefleet_designer_disabled
				}
			}
		}
		15 = {
			set_country_flag = repair_and_refurbishment_plant_disabled

			modifier = {
				factor = 0

				has_country_flag = repair_and_refurbishment_plant_disabled
			}
		}
		15 = {
			set_country_flag = coastal_defence_naval_manufacturer_disabled

			modifier = {
				factor = 0

				OR = {
					has_dlc = "Arms Against Tyranny"
					has_country_flag = coastal_defence_naval_manufacturer_disabled
				}
			}
		}
		15 = {
			set_country_flag = submarine_manufacturer_disabled

			modifier = {
				factor = 0

				has_country_flag = submarine_manufacturer_disabled
			}
		}
		15 = {
			set_country_flag = raiding_fleet_naval_manufacturer_disabled

			modifier = {
				factor = 0

				OR = {
					has_country_flag = convoy_escort_naval_manufacturer_disabled
					has_country_flag = raiding_fleet_naval_manufacturer_disabled
				}
			}
		}
		15 = {
			set_country_flag = convoy_escort_naval_manufacturer_disabled

			modifier = {
				factor = 0

				OR = {
					has_country_flag = raiding_fleet_naval_manufacturer_disabled
					has_country_flag = convoy_escort_naval_manufacturer_disabled
				}
			}
		}
	}
}

remove_aircraft_designer = {
	random_list = {
		seed = random
		15 = {
			set_country_flag = light_aircraft_manufacturer_disabled

			modifier = {
				factor = 0

				has_country_flag = light_aircraft_manufacturer_disabled
			}
		}
		15 = {
			set_country_flag = agility_focused_aircraft_manufacturer_disabled

			modifier = {
				factor = 0

				has_country_flag = agility_focused_aircraft_manufacturer_disabled
			}
		}
		15 = {
			set_country_flag = CAS_manufacturer_disabled

			modifier = {
				factor = 0

				has_country_flag = CAS_manufacturer_disabled
			}
		}
		15 = {
			set_country_flag = medium_aircraft_manufacturer_disabled

			modifier = {
				factor = 0

				has_country_flag = medium_aircraft_manufacturer_disabled
			}
		}
		15 = {
			set_country_flag = fuel_efficient_aircraft_manufacturer_disabled

			modifier = {
				factor = 0

				has_country_flag = fuel_efficient_aircraft_manufacturer_disabled
			}
		}
		15 = {
			set_country_flag = multi_role_aircraft_manufacturer_disabled

			modifier = {
				factor = 0

				has_country_flag = multi_role_aircraft_manufacturer_disabled
			}
		}
		15 = {
			set_country_flag = heavy_aircraft_manufacturer_disabled

			modifier = {
				factor = 0

				has_country_flag = heavy_aircraft_manufacturer_disabled
			}
		}
		15 = {
			set_country_flag = naval_aircraft_manufacturer_disabled

			modifier = {
				factor = 0

				has_country_flag = naval_aircraft_manufacturer_disabled
			}
		}
	}
}

remove_materiel_designer = {
	random_list = {
		seed = random
		5 = {
			set_country_flag = infantry_equipment_manufacturer_disabled

			modifier = {
				factor = 0

				has_country_flag = infantry_equipment_manufacturer_disabled
			}
		}
		15 = {
			set_country_flag = support_equipment_manufacturer_disabled

			modifier = {
				factor = 0

				has_country_flag = support_equipment_manufacturer_disabled
			}
		}
		15 = {
			set_country_flag = artillery_manufacturer_disabled

			modifier = {
				factor = 0

				has_country_flag = artillery_manufacturer_disabled
			}
		}
		20 = {
			set_country_flag = motorized_equipment_manufacturer_disabled

			modifier = {
				factor = 0

				has_country_flag = motorized_equipment_manufacturer_disabled
			}
		}
		25 = {
			set_country_flag = armored_car_manufacturer_disabled

			modifier = {
				factor = 0

				OR = {
					NOT = { has_dlc = "La Resistance" }
					NOT = { has_dlc = "Arms Against Tyranny" } # Designer version is in Armor Tab.
					has_country_flag = armored_car_manufacturer_disabled
				}
			}
		}
		50 = {
			set_country_flag = helicopter_manufacturer_disabled

			modifier = {
				factor = 0

				OR = {
					NOT = { has_dlc = "Gotterdammerung" }
					NOT = { has_dlc = "Arms Against Tyranny" }
					has_country_flag = helicopter_manufacturer_disabled
				}
			}
		}
	}
}

remove_industrial_concern = {
	random_list = {
		seed = random
		5 = {
			set_country_flag = industrial_concern_disabled

			modifier = {
				factor = 0

				OR = {
					has_country_flag = industrial_concern_disabled
					has_country_flag = electronics_concern_disabled
				}
			}
		}
		5 = {
			set_country_flag = electronics_concern_disabled

			modifier = {
				factor = 0

				OR = {
					has_country_flag = industrial_concern_disabled
					has_country_flag = electronics_concern_disabled
				}
			}
		}
		20 = {
			set_country_flag = refinery_concern_disabled

			modifier = {
				factor = 0
				
				has_country_flag = refinery_concern_disabled
			}
		}
		20 = {
			set_country_flag = telephone_company_disabled

			modifier = {
				factor = 0
				
				has_country_flag = telephone_company_disabled
			}
		}
		20 = {
			set_country_flag = energy_supply_company_disabled

			modifier = {
				factor = 0
				
				has_country_flag = energy_supply_company_disabled
			}
		}
		20 = {
			set_country_flag = forestry_company_disabled

			modifier = {
				factor = 0
				
				has_country_flag = forestry_company_disabled
			}
		}
		20 = {
			set_country_flag = construction_company_disabled

			modifier = {
				factor = 0
				
				has_country_flag = construction_company_disabled
			}
		}
		20 = {
			set_country_flag = mining_company_disabled

			modifier = {
				factor = 0
				
				has_country_flag = mining_company_disabled
			}
		}
		20 = {
			set_country_flag = railway_company_disabled

			modifier = {
				factor = 0
				
				has_country_flag = railway_company_disabled
			}
		}
		20 = { }
	}
}

randomise_designers = {
	clear_company_disabled_flags = yes

	remove_tank_designer = yes
	remove_tank_designer = yes
	remove_tank_designer = yes
	if = {
		limit = {
			has_dlc = "La Resistance"
			NOT = { has_dlc = "Arms Against Tyranny" }
		}

		remove_tank_designer = yes
	}

	remove_ship_designer = yes
	remove_ship_designer = yes
	remove_ship_designer = yes
	remove_ship_designer = yes
	if = {
		limit = { NOT = { has_dlc = "Arms Against Tyranny" } }

		remove_ship_designer = yes
		remove_ship_designer = yes
		remove_ship_designer = yes
	}

	remove_aircraft_designer = yes
	remove_aircraft_designer = yes
	remove_aircraft_designer = yes
	remove_aircraft_designer = yes
	remove_aircraft_designer = yes

	remove_materiel_designer = yes
	if = {
		limit = {
			has_dlc = "La Resistance"
			has_dlc = "Arms Against Tyranny"
		}

		remove_materiel_designer = yes
	}
	if = {
		limit = {
			has_dlc = "Gotterdammerung"
			has_dlc = "Arms Against Tyranny"
		}

		remove_materiel_designer = yes
	}

	remove_industrial_concern = yes
	remove_industrial_concern = yes
	remove_industrial_concern = yes
	remove_industrial_concern = yes
	remove_industrial_concern = yes
	remove_industrial_concern = yes
	remove_industrial_concern = yes
}

setup_default_advisors = {
	set_country_flag = popular_figurehead_disabled
	set_country_flag = propaganda_expert_disabled
	set_country_flag = backroom_backstabber_disabled
	set_country_flag = editor_disabled
	set_country_flag = ideological_crusader_disabled
	set_country_flag = compassionate_gentleman_disabled
	set_country_flag = smooth_talking_charmer_disabled
	set_country_flag = financial_expert_disabled
	set_country_flag = economist_disabled
	set_country_flag = quartermaster_general_disabled
	set_country_flag = armaments_organizer_disabled

	set_country_flag = code_breaker_disabled
	set_country_flag = encryption_expert_disabled

	set_country_flag = rocket_scientist_disabled

	set_country_flag = army_chief_drill_disabled
	set_country_flag = army_chief_planning_disabled
	set_country_flag = army_chief_morale_disabled
	set_country_flag = army_chief_organizational_disabled
	set_country_flag = army_chief_entrenchment_disabled
	set_country_flag = army_chief_reform_disabled

	set_country_flag = navy_chief_naval_aviation_disabled
	set_country_flag = navy_chief_reform_disabled

	set_country_flag = air_chief_night_operations_disabled
	set_country_flag = air_chief_reform_disabled

	set_country_flag = army_cavalry_disabled
	set_country_flag = army_combined_arms_disabled
	set_country_flag = army_armored_disabled
	set_country_flag = army_commando_disabled
	set_country_flag = army_regrouping_disabled
	set_country_flag = army_concealment_disabled
	set_country_flag = army_radio_intelligence_disabled
	set_country_flag = army_jungle_warfare_disabled

	set_country_flag = navy_naval_air_defense_disabled
	set_country_flag = navy_anti_submarine_disabled
	set_country_flag = navy_submarine_disabled
	set_country_flag = navy_capital_ship_disabled
	set_country_flag = navy_screen_disabled
	set_country_flag = navy_carrier_disabled

	set_country_flag = air_air_superiority_disabled
	set_country_flag = air_bomber_interception_disabled
	set_country_flag = air_close_air_support_disabled
	set_country_flag = air_naval_strike_disabled
	set_country_flag = air_tactical_bombing_disabled
	set_country_flag = air_strategic_bombing_disabled
}

setup_basegame_advisors = {
	set_country_flag = popular_figurehead_disabled
	set_country_flag = propaganda_expert_disabled
	set_country_flag = silent_workhorse_disabled
	set_country_flag = prince_of_terror_disabled
	set_country_flag = backroom_backstabber_disabled
	set_country_flag = editor_disabled
	set_country_flag = ideological_crusader_disabled
	set_country_flag = compassionate_gentleman_disabled
	set_country_flag = smooth_talking_charmer_disabled
	set_country_flag = financial_expert_disabled
	set_country_flag = economist_disabled
	set_country_flag = quartermaster_general_disabled
	set_country_flag = armaments_organizer_disabled

	set_country_flag = code_breaker_disabled
	set_country_flag = encryption_expert_disabled

	set_country_flag = nuclear_scientist_disabled
	set_country_flag = rocket_scientist_disabled

	set_country_flag = army_chief_maneuver_disabled
	set_country_flag = army_chief_drill_disabled
	set_country_flag = army_chief_planning_disabled
	set_country_flag = army_chief_morale_disabled
	set_country_flag = army_chief_organizational_disabled
	set_country_flag = army_chief_entrenchment_disabled
	set_country_flag = army_chief_reform_disabled
	set_country_flag = army_chief_old_guard_disabled

	set_country_flag = navy_chief_maneuver_disabled
	set_country_flag = navy_chief_naval_aviation_disabled
	set_country_flag = navy_chief_reform_disabled
	set_country_flag = navy_chief_old_guard_disabled

	set_country_flag = air_chief_night_operations_disabled
	set_country_flag = air_chief_safety_disabled
	set_country_flag = air_chief_reform_disabled
	set_country_flag = air_chief_old_guard_disabled

	set_country_flag = army_infantry_disabled
	set_country_flag = army_cavalry_disabled
	set_country_flag = army_combined_arms_disabled
	set_country_flag = army_armored_disabled
	set_country_flag = army_commando_disabled
	set_country_flag = army_entrenchment_disabled
	set_country_flag = army_regrouping_disabled
	set_country_flag = army_concealment_disabled
	set_country_flag = army_radio_intelligence_disabled
	set_country_flag = army_jungle_warfare_disabled

	set_country_flag = navy_amphibious_assault_disabled
	set_country_flag = navy_naval_air_defense_disabled
	set_country_flag = navy_anti_submarine_disabled
	set_country_flag = navy_submarine_disabled
	set_country_flag = navy_capital_ship_disabled
	set_country_flag = navy_screen_disabled
	set_country_flag = navy_carrier_disabled

	set_country_flag = air_air_superiority_disabled
	set_country_flag = air_bomber_interception_disabled
	set_country_flag = air_close_air_support_disabled
	set_country_flag = air_naval_strike_disabled
	set_country_flag = air_tactical_bombing_disabled
	set_country_flag = air_strategic_bombing_disabled
	set_country_flag = air_airborne_disabled
}

setup_default_companies = {
	set_country_flag = infantry_tank_manufacturer_disabled
	set_country_flag = assault_gun_manufacturer_disabled
	set_country_flag = tank_refurbishment_plant_disabled

	set_country_flag = black_sea_fleet_naval_manufacturer_disabled
	set_country_flag = battlefleet_designer_disabled
	set_country_flag = repair_and_refurbishment_plant_disabled
	set_country_flag = coastal_defence_naval_manufacturer_disabled
	set_country_flag = submarine_manufacturer_disabled
	set_country_flag = raiding_fleet_naval_manufacturer_disabled

	set_country_flag = agility_focused_aircraft_manufacturer_disabled
	set_country_flag = CAS_manufacturer_disabled
	set_country_flag = fuel_efficient_aircraft_manufacturer_disabled
	set_country_flag = multi_role_aircraft_manufacturer_disabled

	set_country_flag = armored_car_manufacturer_disabled
	set_country_flag = helicopter_manufacturer_disabled

	set_country_flag = telephone_company_disabled
	set_country_flag = energy_supply_company_disabled
	set_country_flag = forestry_company_disabled
	set_country_flag = construction_company_disabled
	set_country_flag = mining_company_disabled
	set_country_flag = railway_company_disabled
}

setup_basegame_companies = {
	set_country_flag = infantry_tank_manufacturer_disabled
	set_country_flag = assault_gun_manufacturer_disabled
	set_country_flag = fast_tank_manufacturer_disabled
	set_country_flag = heavy_tank_manufacturer_disabled
	set_country_flag = tank_refurbishment_plant_disabled

	set_country_flag = pacific_fleet_naval_manufacturer_disabled
	set_country_flag = atlantic_fleet_naval_manufacturer_disabled
	set_country_flag = mediterranean_fleet_naval_manufacturer_disabled
	set_country_flag = black_sea_fleet_naval_manufacturer_disabled
	set_country_flag = battlefleet_designer_disabled
	set_country_flag = repair_and_refurbishment_plant_disabled
	set_country_flag = coastal_defence_naval_manufacturer_disabled
	set_country_flag = submarine_manufacturer_disabled
	set_country_flag = raiding_fleet_naval_manufacturer_disabled

	set_country_flag = agility_focused_aircraft_manufacturer_disabled
	set_country_flag = CAS_manufacturer_disabled
	set_country_flag = fuel_efficient_aircraft_manufacturer_disabled
	set_country_flag = multi_role_aircraft_manufacturer_disabled

	set_country_flag = support_equipment_manufacturer_disabled
	set_country_flag = armored_car_manufacturer_disabled
	set_country_flag = helicopter_manufacturer_disabled

	set_country_flag = refinery_concern_disabled
	set_country_flag = telephone_company_disabled
	set_country_flag = energy_supply_company_disabled
	set_country_flag = forestry_company_disabled
	set_country_flag = construction_company_disabled
	set_country_flag = mining_company_disabled
	set_country_flag = railway_company_disabled
}

clear_advisor_disabled_flags = {
	clr_country_flag = all_advisors_enabled

	clr_country_flag = popular_figurehead_disabled
	clr_country_flag = propaganda_expert_disabled
	clr_country_flag = silent_workhorse_disabled
	clr_country_flag = prince_of_terror_disabled
	clr_country_flag = backroom_backstabber_disabled
	clr_country_flag = editor_disabled
	clr_country_flag = ideological_crusader_disabled
	clr_country_flag = compassionate_gentleman_disabled
	clr_country_flag = smooth_talking_charmer_disabled
	clr_country_flag = financial_expert_disabled
	clr_country_flag = economist_disabled
	clr_country_flag = captain_of_industry_disabled
	clr_country_flag = war_industrialist_disabled
	clr_country_flag = fortification_engineer_disabled
	clr_country_flag = quartermaster_general_disabled
	clr_country_flag = armaments_organizer_disabled

	clr_country_flag = head_of_intelligence_disabled
	clr_country_flag = code_breaker_disabled
	clr_country_flag = encryption_expert_disabled

	clr_country_flag = military_theorist_disabled
	clr_country_flag = naval_theorist_disabled
	clr_country_flag = air_warfare_theorist_disabled

	clr_country_flag = mobile_warfare_expert_enabled
	clr_country_flag = superior_firepower_expert_enabled
	clr_country_flag = grand_battle_plan_expert_enabled
	clr_country_flag = mass_assault_expert_enabled

	clr_country_flag = naval_aviation_pioneer_enabled
	clr_country_flag = grand_fleet_proponent_enabled
	clr_country_flag = submarine_specialist_enabled

	clr_country_flag = victory_through_airpower_enabled
	clr_country_flag = close_air_support_proponent_enabled
	clr_country_flag = assault_avaition_enabled

	clr_country_flag = nuclear_scientist_disabled
	clr_country_flag = rocket_scientist_disabled

	clr_country_flag = army_chief_offensive_disabled
	clr_country_flag = army_chief_defensive_disabled
	clr_country_flag = army_chief_maneuver_disabled
	clr_country_flag = army_chief_drill_disabled
	clr_country_flag = army_chief_planning_disabled
	clr_country_flag = army_chief_morale_disabled
	clr_country_flag = army_chief_organizational_disabled
	clr_country_flag = army_chief_entrenchment_disabled
	clr_country_flag = army_chief_reform_disabled
	clr_country_flag = army_chief_old_guard_disabled

	clr_country_flag = navy_chief_commerce_raiding_disabled
	clr_country_flag = navy_chief_maneuver_disabled
	clr_country_flag = navy_chief_decisive_battle_disabled
	clr_country_flag = navy_chief_naval_aviation_disabled
	clr_country_flag = navy_chief_reform_disabled
	clr_country_flag = navy_chief_old_guard_disabled

	clr_country_flag = air_chief_night_operations_disabled
	clr_country_flag = air_chief_ground_support_disabled
	clr_country_flag = air_chief_all_weather_disabled
	clr_country_flag = air_chief_safety_disabled
	clr_country_flag = air_chief_reform_disabled
	clr_country_flag = air_chief_old_guard_disabled

	clr_country_flag = army_infantry_disabled
	clr_country_flag = army_artillery_disabled
	clr_country_flag = army_cavalry_disabled
	clr_country_flag = army_combined_arms_disabled
	clr_country_flag = army_armored_disabled
	clr_country_flag = army_commando_disabled
	clr_country_flag = army_entrenchment_disabled
	clr_country_flag = army_logistics_disabled
	clr_country_flag = army_regrouping_disabled
	clr_country_flag = army_concealment_disabled
	clr_country_flag = army_radio_intelligence_disabled
	clr_country_flag = army_jungle_warfare_disabled

	clr_country_flag = navy_amphibious_assault_disabled
	clr_country_flag = navy_fleet_logistics_disabled
	clr_country_flag = navy_naval_air_defense_disabled
	clr_country_flag = navy_anti_submarine_disabled
	clr_country_flag = navy_submarine_disabled
	clr_country_flag = navy_capital_ship_disabled
	clr_country_flag = navy_screen_disabled
	clr_country_flag = navy_carrier_disabled

	clr_country_flag = air_air_superiority_disabled
	clr_country_flag = air_bomber_interception_disabled
	clr_country_flag = air_close_air_support_disabled
	clr_country_flag = air_naval_strike_disabled
	clr_country_flag = air_tactical_bombing_disabled
	clr_country_flag = air_strategic_bombing_disabled
	clr_country_flag = air_airborne_disabled
	clr_country_flag = air_air_combat_training_disabled
}

clear_company_disabled_flags = {
	clr_country_flag = infantry_tank_manufacturer_disabled
	clr_country_flag = assault_gun_manufacturer_disabled
	clr_country_flag = fast_tank_manufacturer_disabled
	clr_country_flag = medium_tank_manufacturer_disabled
	clr_country_flag = heavy_tank_manufacturer_disabled
	clr_country_flag = tank_refurbishment_plant_disabled

	clr_country_flag = pacific_fleet_naval_manufacturer_disabled
	clr_country_flag = atlantic_fleet_naval_manufacturer_disabled
	clr_country_flag = mediterranean_fleet_naval_manufacturer_disabled
	clr_country_flag = black_sea_fleet_naval_manufacturer_disabled
	clr_country_flag = battlefleet_designer_disabled
	clr_country_flag = repair_and_refurbishment_plant_disabled
	clr_country_flag = coastal_defence_naval_manufacturer_disabled
	clr_country_flag = submarine_manufacturer_disabled
	clr_country_flag = raiding_fleet_naval_manufacturer_disabled
	clr_country_flag = convoy_escort_naval_manufacturer_disabled

	clr_country_flag = light_aircraft_manufacturer_disabled
	clr_country_flag = agility_focused_aircraft_manufacturer_disabled
	clr_country_flag = CAS_manufacturer_disabled
	clr_country_flag = medium_aircraft_manufacturer_disabled
	clr_country_flag = fuel_efficient_aircraft_manufacturer_disabled
	clr_country_flag = multi_role_aircraft_manufacturer_disabled
	clr_country_flag = heavy_aircraft_manufacturer_disabled
	clr_country_flag = naval_aircraft_manufacturer_disabled

	clr_country_flag = industrial_concern_disabled
	clr_country_flag = electronics_concern_disabled
	clr_country_flag = refinery_concern_disabled
	clr_country_flag = telephone_company_disabled
	clr_country_flag = energy_supply_company_disabled
	clr_country_flag = forestry_company_disabled
	clr_country_flag = construction_company_disabled
	clr_country_flag = mining_company_disabled
	clr_country_flag = railway_company_disabled

	clr_country_flag = infantry_equipment_manufacturer_disabled
	clr_country_flag = support_equipment_manufacturer_disabled
	clr_country_flag = artillery_manufacturer_disabled
	clr_country_flag = motorized_equipment_manufacturer_disabled
	clr_country_flag = armored_car_manufacturer_disabled
	clr_country_flag = helicopter_manufacturer_disabled
}

clear_leader_traits = {
	if = { limit = { has_country_leader_with_trait = warmonger } remove_country_leader_trait = warmonger }
	if = { limit = { has_country_leader_with_trait = hedonist } remove_country_leader_trait = hedonist }
	if = { limit = { has_country_leader_with_trait = dictator } remove_country_leader_trait = dictator }
	if = { limit = { has_country_leader_with_trait = generallissimo } remove_country_leader_trait = generallissimo }
	if = { limit = { has_country_leader_with_trait = appeaser } remove_country_leader_trait = appeaser }
	if = { limit = { has_country_leader_with_trait = hawk } remove_country_leader_trait = hawk }
	if = { limit = { has_country_leader_with_trait = stammer } remove_country_leader_trait = stammer }
	if = { limit = { has_country_leader_with_trait = humble } remove_country_leader_trait = humble }
	if = { limit = { has_country_leader_with_trait = retired_officer } remove_country_leader_trait = retired_officer }
	if = { limit = { has_country_leader_with_trait = fascist_sympathies } remove_country_leader_trait = fascist_sympathies }
	if = { limit = { has_country_leader_with_trait = eager_collaborator } remove_country_leader_trait = eager_collaborator }
	if = { limit = { has_country_leader_with_trait = nationalist_symbol } remove_country_leader_trait = nationalist_symbol }
	if = { limit = { has_country_leader_with_trait = skillful_diplomat } remove_country_leader_trait = skillful_diplomat }
	if = { limit = { has_country_leader_with_trait = conservative_grandee } remove_country_leader_trait = conservative_grandee }
	if = { limit = { has_country_leader_with_trait = conservative_nationalist } remove_country_leader_trait = conservative_nationalist }
	if = { limit = { has_country_leader_with_trait = staunch_constitutionalist } remove_country_leader_trait = staunch_constitutionalist }
	if = { limit = { has_country_leader_with_trait = staunch_stalinist } remove_country_leader_trait = staunch_stalinist }
	if = { limit = { has_country_leader_with_trait = staunch_anti_fascist } remove_country_leader_trait = staunch_anti_fascist }
	if = { limit = { has_country_leader_with_trait = reluctant_interventionist } remove_country_leader_trait = reluctant_interventionist }
	if = { limit = { has_country_leader_with_trait = indomitable_perseverance } remove_country_leader_trait = indomitable_perseverance }
	if = { limit = { has_country_leader_with_trait = political_dancer } remove_country_leader_trait = political_dancer }
	if = { limit = { has_country_leader_with_trait = national_integralist } remove_country_leader_trait = national_integralist }
	if = { limit = { has_country_leader_with_trait = tenacious_negotiator } remove_country_leader_trait = tenacious_negotiator }
	if = { limit = { has_country_leader_with_trait = triumphant_revolutionary } remove_country_leader_trait = triumphant_revolutionary }
	if = { limit = { has_country_leader_with_trait = comintern_workhorse } remove_country_leader_trait = comintern_workhorse }
	if = { limit = { has_country_leader_with_trait = veteran_communist } remove_country_leader_trait = veteran_communist }
	if = { limit = { has_country_leader_with_trait = militant_socialist } remove_country_leader_trait = militant_socialist }
	if = { limit = { has_country_leader_with_trait = inexperienced_imperialist } remove_country_leader_trait = inexperienced_imperialist }
	if = { limit = { has_country_leader_with_trait = inexperienced_sultan } remove_country_leader_trait = inexperienced_sultan }
	if = { limit = { has_country_leader_with_trait = underage_monarch } remove_country_leader_trait = underage_monarch }
	if = { limit = { has_country_leader_with_trait = constitutional_monarch_minor } remove_country_leader_trait = constitutional_monarch_minor }
	if = { limit = { has_country_leader_with_trait = fascist_militia_leader } remove_country_leader_trait = fascist_militia_leader }
	if = { limit = { has_country_leader_with_trait = fascist_orchestrator } remove_country_leader_trait = fascist_orchestrator }
	if = { limit = { has_country_leader_with_trait = jefe } remove_country_leader_trait = jefe }
	if = { limit = { has_country_leader_with_trait = caudillo_1 } remove_country_leader_trait = caudillo_1 }
	if = { limit = { has_country_leader_with_trait = champion_of_peace_1 } remove_country_leader_trait = champion_of_peace_1 }
	if = { limit = { has_country_leader_with_trait = figurehead_president } remove_country_leader_trait = figurehead_president }
	if = { limit = { has_country_leader_with_trait = indecisive } remove_country_leader_trait = indecisive }
	if = { limit = { has_country_leader_with_trait = dealbroker } remove_country_leader_trait = dealbroker }
	if = { limit = { has_country_leader_with_trait = economic_reformer } remove_country_leader_trait = economic_reformer }
	if = { limit = { has_country_leader_with_trait = stout_defender } remove_country_leader_trait = stout_defender }
	if = { limit = { has_country_leader_with_trait = headstrong } remove_country_leader_trait = headstrong }
	if = { limit = { has_country_leader_with_trait = anti_bolshevik_leftist } remove_country_leader_trait = anti_bolshevik_leftist }
	if = { limit = { has_country_leader_with_trait = anti_communist } remove_country_leader_trait = anti_communist }
	if = { limit = { has_country_leader_with_trait = anti_democrat } remove_country_leader_trait = anti_democrat }
	if = { limit = { has_country_leader_with_trait = resolute_social_democrat } remove_country_leader_trait = resolute_social_democrat }
	if = { limit = { has_country_leader_with_trait = imperial_connections } remove_country_leader_trait = imperial_connections }
	if = { limit = { has_country_leader_with_trait = great_war_hero } remove_country_leader_trait = great_war_hero }
	if = { limit = { has_country_leader_with_trait = warrior_code } remove_country_leader_trait = warrior_code }
	if = { limit = { has_country_leader_with_trait = leftist_intellectual } remove_country_leader_trait = leftist_intellectual }
	if = { limit = { has_country_leader_with_trait = our_right_to_survive } remove_country_leader_trait = our_right_to_survive }
	if = { limit = { has_country_leader_with_trait = technocrat } remove_country_leader_trait = technocrat }
	if = { limit = { has_country_leader_with_trait = defender_of_the_peasantry } remove_country_leader_trait = defender_of_the_peasantry }
	if = { limit = { has_country_leader_with_trait = hardened_officer } remove_country_leader_trait = hardened_officer }
	if = { limit = { has_country_leader_with_trait = freedom_fighter } remove_country_leader_trait = freedom_fighter }
	if = { limit = { has_country_leader_with_trait = experienced_insurgent } remove_country_leader_trait = experienced_insurgent }
	if = { limit = { has_country_leader_with_trait = unpopular_monarch } remove_country_leader_trait = unpopular_monarch }
	if = { limit = { has_country_leader_with_trait = divisive_absolute_monarch } remove_country_leader_trait = divisive_absolute_monarch }
	if = { limit = { has_country_leader_with_trait = stalin_heart_of_steel } remove_country_leader_trait = stalin_heart_of_steel }
	if = { limit = { has_country_leader_with_trait = permanent_revolutionary } remove_country_leader_trait = permanent_revolutionary }
	if = { limit = { has_country_leader_with_trait = strong_party_discipline } remove_country_leader_trait = strong_party_discipline }
	if = { limit = { has_country_leader_with_trait = unscrupulous_orchestrator } remove_country_leader_trait = unscrupulous_orchestrator }
	if = { limit = { has_country_leader_with_trait = unscrupulous_orchestrator_no_lar } remove_country_leader_trait = unscrupulous_orchestrator_no_lar }
	if = { limit = { has_country_leader_with_trait = cornered_fox } remove_country_leader_trait = cornered_fox }
	if = { limit = { has_country_leader_with_trait = king_of_kings } remove_country_leader_trait = king_of_kings }
	if = { limit = { has_country_leader_with_trait = king_of_ethiopia } remove_country_leader_trait = king_of_ethiopia }
	if = { limit = { has_country_leader_with_trait = the_red_ras } remove_country_leader_trait = the_red_ras }
	if = { limit = { has_country_leader_with_trait = tainted_ras } remove_country_leader_trait = tainted_ras }
	if = { limit = { has_country_leader_with_trait = crowned_adder } remove_country_leader_trait = crowned_adder }
	if = { limit = { has_country_leader_with_trait = gallant_doctor } remove_country_leader_trait = gallant_doctor }
	if = { limit = { has_country_leader_with_trait = spirit_of_genghis } remove_country_leader_trait = spirit_of_genghis }
	if = { limit = { has_country_leader_with_trait = emperor_and_autocrat_of_all_the_russias } remove_country_leader_trait = emperor_and_autocrat_of_all_the_russias }
	if = { limit = { has_country_leader_with_trait = defier_of_the_sun_god } remove_country_leader_trait = defier_of_the_sun_god }
	if = { limit = { has_country_leader_with_trait = supreme_representative_of_god_on_earth } remove_country_leader_trait = supreme_representative_of_god_on_earth }
	if = { limit = { has_country_leader_with_trait = duke_of_orleans } remove_country_leader_trait = duke_of_orleans }
	if = { limit = { has_country_leader_with_trait = the_soldier_king } remove_country_leader_trait = the_soldier_king }
	if = { limit = { has_country_leader_with_trait = il_duce } remove_country_leader_trait = il_duce }
	if = { limit = { has_country_leader_with_trait = aviation_hero } remove_country_leader_trait = aviation_hero }
	if = { limit = { has_country_leader_with_trait = duke_of_aosta } remove_country_leader_trait = duke_of_aosta }
	if = { limit = { has_country_leader_with_trait = iron_duke } remove_country_leader_trait = iron_duke }
	if = { limit = { has_country_leader_with_trait = rich_sultan } remove_country_leader_trait = rich_sultan }
	if = { limit = { has_country_leader_with_trait = emperor_showa } remove_country_leader_trait = emperor_showa }
	if = { limit = { has_country_leader_with_trait = imperial_sanction  } remove_country_leader_trait = imperial_sanction  }
	if = { limit = { has_country_leader_with_trait = tsar_unifier } remove_country_leader_trait = tsar_unifier }
	if = { limit = { has_country_leader_with_trait = the_hero_of_the_leipzig_trials } remove_country_leader_trait = the_hero_of_the_leipzig_trials }
	if = { limit = { has_country_leader_with_trait = hardened_officer } remove_country_leader_trait = hardened_officer }
	if = { limit = { has_country_leader_with_trait = father_of_the_turks } remove_country_leader_trait = father_of_the_turks }
	if = { limit = { has_country_leader_with_trait = milli_sef } remove_country_leader_trait = milli_sef }
	if = { limit = { has_country_leader_with_trait = maresal } remove_country_leader_trait = maresal }
	if = { limit = { has_country_leader_with_trait = the_statist } remove_country_leader_trait = the_statist }
	if = { limit = { has_country_leader_with_trait = gentle_scholar } remove_country_leader_trait = gentle_scholar }
	if = { limit = { has_country_leader_with_trait = sultana } remove_country_leader_trait = sultana }
	if = { limit = { has_country_leader_with_trait = liberal_democratic_paragon } remove_country_leader_trait = liberal_democratic_paragon }
	if = { limit = { has_country_leader_with_trait = man_of_the_nation } remove_country_leader_trait = man_of_the_nation }
	if = { limit = { has_country_leader_with_trait = the_academic } remove_country_leader_trait = the_academic }
	if = { limit = { has_country_leader_with_trait = prime_minister_husnu } remove_country_leader_trait = prime_minister_husnu }
	if = { limit = { has_country_leader_with_trait = reluctant_stalinist } remove_country_leader_trait = reluctant_stalinist }
	if = { limit = { has_country_leader_with_trait = patriotic_guerilla } remove_country_leader_trait = patriotic_guerilla }
	if = { limit = { has_country_leader_with_trait = guerilla_warfare_expert } remove_country_leader_trait = guerilla_warfare_expert }
	if = { limit = { has_country_leader_with_trait = arkhigos } remove_country_leader_trait = arkhigos }
	if = { limit = { has_country_leader_with_trait = polemarch } remove_country_leader_trait = polemarch }
	if = { limit = { has_country_leader_with_trait = professional_crisis_solver } remove_country_leader_trait = professional_crisis_solver }
	if = { limit = { has_country_leader_with_trait = sins_of_the_father } remove_country_leader_trait = sins_of_the_father }
	if = { limit = { has_country_leader_with_trait = irredentist_academic } remove_country_leader_trait = irredentist_academic }
	if = { limit = { has_country_leader_with_trait = strict_austerity_adherent } remove_country_leader_trait = strict_austerity_adherent }
	if = { limit = { has_country_leader_with_trait = wilhelmina } remove_country_leader_trait = wilhelmina }
	if = { limit = { has_country_leader_with_trait = disdain_for_politicians_1 } remove_country_leader_trait = disdain_for_politicians_1 }
	if = { limit = { has_country_leader_with_trait = queen_of_the_people } remove_country_leader_trait = queen_of_the_people }
	if = { limit = { has_country_leader_with_trait = polish_peasant_champion } remove_country_leader_trait = polish_peasant_champion }
	if = { limit = { has_country_leader_with_trait = soviet_thaw } remove_country_leader_trait = soviet_thaw }
	if = { limit = { has_country_leader_with_trait = unruly_falangist } remove_country_leader_trait = unruly_falangist }
	if = { limit = { has_country_leader_with_trait = CAN_liberal_corporatist } remove_country_leader_trait = CAN_liberal_corporatist }
	if = { limit = { has_country_leader_with_trait = CAN_canadian_fuhrer } remove_country_leader_trait = CAN_canadian_fuhrer }
	if = { limit = { has_country_leader_with_trait = CAN_social_gospel } remove_country_leader_trait = CAN_social_gospel }
	if = { limit = { has_country_leader_with_trait = SWI_radical_democrat } remove_country_leader_trait = SWI_radical_democrat }
	if = { limit = { has_country_leader_with_trait = SWI_conservative_democrat } remove_country_leader_trait = SWI_conservative_democrat }
	if = { limit = { has_country_leader_with_trait = SWI_weapons_designer } remove_country_leader_trait = SWI_weapons_designer }
	if = { limit = { has_country_leader_with_trait = SWI_fascist_recruiter } remove_country_leader_trait = SWI_fascist_recruiter }
	if = { limit = { has_country_leader_with_trait = SWI_anarchist } remove_country_leader_trait = SWI_anarchist }
	if = { limit = { has_country_leader_with_trait = SWI_soviet_spy } remove_country_leader_trait = SWI_soviet_spy }
	if = { limit = { has_country_leader_with_trait = SWI_trade_unionist } remove_country_leader_trait = SWI_trade_unionist }
	if = { limit = { has_country_leader_with_trait = SWE_ardent_conservative } remove_country_leader_trait = SWE_ardent_conservative }
	if = { limit = { has_country_leader_with_trait = NOR_popular_reformer } remove_country_leader_trait = NOR_popular_reformer }
	if = { limit = { has_country_leader_with_trait = NOR_fascist_lackey } remove_country_leader_trait = NOR_fascist_lackey }
	if = { limit = { has_country_leader_with_trait = JAN_polarizing_leader } remove_country_leader_trait = JAN_polarizing_leader }
	if = { limit = { has_country_leader_with_trait = DEN_socialdemokrat } remove_country_leader_trait = DEN_socialdemokrat }
	if = { limit = { has_country_leader_with_trait = DEN_venstre } remove_country_leader_trait = DEN_venstre }
	if = { limit = { has_country_leader_with_trait = DEN_kommunist } remove_country_leader_trait = DEN_kommunist }
	if = { limit = { has_country_leader_with_trait = DEN_fascist_populist } remove_country_leader_trait = DEN_fascist_populist }
	if = { limit = { has_country_leader_with_trait = DEN_fascist_militarist } remove_country_leader_trait = DEN_fascist_militarist }
	if = { limit = { has_country_leader_with_trait = DEN_the_king } remove_country_leader_trait = DEN_the_king }
	if = { limit = { has_country_leader_with_trait = ICE_hot_tempered_reformer } remove_country_leader_trait = ICE_hot_tempered_reformer }
	if = { limit = { has_country_leader_with_trait = ICE_the_strict_regent } remove_country_leader_trait = ICE_the_strict_regent }
	if = { limit = { has_country_leader_with_trait = member_of_the_suojeluskunta } remove_country_leader_trait = member_of_the_suojeluskunta }
	if = { limit = { has_country_leader_with_trait = conservative_nationalist  } remove_country_leader_trait = conservative_nationalist  }
	if = { limit = { has_country_leader_with_trait = sotamarsalkka } remove_country_leader_trait = sotamarsalkka }
	if = { limit = { has_country_leader_with_trait = crown_prince_of_finland } remove_country_leader_trait = crown_prince_of_finland }
	if = { limit = { has_country_leader_with_trait = grandpa_vainamoinen } remove_country_leader_trait = grandpa_vainamoinen }
	if = { limit = { has_country_leader_with_trait = el_jefe_maximo } remove_country_leader_trait = el_jefe_maximo }
	if = { limit = { has_country_leader_with_trait = protector_of_the_campesinos } remove_country_leader_trait = protector_of_the_campesinos }
	if = { limit = { has_country_leader_with_trait = refounder_of_mexico } remove_country_leader_trait = refounder_of_mexico }
	if = { limit = { has_country_leader_with_trait = the_dean_of_mexican_marxism } remove_country_leader_trait = the_dean_of_mexican_marxism }
	if = { limit = { has_country_leader_with_trait = revolutionary_general } remove_country_leader_trait = revolutionary_general }
	if = { limit = { has_country_leader_with_trait = devoted_trotskyist } remove_country_leader_trait = devoted_trotskyist }
	if = { limit = { has_country_leader_with_trait = the_gentleman_president } remove_country_leader_trait = the_gentleman_president }
	if = { limit = { has_country_leader_with_trait = primate_of_mexico } remove_country_leader_trait = primate_of_mexico }
	if = { limit = { has_country_leader_with_trait = BRA_vengeful_industrialist } remove_country_leader_trait = BRA_vengeful_industrialist }
	if = { limit = { has_country_leader_with_trait = BRA_authoritarian_populist } remove_country_leader_trait = BRA_authoritarian_populist }
	if = { limit = { has_country_leader_with_trait = BRA_reluctant_integralist } remove_country_leader_trait = BRA_reluctant_integralist }
	if = { limit = { has_country_leader_with_trait = BRA_politically_educated } remove_country_leader_trait = BRA_politically_educated }
	if = { limit = { has_country_leader_with_trait = BRA_bandit_revolutionary } remove_country_leader_trait = BRA_bandit_revolutionary }
	if = { limit = { has_country_leader_with_trait = BRA_democratic_engineer } remove_country_leader_trait = BRA_democratic_engineer }
	if = { limit = { has_country_leader_with_trait = BRA_education_pioneer } remove_country_leader_trait = BRA_education_pioneer }
	if = { limit = { has_country_leader_with_trait = BRA_anti_authoritarian } remove_country_leader_trait = BRA_anti_authoritarian }
	if = { limit = { has_country_leader_with_trait = ARG_university_rector } remove_country_leader_trait = ARG_university_rector }
	if = { limit = { has_country_leader_with_trait = ARG_fraudulent_industrialist } remove_country_leader_trait = ARG_fraudulent_industrialist }
	if = { limit = { has_country_leader_with_trait = ARG_feminist_revolutionary } remove_country_leader_trait = ARG_feminist_revolutionary }
	if = { limit = { has_country_leader_with_trait = ARG_prominent_centrist } remove_country_leader_trait = ARG_prominent_centrist }
	if = { limit = { has_country_leader_with_trait = ARG_moderate_dictator } remove_country_leader_trait = ARG_moderate_dictator }
	if = { limit = { has_country_leader_with_trait = ARG_anarchosyndicalist } remove_country_leader_trait = ARG_anarchosyndicalist }
	if = { limit = { has_country_leader_with_trait = batllista_traditionalist } remove_country_leader_trait = batllista_traditionalist }
	if = { limit = { has_country_leader_with_trait = pro_allied_politician } remove_country_leader_trait = pro_allied_politician }
	if = { limit = { has_country_leader_with_trait = the_german_connection } remove_country_leader_trait = the_german_connection }
	if = { limit = { has_country_leader_with_trait = cultural_preserver } remove_country_leader_trait = cultural_preserver }
	if = { limit = { has_country_leader_with_trait = JUNO_the_lion_of_tarapaca } remove_country_leader_trait = JUNO_the_lion_of_tarapaca }
	if = { limit = { has_country_leader_with_trait = JUNO_defender_of_araucania } remove_country_leader_trait = JUNO_defender_of_araucania }
	if = { limit = { has_country_leader_with_trait = JUNO_el_jefe } remove_country_leader_trait = JUNO_el_jefe }
	if = { limit = { has_country_leader_with_trait = JUNO_president_of_victory } remove_country_leader_trait = JUNO_president_of_victory }
	if = { limit = { has_country_leader_with_trait = JUNO_the_general_president } remove_country_leader_trait = JUNO_the_general_president }
	if = { limit = { has_country_leader_with_trait = JUNO_unpopular } remove_country_leader_trait = JUNO_unpopular }
	if = { limit = { has_country_leader_with_trait = JUNO_revolutionary_feberista_hero } remove_country_leader_trait = JUNO_revolutionary_feberista_hero }
	if = { limit = { has_country_leader_with_trait = JUNO_unpopular_economist } remove_country_leader_trait = JUNO_unpopular_economist }
	if = { limit = { has_country_leader_with_trait = JUNO_bolivian_falange } remove_country_leader_trait = JUNO_bolivian_falange }
	if = { limit = { has_country_leader_with_trait = JUNO_aligned_with_stalin } remove_country_leader_trait = JUNO_aligned_with_stalin }
	if = { limit = { has_country_leader_with_trait = reformist_menshevik } remove_country_leader_trait = reformist_menshevik }
	if = { limit = { has_country_leader_with_trait = SLO_vodca_trait } remove_country_leader_trait = SLO_vodca_trait }
	if = { limit = { has_country_leader_with_trait = BEL_belgian_inquisitor } remove_country_leader_trait = BEL_belgian_inquisitor }
	if = { limit = { has_country_leader_with_trait = BEL_determined_prime_minister } remove_country_leader_trait = BEL_determined_prime_minister }
	if = { limit = { has_country_leader_with_trait = BEL_corrupt_old_guard } remove_country_leader_trait = BEL_corrupt_old_guard }
	if = { limit = { has_country_leader_with_trait = BEL_le_patron } remove_country_leader_trait = BEL_le_patron }
	if = { limit = { has_country_leader_with_trait = ambitious_diplomat } remove_country_leader_trait = ambitious_diplomat }
	if = { limit = { has_country_leader_with_trait = LUX_grand_duchess_of_luxembourg } remove_country_leader_trait = LUX_grand_duchess_of_luxembourg }
	if = { limit = { has_country_leader_with_trait = pro_allied_governor_general } remove_country_leader_trait = pro_allied_governor_general }
	if = { limit = { has_country_leader_with_trait = pan_africanist_socialist } remove_country_leader_trait = pan_africanist_socialist }
	if = { limit = { has_country_leader_with_trait = sultan_of_sokoto } remove_country_leader_trait = sultan_of_sokoto }
	if = { limit = { has_country_leader_with_trait = trait_mwami } remove_country_leader_trait = trait_mwami }
	if = { limit = { has_country_leader_with_trait = trait_ummwami } remove_country_leader_trait = trait_ummwami }
	if = { limit = { has_country_leader_with_trait = litunga_of_the_barotse } remove_country_leader_trait = litunga_of_the_barotse }
	if = { limit = { has_country_leader_with_trait = the_rwandan_collaborstionist_king } remove_country_leader_trait = the_rwandan_collaborstionist_king }
	if = { limit = { has_country_leader_with_trait = nyim_of_kuba } remove_country_leader_trait = nyim_of_kuba }
	if = { limit = { has_country_leader_with_trait = ma_loango } remove_country_leader_trait = ma_loango }
	if = { limit = { has_country_leader_with_trait = COG_trade_unionist } remove_country_leader_trait = COG_trade_unionist }
	if = { limit = { has_country_leader_with_trait = HUN_the_regent } remove_country_leader_trait = HUN_the_regent }
	if = { limit = { has_country_leader_with_trait = HUN_the_habsburg_prince } remove_country_leader_trait = HUN_the_habsburg_prince }
	if = { limit = { has_country_leader_with_trait = HUN_socialist_bulwark } remove_country_leader_trait = HUN_socialist_bulwark }
	if = { limit = { has_country_leader_with_trait = HUN_the_hungarian_lenin } remove_country_leader_trait = HUN_the_hungarian_lenin }
	if = { limit = { has_country_leader_with_trait = HUN_ardent_stalinist } remove_country_leader_trait = HUN_ardent_stalinist }
	if = { limit = { has_country_leader_with_trait = HUN_popular_among_paramilitaries } remove_country_leader_trait = HUN_popular_among_paramilitaries }
	if = { limit = { has_country_leader_with_trait = nazi_sympathizer } remove_country_leader_trait = nazi_sympathizer }
	if = { limit = { has_country_leader_with_trait = volksgruppenfurher_der_volksbund } remove_country_leader_trait = volksgruppenfurher_der_volksbund }
	if = { limit = { has_country_leader_with_trait = marxist_philosopher } remove_country_leader_trait = marxist_philosopher }
	if = { limit = { has_country_leader_with_trait = fascist_corporatist } remove_country_leader_trait = fascist_corporatist }
	if = { limit = { has_country_leader_with_trait = AUS_abolished_austrofascism } remove_country_leader_trait = AUS_abolished_austrofascism }
	if = { limit = { has_country_leader_with_trait = AUS_younger_prince_of_liechtenstein } remove_country_leader_trait = AUS_younger_prince_of_liechtenstein }
	if = { limit = { has_country_leader_with_trait = AUS_older_prince_of_liechtenstein } remove_country_leader_trait = AUS_older_prince_of_liechtenstein }
	if = { limit = { has_country_leader_with_trait = AUS_king_of_liechtenstein } remove_country_leader_trait = AUS_king_of_liechtenstein }
	if = { limit = { has_country_leader_with_trait = GER_der_fuhrer } remove_country_leader_trait = GER_der_fuhrer }
	if = { limit = { has_country_leader_with_trait = GER_traditionalist } remove_country_leader_trait = GER_traditionalist }
	if = { limit = { has_country_leader_with_trait = GER_reich_minister_foreign_affairs_neurath } remove_country_leader_trait = GER_reich_minister_foreign_affairs_neurath }
	if = { limit = { has_country_leader_with_trait = GER_reich_minister_foreign_affairs_ribbentrop } remove_country_leader_trait = GER_reich_minister_foreign_affairs_ribbentrop }
	if = { limit = { has_country_leader_with_trait = GER_speer_fuhrer } remove_country_leader_trait = GER_speer_fuhrer }
	if = { limit = { has_country_leader_with_trait = GER_goebbels_fuhrer } remove_country_leader_trait = GER_goebbels_fuhrer }
	if = { limit = { has_country_leader_with_trait = GER_goebbels_fuhrer_no_lar } remove_country_leader_trait = GER_goebbels_fuhrer_no_lar }
	if = { limit = { has_country_leader_with_trait = GER_goring_fuhrer } remove_country_leader_trait = GER_goring_fuhrer }
	if = { limit = { has_country_leader_with_trait = GER_hess_fuhrer } remove_country_leader_trait = GER_hess_fuhrer }
	if = { limit = { has_country_leader_with_trait = GER_hess_fuhrer_no_aat } remove_country_leader_trait = GER_hess_fuhrer_no_aat }
	if = { limit = { has_country_leader_with_trait = GER_todt_fuhrer } remove_country_leader_trait = GER_todt_fuhrer }
	if = { limit = { has_country_leader_with_trait = GER_bormann_fuhrer } remove_country_leader_trait = GER_bormann_fuhrer }
	if = { limit = { has_country_leader_with_trait = GER_himmler_fuhrer_ss } remove_country_leader_trait = GER_himmler_fuhrer_ss }
	if = { limit = { has_country_leader_with_trait = GER_revolutionary_nationalist } remove_country_leader_trait = GER_revolutionary_nationalist }
	if = { limit = { has_country_leader_with_trait = GER_pragmatic_trade_unionist } remove_country_leader_trait = GER_pragmatic_trade_unionist }
	if = { limit = { has_country_leader_with_trait = GER_pragmatic_socialist } remove_country_leader_trait = GER_pragmatic_socialist }
	if = { limit = { has_country_leader_with_trait = SIL_prince_of_pless_trait } remove_country_leader_trait = SIL_prince_of_pless_trait }
	if = { limit = { has_country_leader_with_trait = CRO_poglavnik_trait } remove_country_leader_trait = CRO_poglavnik_trait }
	if = { limit = { has_country_leader_with_trait = dynasty_founder } remove_country_leader_trait = dynasty_founder }
	if = { limit = { has_country_leader_with_trait = dynastic_reformer } remove_country_leader_trait = dynastic_reformer }
	if = { limit = { has_country_leader_with_trait = legitimate_heir } remove_country_leader_trait = legitimate_heir }
	if = { limit = { has_country_leader_with_trait = devoted_communist } remove_country_leader_trait = devoted_communist }
	if = { limit = { has_country_leader_with_trait = council_communist } remove_country_leader_trait = council_communist }
	if = { limit = { has_country_leader_with_trait = renaissance_man } remove_country_leader_trait = renaissance_man }
	if = { limit = { has_country_leader_with_trait = PER_rightful_king_trait } remove_country_leader_trait = PER_rightful_king_trait }
	if = { limit = { has_country_leader_with_trait = IRQ_king_of_iraq_ghazi } remove_country_leader_trait = IRQ_king_of_iraq_ghazi }
	if = { limit = { has_country_leader_with_trait = IRQ_arab_fascist_politician } remove_country_leader_trait = IRQ_arab_fascist_politician }
	if = { limit = { has_country_leader_with_trait = IRQ_comrade_fahd } remove_country_leader_trait = IRQ_comrade_fahd }
	if = { limit = { has_country_leader_with_trait = IRQ_pro_western_iraqi_nationalist } remove_country_leader_trait = IRQ_pro_western_iraqi_nationalist }
	if = { limit = { has_country_leader_with_trait = IRQ_nationalist } remove_country_leader_trait = IRQ_nationalist }
	if = { limit = { has_country_leader_with_trait = IRQ_the_grand_mufti_esicolor } remove_country_leader_trait = IRQ_the_grand_mufti_esicolor }
	if = { limit = { has_country_leader_with_trait = hindu_nationalist } remove_country_leader_trait = hindu_nationalist }
	if = { limit = { has_country_leader_with_trait = aloof_authority } remove_country_leader_trait = aloof_authority }
	if = { limit = { has_country_leader_with_trait = seasoned_administrator } remove_country_leader_trait = seasoned_administrator }
	if = { limit = { has_country_leader_with_trait = staunch_imperialist } remove_country_leader_trait = staunch_imperialist }
	if = { limit = { has_country_leader_with_trait = anarcho_communist_council } remove_country_leader_trait = anarcho_communist_council }
	if = { limit = { has_country_leader_with_trait = father_of_pakistan } remove_country_leader_trait = father_of_pakistan }
	if = { limit = { has_country_leader_with_trait = RAJ_GOE_patron_of_education } remove_country_leader_trait = RAJ_GOE_patron_of_education }
	if = { limit = { has_country_leader_with_trait = RAJ_GOE_visionary_maharaja } remove_country_leader_trait = RAJ_GOE_visionary_maharaja }
	if = { limit = { has_country_leader_with_trait = RAJ_GOE_financial_strategist } remove_country_leader_trait = RAJ_GOE_financial_strategist }
	if = { limit = { has_country_leader_with_trait = RAJ_GOE_guardian_of_the_hills } remove_country_leader_trait = RAJ_GOE_guardian_of_the_hills }
	if = { limit = { has_country_leader_with_trait = RAJ_GOE_baluchistans_soverign } remove_country_leader_trait = RAJ_GOE_baluchistans_soverign }
	if = { limit = { has_country_leader_with_trait = RAJ_GOE_the_bengal_advocate } remove_country_leader_trait = RAJ_GOE_the_bengal_advocate }
	if = { limit = { has_country_leader_with_trait = RAJ_GOE_the_reformer_maharaja } remove_country_leader_trait = RAJ_GOE_the_reformer_maharaja }
	if = { limit = { has_country_leader_with_trait = spiritual_leader } remove_country_leader_trait = spiritual_leader }
	if = { limit = { has_country_leader_with_trait = skeptical_towards_industrialization } remove_country_leader_trait = skeptical_towards_industrialization }
	if = { limit = { has_country_leader_with_trait = AFG_popular_figurehead } remove_country_leader_trait = AFG_popular_figurehead }
	if = { limit = { has_country_leader_with_trait = AFG_continuity_pm } remove_country_leader_trait = AFG_continuity_pm }
	if = { limit = { has_country_leader_with_trait = AFG_reactionary_pm } remove_country_leader_trait = AFG_reactionary_pm }
	if = { limit = { has_country_leader_with_trait = AFG_red_prince } remove_country_leader_trait = AFG_red_prince }
	if = { limit = { has_country_leader_with_trait = AFG_general_secretary } remove_country_leader_trait = AFG_general_secretary }
	if = { limit = { has_country_leader_with_trait = konbuang_dynasty_descendant } remove_country_leader_trait = konbuang_dynasty_descendant }
	if = { limit = { has_country_leader_with_trait = burmese_way_to_socialism_trait } remove_country_leader_trait = burmese_way_to_socialism_trait }
	if = { limit = { has_country_leader_with_trait = mon_dynasty_descendant } remove_country_leader_trait = mon_dynasty_descendant }
	if = { limit = { has_country_leader_with_trait = anti_colonialist } remove_country_leader_trait = anti_colonialist }
	if = { limit = { has_country_leader_with_trait = baltic_revolutionary } remove_country_leader_trait = baltic_revolutionary }
	if = { limit = { has_country_leader_with_trait = latvian_militant } remove_country_leader_trait = latvian_militant }
	if = { limit = { has_country_leader_with_trait = democratic_crusader } remove_country_leader_trait = democratic_crusader }
	if = { limit = { has_country_leader_with_trait = LIT_king_of_lithuania } remove_country_leader_trait = LIT_king_of_lithuania }
	if = { limit = { has_country_leader_with_trait = POL_soldier_king } remove_country_leader_trait = POL_soldier_king }
	if = { limit = { has_country_leader_with_trait = POL_cossack_king } remove_country_leader_trait = POL_cossack_king }
	if = { limit = { has_country_leader_with_trait = cossack_ataman } remove_country_leader_trait = cossack_ataman }
	if = { limit = { has_country_leader_with_trait = duke_of_castro } remove_country_leader_trait = duke_of_castro }
	if = { limit = { has_country_leader_with_trait = supreme_pontiff } remove_country_leader_trait = supreme_pontiff }
	if = { limit = { has_country_leader_with_trait = grand_master_of_the_equestrian_order_of_the_holy_sepulcher_of_jerusalem } remove_country_leader_trait = grand_master_of_the_equestrian_order_of_the_holy_sepulcher_of_jerusalem }
	if = { limit = { has_country_leader_with_trait = NOR_conciliatory_socialist } remove_country_leader_trait = NOR_conciliatory_socialist }
	if = { limit = { has_country_leader_with_trait = NOR_shrewd_regent } remove_country_leader_trait = NOR_shrewd_regent }
	if = { limit = { has_country_leader_with_trait = SWE_solidified_mandate } remove_country_leader_trait = SWE_solidified_mandate }
	if = { limit = { has_country_leader_with_trait = SWE_reluctant_towards_rearmament } remove_country_leader_trait = SWE_reluctant_towards_rearmament }
	if = { limit = { has_country_leader_with_trait = SWE_support_party_in_power } remove_country_leader_trait = SWE_support_party_in_power }
	if = { limit = { has_country_leader_with_trait = SWE_rearnament_proponent } remove_country_leader_trait = SWE_rearnament_proponent }
	if = { limit = { has_country_leader_with_trait = anti_soviet_socialist } remove_country_leader_trait = anti_soviet_socialist }
	if = { limit = { has_country_leader_with_trait = national_socialist_veterinarian } remove_country_leader_trait = national_socialist_veterinarian }
	if = { limit = { has_country_leader_with_trait = FIN_stalins_puppet_kuusinen } remove_country_leader_trait = FIN_stalins_puppet_kuusinen }
	if = { limit = { has_country_leader_with_trait = committed_anti_fascist } remove_country_leader_trait = committed_anti_fascist }
	if = { limit = { has_country_leader_with_trait = committed_anti_fascist_no_lar } remove_country_leader_trait = committed_anti_fascist_no_lar }
	if = { limit = { has_country_leader_with_trait = pragmatic_socialist } remove_country_leader_trait = pragmatic_socialist }
	if = { limit = { has_country_leader_with_trait = inexperienced_socialist } remove_country_leader_trait = inexperienced_socialist }
	if = { limit = { has_country_leader_with_trait = backed_by_political_coalition } remove_country_leader_trait = backed_by_political_coalition }
	if = { limit = { has_country_leader_with_trait = JAP_chairman_of_the_jcp_trait } remove_country_leader_trait = JAP_chairman_of_the_jcp_trait }
	if = { limit = { has_country_leader_with_trait = JAP_governor_general_of_korea } remove_country_leader_trait = JAP_governor_general_of_korea }
	if = { limit = { has_country_leader_with_trait = JAP_socialist_revolutionary } remove_country_leader_trait = JAP_socialist_revolutionary }
	if = { limit = { has_country_leader_with_trait = KOR_unam } remove_country_leader_trait = KOR_unam }
	if = { limit = { has_country_leader_with_trait = KOR_suryong } remove_country_leader_trait = KOR_suryong }
	if = { limit = { has_country_leader_with_trait = KOR_highness_yi_of_changdeokgung } remove_country_leader_trait = KOR_highness_yi_of_changdeokgung }
	if = { limit = { has_country_leader_with_trait = KOR_mongyang } remove_country_leader_trait = KOR_mongyang }
	if = { limit = { has_country_leader_with_trait = MAN_japanese_puppet } remove_country_leader_trait = MAN_japanese_puppet }
	if = { limit = { has_country_leader_with_trait = MEN_borjigin_descendant } remove_country_leader_trait = MEN_borjigin_descendant }
	if = { limit = { has_country_leader_with_trait = MEN_educated_ulanqb_nobleman } remove_country_leader_trait = MEN_educated_ulanqb_nobleman }
	if = { limit = { has_country_leader_with_trait = MEN_nationalist_education_enthusiast } remove_country_leader_trait = MEN_nationalist_education_enthusiast }
	if = { limit = { has_country_leader_with_trait = SIK_communist_in_name_only } remove_country_leader_trait = SIK_communist_in_name_only }
	if = { limit = { has_country_leader_with_trait = SIK_duban } remove_country_leader_trait = SIK_duban }
	if = { limit = { has_country_leader_with_trait = KHM_padishah } remove_country_leader_trait = KHM_padishah }
	if = { limit = { has_country_leader_with_trait = KUM_wild_horse } remove_country_leader_trait = KUM_wild_horse }
	if = { limit = { has_country_leader_with_trait = XSM_devout_leader } remove_country_leader_trait = XSM_devout_leader }
	if = { limit = { has_country_leader_with_trait = NXM_king_of_ningxia } remove_country_leader_trait = NXM_king_of_ningxia }
	if = { limit = { has_country_leader_with_trait = SIC_reckless_commander } remove_country_leader_trait = SIC_reckless_commander }
	if = { limit = { has_country_leader_with_trait = XIC_young_marshall } remove_country_leader_trait = XIC_young_marshall }
	if = { limit = { has_country_leader_with_trait = SHX_model_governor } remove_country_leader_trait = SHX_model_governor }
	if = { limit = { has_country_leader_with_trait = YUN_king_of_yunnan } remove_country_leader_trait = YUN_king_of_yunnan }
	if = { limit = { has_country_leader_with_trait = GXC_fierce_leader } remove_country_leader_trait = GXC_fierce_leader }
	if = { limit = { has_country_leader_with_trait = GDC_king_of_the_southern_skies } remove_country_leader_trait = GDC_king_of_the_southern_skies }
	if = { limit = { has_country_leader_with_trait = CHI_the_northern_bastion_trait } remove_country_leader_trait = CHI_the_northern_bastion_trait }
	if = { limit = { has_country_leader_with_trait = CHI_geologist_trait } remove_country_leader_trait = CHI_geologist_trait }
	if = { limit = { has_country_leader_with_trait = CHI_leader_of_the_chinese_brotherhood_trait } remove_country_leader_trait = CHI_leader_of_the_chinese_brotherhood_trait }
	if = { limit = { has_country_leader_with_trait = CHI_generallissimo_sea } remove_country_leader_trait = CHI_generallissimo_sea }
	if = { limit = { has_country_leader_with_trait = blue_shirt_connections_0 } remove_country_leader_trait = blue_shirt_connections_0 }
	if = { limit = { has_country_leader_with_trait = PRC_the_general_secretary } remove_country_leader_trait = PRC_the_general_secretary }
	if = { limit = { has_country_leader_with_trait = PRC_de_facto_leader } remove_country_leader_trait = PRC_de_facto_leader }
	if = { limit = { has_country_leader_with_trait = MON_pan_mongolian_stalinist } remove_country_leader_trait = MON_pan_mongolian_stalinist }
	if = { limit = { has_country_leader_with_trait = TIB_tulku_trait } remove_country_leader_trait = TIB_tulku_trait }
	if = { limit = { has_country_leader_with_trait = TIB_strongman_of_tibet } remove_country_leader_trait = TIB_strongman_of_tibet }
	if = { limit = { has_country_leader_with_trait = PHI_nation_builder } remove_country_leader_trait = PHI_nation_builder }
	if = { limit = { has_country_leader_with_trait = PHI_philippine_nationalist_leader } remove_country_leader_trait = PHI_philippine_nationalist_leader }
	if = { limit = { has_country_leader_with_trait = PHI_revolutionary_president } remove_country_leader_trait = PHI_revolutionary_president }
	if = { limit = { has_country_leader_with_trait = PHI_radical_leader } remove_country_leader_trait = PHI_radical_leader }
	if = { limit = { has_country_leader_with_trait = the_dragon_king } remove_country_leader_trait = the_dragon_king }
	if = { limit = { has_country_leader_with_trait = the_dutch_nobleman } remove_country_leader_trait = the_dutch_nobleman }
	if = { limit = { has_country_leader_with_trait = expert_unifier } remove_country_leader_trait = expert_unifier }
	if = { limit = { has_country_leader_with_trait = emperor_of_the_purple_forbidden_city } remove_country_leader_trait = emperor_of_the_purple_forbidden_city }
	if = { limit = { has_country_leader_with_trait = renowned_revolutionary_poet } remove_country_leader_trait = renowned_revolutionary_poet }
	if = { limit = { has_country_leader_with_trait = the_vietnamese_third_way } remove_country_leader_trait = the_vietnamese_third_way }
	if = { limit = { has_country_leader_with_trait = king_of_luang_prabang } remove_country_leader_trait = king_of_luang_prabang }
	if = { limit = { has_country_leader_with_trait = king_father } remove_country_leader_trait = king_father }

	if = { limit = { has_country_leader_with_trait = likes_allies } remove_country_leader_trait = likes_allies }
	if = { limit = { has_country_leader_with_trait = likes_germany } remove_country_leader_trait = likes_germany }
	if = { limit = { has_country_leader_with_trait = likes_turkey } remove_country_leader_trait = likes_turkey }
	if = { limit = { has_country_leader_with_trait = dislikes_soviet } remove_country_leader_trait = dislikes_soviet }
	if = { limit = { has_country_leader_with_trait = dislikes_germany } remove_country_leader_trait = dislikes_germany }

	if = { limit = { has_country_leader_with_trait = popular_figurehead } remove_country_leader_trait = popular_figurehead }
	if = { limit = { has_country_leader_with_trait = popular_figurehead2 } remove_country_leader_trait = popular_figurehead2 }
	if = { limit = { has_country_leader_with_trait = popular_figurehead3 } remove_country_leader_trait = popular_figurehead3 }
	if = { limit = { has_country_leader_with_trait = propaganda_expert } remove_country_leader_trait = propaganda_expert }
	if = { limit = { has_country_leader_with_trait = silent_workhorse } remove_country_leader_trait = silent_workhorse }
	if = { limit = { has_country_leader_with_trait = prince_of_terror } remove_country_leader_trait = prince_of_terror }
	if = { limit = { has_country_leader_with_trait = princess_of_terror } remove_country_leader_trait = princess_of_terror }
	if = { limit = { has_country_leader_with_trait = backroom_backstabber } remove_country_leader_trait = backroom_backstabber }
	if = { limit = { has_country_leader_with_trait = editor } remove_country_leader_trait = editor }
	if = { limit = { has_country_leader_with_trait = ideological_crusader } remove_country_leader_trait = ideological_crusader }
	if = { limit = { has_country_leader_with_trait = compassionate_gentleman } remove_country_leader_trait = compassionate_gentleman }
	if = { limit = { has_country_leader_with_trait = smooth_talking_charmer } remove_country_leader_trait = smooth_talking_charmer }
	if = { limit = { has_country_leader_with_trait = financial_expert } remove_country_leader_trait = financial_expert }
	if = { limit = { has_country_leader_with_trait = economist } remove_country_leader_trait = economist }
	if = { limit = { has_country_leader_with_trait = captain_of_industry } remove_country_leader_trait = captain_of_industry }
	if = { limit = { has_country_leader_with_trait = war_industrialist } remove_country_leader_trait = war_industrialist }
	if = { limit = { has_country_leader_with_trait = fortification_engineer } remove_country_leader_trait = fortification_engineer }
	if = { limit = { has_country_leader_with_trait = quartermaster_general } remove_country_leader_trait = quartermaster_general }
	if = { limit = { has_country_leader_with_trait = armaments_organizer } remove_country_leader_trait = armaments_organizer }
	if = { limit = { has_country_leader_with_trait = head_of_intelligence } remove_country_leader_trait = head_of_intelligence }
	if = { limit = { has_country_leader_with_trait = code_breaker } remove_country_leader_trait = code_breaker }
	if = { limit = { has_country_leader_with_trait = encryption_expert } remove_country_leader_trait = encryption_expert }

	if = { limit = { has_country_leader_with_trait = military_theorist } remove_country_leader_trait = military_theorist }
	if = { limit = { has_country_leader_with_trait = blitzkrieg_theorist } remove_country_leader_trait = blitzkrieg_theorist }
	if = { limit = { has_country_leader_with_trait = grand_battle_plan_expert } remove_country_leader_trait = grand_battle_plan_expert }
	if = { limit = { has_country_leader_with_trait = mass_assault_expert } remove_country_leader_trait = mass_assault_expert }
	if = { limit = { has_country_leader_with_trait = naval_theorist } remove_country_leader_trait = naval_theorist }
	if = { limit = { has_country_leader_with_trait = naval_aviation_pioneer } remove_country_leader_trait = naval_aviation_pioneer }
	if = { limit = { has_country_leader_with_trait = air_warfare_theorist } remove_country_leader_trait = air_warfare_theorist }
	if = { limit = { has_country_leader_with_trait = nuclear_scientist } remove_country_leader_trait = nuclear_scientist }

	if = { limit = { has_country_leader_with_trait = army_chief_defensive_1 } remove_country_leader_trait = army_chief_defensive_1 }
	if = { limit = { has_country_leader_with_trait = army_chief_defensive_2 } remove_country_leader_trait = army_chief_defensive_2 }
	if = { limit = { has_country_leader_with_trait = army_chief_defensive_3 } remove_country_leader_trait = army_chief_defensive_3 }

	if = { limit = { has_country_leader_with_trait = army_chief_maneuver_1 } remove_country_leader_trait = army_chief_maneuver_1 }
	if = { limit = { has_country_leader_with_trait = army_chief_maneuver_2 } remove_country_leader_trait = army_chief_maneuver_2 }
	if = { limit = { has_country_leader_with_trait = army_chief_maneuver_3 } remove_country_leader_trait = army_chief_maneuver_3 }

	if = { limit = { has_country_leader_with_trait = army_chief_reform_1 } remove_country_leader_trait = army_chief_reform_1 }
	if = { limit = { has_country_leader_with_trait = army_chief_reform_2 } remove_country_leader_trait = army_chief_reform_2 }
	if = { limit = { has_country_leader_with_trait = army_chief_reform_3 } remove_country_leader_trait = army_chief_reform_3 }

	if = { limit = { has_country_leader_with_trait = army_chief_old_guard } remove_country_leader_trait = army_chief_old_guard }

	if = { limit = { has_country_leader_with_trait = navy_chief_decisive_battle_1 } remove_country_leader_trait = navy_chief_decisive_battle_1 }
	if = { limit = { has_country_leader_with_trait = navy_chief_decisive_battle_2 } remove_country_leader_trait = navy_chief_decisive_battle_2 }
	if = { limit = { has_country_leader_with_trait = navy_chief_decisive_battle_3 } remove_country_leader_trait = navy_chief_decisive_battle_3 }

	if = { limit = { has_country_leader_with_trait = navy_chief_maneuver_1 } remove_country_leader_trait = navy_chief_maneuver_1 }
	if = { limit = { has_country_leader_with_trait = navy_chief_maneuver_2 } remove_country_leader_trait = navy_chief_maneuver_2 }
	if = { limit = { has_country_leader_with_trait = navy_chief_maneuver_3 } remove_country_leader_trait = navy_chief_maneuver_3 }

	if = { limit = { has_country_leader_with_trait = navy_chief_commerce_raiding_1 } remove_country_leader_trait = navy_chief_commerce_raiding_1 }
	if = { limit = { has_country_leader_with_trait = navy_chief_commerce_raiding_2 } remove_country_leader_trait = navy_chief_commerce_raiding_2 }
	if = { limit = { has_country_leader_with_trait = navy_chief_commerce_raiding_3 } remove_country_leader_trait = navy_chief_commerce_raiding_3 }

	if = { limit = { has_country_leader_with_trait = air_chief_ground_support_1 } remove_country_leader_trait = air_chief_ground_support_1 }
	if = { limit = { has_country_leader_with_trait = air_chief_ground_support_2 } remove_country_leader_trait = air_chief_ground_support_2 }
	if = { limit = { has_country_leader_with_trait = air_chief_ground_support_3 } remove_country_leader_trait = air_chief_ground_support_3 }

	if = { limit = { has_country_leader_with_trait = air_chief_all_weather_1 } remove_country_leader_trait = air_chief_all_weather_1 }
	if = { limit = { has_country_leader_with_trait = air_chief_all_weather_2 } remove_country_leader_trait = air_chief_all_weather_2 }
	if = { limit = { has_country_leader_with_trait = air_chief_all_weather_3 } remove_country_leader_trait = air_chief_all_weather_3 }

	if = { limit = { has_country_leader_with_trait = air_chief_reform_1 } remove_country_leader_trait = air_chief_reform_1 }
	if = { limit = { has_country_leader_with_trait = air_chief_reform_2 } remove_country_leader_trait = air_chief_reform_2 }
	if = { limit = { has_country_leader_with_trait = air_chief_reform_3 } remove_country_leader_trait = air_chief_reform_3 }

	if = { limit = { has_country_leader_with_trait = army_infantry_1 } remove_country_leader_trait = army_infantry_1 }
	if = { limit = { has_country_leader_with_trait = army_infantry_2 } remove_country_leader_trait = army_infantry_2 }
	if = { limit = { has_country_leader_with_trait = army_infantry_3 } remove_country_leader_trait = army_infantry_3 }

	if = { limit = { has_country_leader_with_trait = army_artillery_1 } remove_country_leader_trait = army_artillery_1 }
	if = { limit = { has_country_leader_with_trait = army_artillery_2 } remove_country_leader_trait = army_artillery_2 }
	if = { limit = { has_country_leader_with_trait = army_artillery_3 } remove_country_leader_trait = army_artillery_3 }

	if = { limit = { has_country_leader_with_trait = army_cavalry_1 } remove_country_leader_trait = army_cavalry_1 }
	if = { limit = { has_country_leader_with_trait = army_cavalry_2 } remove_country_leader_trait = army_cavalry_2 }
	if = { limit = { has_country_leader_with_trait = army_cavalry_3 } remove_country_leader_trait = army_cavalry_3 }

	if = { limit = { has_country_leader_with_trait = army_armored_1 } remove_country_leader_trait = army_armored_1 }
	if = { limit = { has_country_leader_with_trait = army_armored_2 } remove_country_leader_trait = army_armored_2 }
	if = { limit = { has_country_leader_with_trait = army_armored_3 } remove_country_leader_trait = army_armored_3 }

	if = { limit = { has_country_leader_with_trait = army_commando_1 } remove_country_leader_trait = army_commando_1 }
	if = { limit = { has_country_leader_with_trait = army_commando_2 } remove_country_leader_trait = army_commando_2 }
	if = { limit = { has_country_leader_with_trait = army_commando_3 } remove_country_leader_trait = army_commando_3 }

	if = { limit = { has_country_leader_with_trait = army_regrouping_1 } remove_country_leader_trait = army_regrouping_1 }
	if = { limit = { has_country_leader_with_trait = army_regrouping_2 } remove_country_leader_trait = army_regrouping_2 }
	if = { limit = { has_country_leader_with_trait = army_regrouping_3 } remove_country_leader_trait = army_regrouping_3 }

	if = { limit = { has_country_leader_with_trait = army_logistics_1 } remove_country_leader_trait = army_logistics_1 }
	if = { limit = { has_country_leader_with_trait = army_logistics_2 } remove_country_leader_trait = army_logistics_2 }
	if = { limit = { has_country_leader_with_trait = army_logistics_3 } remove_country_leader_trait = army_logistics_3 }

	if = { limit = { has_country_leader_with_trait = army_radio_intelligence_1 } remove_country_leader_trait = army_radio_intelligence_1 }
	if = { limit = { has_country_leader_with_trait = army_radio_intelligence_2 } remove_country_leader_trait = army_radio_intelligence_2 }
	if = { limit = { has_country_leader_with_trait = army_radio_intelligence_3 } remove_country_leader_trait = army_radio_intelligence_3 }

	if = { limit = { has_country_leader_with_trait = army_jungle_warfare_1 } remove_country_leader_trait = army_jungle_warfare_1 }
	if = { limit = { has_country_leader_with_trait = army_jungle_warfare_2 } remove_country_leader_trait = army_jungle_warfare_2 }
	if = { limit = { has_country_leader_with_trait = army_jungle_warfare_3 } remove_country_leader_trait = army_jungle_warfare_3 }

	if = { limit = { has_country_leader_with_trait = navy_naval_air_defense_1 } remove_country_leader_trait = navy_naval_air_defense_1 }
	if = { limit = { has_country_leader_with_trait = navy_naval_air_defense_2 } remove_country_leader_trait = navy_naval_air_defense_2 }
	if = { limit = { has_country_leader_with_trait = navy_naval_air_defense_3 } remove_country_leader_trait = navy_naval_air_defense_3 }

	if = { limit = { has_country_leader_with_trait = navy_submarine_1 } remove_country_leader_trait = navy_submarine_1 }
	if = { limit = { has_country_leader_with_trait = navy_submarine_2 } remove_country_leader_trait = navy_submarine_2 }
	if = { limit = { has_country_leader_with_trait = navy_submarine_3 } remove_country_leader_trait = navy_submarine_3 }

	if = { limit = { has_country_leader_with_trait = navy_anti_submarine_1 } remove_country_leader_trait = navy_anti_submarine_1 }
	if = { limit = { has_country_leader_with_trait = navy_anti_submarine_2 } remove_country_leader_trait = navy_anti_submarine_2 }
	if = { limit = { has_country_leader_with_trait = navy_anti_submarine_3 } remove_country_leader_trait = navy_anti_submarine_3 }

	if = { limit = { has_country_leader_with_trait = navy_screen_1 } remove_country_leader_trait = navy_screen_1 }
	if = { limit = { has_country_leader_with_trait = navy_screen_2 } remove_country_leader_trait = navy_screen_2 }
	if = { limit = { has_country_leader_with_trait = navy_screen_3 } remove_country_leader_trait = navy_screen_3 }

	if = { limit = { has_country_leader_with_trait = navy_capital_ship_1 } remove_country_leader_trait = navy_capital_ship_1 }
	if = { limit = { has_country_leader_with_trait = navy_capital_ship_2 } remove_country_leader_trait = navy_capital_ship_2 }
	if = { limit = { has_country_leader_with_trait = navy_capital_ship_3 } remove_country_leader_trait = navy_capital_ship_3 }

	if = { limit = { has_country_leader_with_trait = navy_carrier_1 } remove_country_leader_trait = navy_carrier_1 }
	if = { limit = { has_country_leader_with_trait = navy_carrier_2 } remove_country_leader_trait = navy_carrier_2 }
	if = { limit = { has_country_leader_with_trait = navy_carrier_3 } remove_country_leader_trait = navy_carrier_3 }

	if = { limit = { has_country_leader_with_trait = air_air_superiority_1 } remove_country_leader_trait = air_air_superiority_1 }
	if = { limit = { has_country_leader_with_trait = air_air_superiority_2 } remove_country_leader_trait = air_air_superiority_2 }
	if = { limit = { has_country_leader_with_trait = air_air_superiority_3 } remove_country_leader_trait = air_air_superiority_3 }

	if = { limit = { has_country_leader_with_trait = air_airborne_1 } remove_country_leader_trait = air_airborne_1 }
	if = { limit = { has_country_leader_with_trait = air_airborne_2 } remove_country_leader_trait = air_airborne_2 }
	if = { limit = { has_country_leader_with_trait = air_airborne_3 } remove_country_leader_trait = air_airborne_3 }
}

clear_province_modifiers = {
	every_state = {
		#remove_province_modifier = { 
		#	static_modifiers = { dense_rural_infrastructure }
		#
		#	province = { all_provinces = yes }
		#}
		if = { limit = { has_dynamic_modifier = { modifier = FRA_maginot_line_dynamic_modifier } } remove_dynamic_modifier = { modifier = FRA_maginot_line_dynamic_modifier } }
		if = { limit = { has_dynamic_modifier = { modifier = ETH_state_development_dynamic_modifier } } remove_dynamic_modifier = { modifier = ETH_state_development_dynamic_modifier } }
		if = { limit = { has_dynamic_modifier = { modifier = ETH_state_decentralization_dynamic_modifier } } remove_dynamic_modifier = { modifier = ETH_state_decentralization_dynamic_modifier } }
		if = { limit = { has_dynamic_modifier = { modifier = dense_rural_infrastructure } } remove_dynamic_modifier = { modifier = dense_rural_infrastructure } }
		if = { limit = { has_dynamic_modifier = { modifier = COG_rwandan_separatism_modifier } } remove_dynamic_modifier = { modifier = COG_rwandan_separatism_modifier } }
		if = { limit = { has_dynamic_modifier = { modifier = COG_burundian_separatism_modifier } } remove_dynamic_modifier = { modifier = COG_burundian_separatism_modifier } }
		if = { limit = { has_dynamic_modifier = { modifier = COG_state_loyal_to_belgium_modifier } } remove_dynamic_modifier = { modifier = COG_state_loyal_to_belgium_modifier } }
		if = { limit = { has_dynamic_modifier = { modifier = COG_state_loyal_to_free_congo_modifier } } remove_dynamic_modifier = { modifier = COG_state_loyal_to_free_congo_modifier } }
		if = { limit = { has_dynamic_modifier = { modifier = BRA_neglected_state_dynamic_modifier } } remove_dynamic_modifier = { modifier = BRA_neglected_state_dynamic_modifier } }
		if = { limit = { has_dynamic_modifier = { modifier = idea_PAR_river_navy } } remove_dynamic_modifier = { modifier = idea_PAR_river_navy } }
		if = { limit = { has_dynamic_modifier = { modifier = CHI_shanghai_international_settlement } } remove_dynamic_modifier = { modifier = CHI_shanghai_international_settlement } }
	}
}

add_province_modifiers = {
	28 = { add_dynamic_modifier = { modifier = FRA_maginot_line_dynamic_modifier } } #Alsase-Lorainne

	every_state = {
		limit = {
			var:original_owner = {
				OR = {
					state_originally_from_ETH = yes
					state_originally_from_AFA = yes
				}
			}
		}

		add_dynamic_modifier = { modifier = ETH_state_development_dynamic_modifier }
	}

	every_state = {
		limit = {
			var:original_owner = {
				state_originally_from_BRA = yes
			}
			OR = {
				has_state_category = wasteland
				has_state_category = pastoral
				has_state_category = rural
				#TODO_JUNO: Check states below are correct after map changes implemented
				state = 498
				state = 499
			}
			NOT = {
				state = 961
				state = 962
				state = 963
				state = 964
				state = 965
				state = 966
				state = 967
				state = 968
				state = 496
			}
		}

		# Neglected State Modifier
		set_variable = { BRA_state_development_production_speed = -0.4 }
		set_variable = { BRA_state_development_local_building_slots_factor = -0.4 }
		set_variable = { BRA_state_development_local_factories = -0.4 }
		set_variable = { BRA_state_development_state_resources_factor = -0.4 }

		add_dynamic_modifier = { modifier = BRA_neglected_state_dynamic_modifier }
	}

	every_state = {
		limit = { var:original_owner = { state_originally_from_PAR = yes } }

		add_dynamic_modifier = { modifier = idea_PAR_river_navy }
	}

	640 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Mandalay
	432 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Assam
	427 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Hyderabad
	436 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Jabalpur
	437 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Indore
	433 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Rajahsthan

	600 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Jiangxi
	749 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Huangshan
	606 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Anhui
	607 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Henan
	620 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Hubei
	602 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Hunan
	750 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Changde
	744 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Xian
	605 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Sichuan
	748 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Zunyi
	603 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Guizhu
	615 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Shanxi
	622 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Shaanxi
	325 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Yunnan
	325 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Dali
	1032 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Yanan
	283 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Gansu
	753 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Gannan
	599 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Guangxi
	1045 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Guyuan
	616 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Ningxia
	1044 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Wuwei

	323 = { add_dynamic_modifier = { modifier = dense_rural_infrastructure } } #Nepal

	613 = { add_dynamic_modifier = { modifier = CHI_shanghai_international_settlement } } #Shanghai
}

setup_strat_regions_game = {
	for_loop_effect = {
		start = 1
		end = 299
		value = i

		meta_effect = {
			text = {
				random_state = {
					limit = {
						THIS.owner = {
							OR = {
								has_global_flag = region_setup_players_checked
								is_ai = no
							}
							NOT = { original_tag = OOO }
						}
						region = [REGION]
					}
					every_state = {
						limit = {
							NOT = { state = PREV }
							region = [REGION]
						}
			
						PREV.owner = { transfer_state = PREV }
						add_core_of = PREV.owner
					}
					THIS.owner = { set_cosmetic_tag = region_[REGION] }
				}
			}
			REGION = "[?i]"
		}
	}
}

clear_formable_flags = {
	clr_global_flag = formables_disabled
	clr_global_flag = formables_visual
	clr_global_flag = formables_give_core

	set_variable = { global.formables_cost_25 = 25 }
	set_variable = { global.formables_cost_50 = 50 }
	set_variable = { global.formables_cost_100 = 100 }
	set_variable = { global.formables_cost_150 = 150 }
	set_variable = { global.formables_cost_200 = 200 }
	set_variable = { global.formables_cost_300 = 300 }
}

give_original_conscription_law = {
	if = {
		limit = { original_country_has_disarmed_nation = yes }

		add_ideas = disarmed_nation
	}
	else_if = {
		limit = { original_country_has_volunteer_only = yes }

		add_ideas = volunteer_only
	}
	else_if = {
		limit = { original_country_has_limited_conscription = yes }

		add_ideas = limited_conscription
	}
	else_if = {
		limit = { original_country_has_service_by_requirement = yes }

		add_ideas = service_by_requirement
	}
}

give_random_conscription_law = {
	random_list = {
		seed = random
		5 = {
			modifier = {
				factor = 0

				check_variable = { global.setup_conscription_law_min > 0 }
			}
			add_ideas = disarmed_nation
		}
		67 = {
			modifier = {
				factor = 0

				OR = {
					check_variable = { global.setup_conscription_law_min > 1 }
					check_variable = { global.setup_conscription_law_max < 1 }
				}
			}
			add_ideas = volunteer_only
		}
		12 = {
			modifier = {
				factor = 0

				OR = {
					check_variable = { global.setup_conscription_law_min > 2 }
					check_variable = { global.setup_conscription_law_max < 2 }
				}
			}
			add_ideas = limited_conscription
		}
		2 = {
			modifier = {
				factor = 0

				OR = {
					check_variable = { global.setup_conscription_law_min > 3 }
					check_variable = { global.setup_conscription_law_max < 3 }
				}
			}
			add_ideas = extensive_conscription
		}
		0 = {
			modifier = {
				add = 2

				check_variable = { global.setup_conscription_law_min < 5 }
				check_variable = { global.setup_conscription_law_max > 3 }
			}
			add_ideas = service_by_requirement
		}
		0 = {
			modifier = {
				add = 1

				check_variable = { global.setup_conscription_law_min < 6 }
				check_variable = { global.setup_conscription_law_max > 4 }
			}
			add_ideas = all_adults_serve
		}
		0 = {
			modifier = {
				add = 1

				check_variable = { global.setup_conscription_law_max > 5 }
			}
			add_ideas = scrapping_the_barrel
		}
	}
}

give_original_trade_law = {
	if = {
		limit = { original_country_has_closed_economy = yes }

		add_ideas = closed_economy
	}
	else_if = {
		limit = { original_country_has_limited_exports = yes }

		add_ideas = limited_exports
	}
	else_if = {
		limit = { original_country_has_export_focus = yes }

		add_ideas = export_focus
	}
	else_if = {
		limit = { original_country_has_free_trade = yes }

		add_ideas = free_trade
	}
}

give_random_trade_law = {
	random_list = {
		seed = random
		1 = {
			modifier = {
				factor = 0

				check_variable = { global.setup_trade_law_min > 0 }
			}
			add_ideas = closed_economy
		}
		4 = {
			modifier = {
				factor = 0

				OR = {
					check_variable = { global.setup_trade_law_min > 1 }
					check_variable = { global.setup_trade_law_max < 1 }
				}
			}
			add_ideas = limited_exports
		}
		79 = {
			modifier = {
				factor = 0

				OR = {
					check_variable = { global.setup_trade_law_min > 2 }
					check_variable = { global.setup_trade_law_max < 2 }
				}
			}
			add_ideas = export_focus
		}
		2 = {
			modifier = {
				factor = 0

				check_variable = { global.setup_trade_law_max < 3 }
			}
			add_ideas = free_trade
		}
	}
}

give_original_economic_law = {
	if = {
		limit = { original_country_has_undisturbed_isolation = yes }

		add_ideas = undisturbed_isolation
	}
	else_if = {
		limit = { original_country_has_civilian_economy = yes }

		add_ideas = civilian_economy
	}
	else_if = {
		limit = { original_country_has_partial_mobilization = yes }

		add_ideas = partial_economic_mobilisation
	}
}

give_random_economic_law = {
	random_list = {
		seed = random
		2 = {
			modifier = {
				factor = 0

				check_variable = { global.setup_economic_law_min > 0 }
			}
			add_ideas = undisturbed_isolation
		}
		0 = {
			modifier = {
				add = 1

				OR = {
					check_variable = { global.setup_economic_law_min = 1 }
					check_variable = { global.setup_economic_law_max = 1 }
				}
			}
			add_ideas = isolation
		}
		100 = {
			modifier = {
				factor = 0

				OR = {
					check_variable = { global.setup_economic_law_min > 2 }
					check_variable = { global.setup_economic_law_max < 2 }
				}
			}
			add_ideas = civilian_economy
		}
		7 = {
			modifier = {
				factor = 0

				OR = {
					check_variable = { global.setup_economic_law_min > 3 }
					check_variable = { global.setup_economic_law_max < 3 }
				}
			}
			add_ideas = low_economic_mobilisation
		}
		10 = {
			modifier = {
				factor = 0

				OR = {
					check_variable = { global.setup_economic_law_min > 4 }
					check_variable = { global.setup_economic_law_max < 4 }
				}
			}
			add_ideas = partial_economic_mobilisation
		}
		1 = {
			modifier = {
				factor = 0

				OR = {
					check_variable = { global.setup_economic_law_min > 5 }
					check_variable = { global.setup_economic_law_max < 5 }
				}
			}
			add_ideas = war_economy
		}
		0 = {
			modifier = {
				add = 1

				check_variable = { global.setup_economic_law_max > 6 }
			}
			add_ideas = tot_economic_mobilisation
		}
	}
}

give_original_research_slots = {
	if = {
		limit = { original_country_has_two_research_slot = yes }

		set_research_slots = 2
	}
	else_if = {
		limit = { original_country_has_three_research_slot = yes }

		set_research_slots = 3
	}
	else_if = {
		limit = { original_country_has_four_research_slot = yes }

		set_research_slots = 4
	}
}

randomise_research_slots = {
	random_list = {
		seed = random
		0 = {
			modifier = {
				add = 1

				check_variable = { global.setup_research_slots_min < 2 }
			}
			set_research_slots = 1
		}
		56 = {
			modifier = {
				factor = 0

				OR = {
					check_variable = { global.setup_research_slots_min > 2 }
					check_variable = { global.setup_research_slots_max < 2 }
				}
			}
			set_research_slots = 2
		}
		25 = {
			modifier = {
				factor = 0

				OR = {
					check_variable = { global.setup_research_slots_min > 3 }
					check_variable = { global.setup_research_slots_max < 3 }
				}
			}
			set_research_slots = 3
		}
		5 = {
			modifier = {
				factor = 0

				OR = {
					check_variable = { global.setup_research_slots_min > 4 }
					check_variable = { global.setup_research_slots_max < 4 }
				}
			}
			set_research_slots = 4
		}
		0 = {
			modifier = {
				add = 1

				check_variable = { global.setup_research_slots_max > 4 }
			}
			set_research_slots = 5
		}
	}
}

randomise_starting_army_type = {
	random_list = {
		seed = random
		20 = {
			adjust_default_template_size = yes
		}
		20 = {
			change_default_template_to_militia = yes
		}
		20 = {
			change_default_template_to_irregulars = yes
		}
		20 = {
			change_default_template_to_cavalry = yes
		}
		#20 = {
		#	change_default_template_to_bicycle = yes
		#}
	}
}

calculate_template_size_variables = {
	set_variable = { min_minus_one = global.setup_starting_army_size_min }
	subtract_from_variable = { min_minus_one = 1 }
	set_variable_to_random = {
		var = divisionstoadd
		min = min_minus_one
		max = global.setup_starting_army_size_max
		integer = yes
	}

	set_variable = { max_column = divisionstoadd }
	divide_variable = { max_column = 5 }
	subtract_from_variable = { max_column = 0.5 }
	round_variable = max_column
}
adjust_default_template_size = {
	calculate_template_size_variables = yes
	set_variable = { divisionstoaddstart = divisionstoadd }

	for_loop_effect = {
		start = 0
		end = max_column
		compare = less_than_or_equals
		value = current_column

		for_loop_effect = {
			start = 0
			end = 4
			compare = less_than_or_equals
			value = current_row

			if = {
				limit = { check_variable = { divisionstoadd < 1 } }

				set_temp_variable = { break = 1 }
			}

			if = {
				limit = {
					AND = {
						check_variable = { current_column = 0 }
						check_variable = { current_row = 0 }
					}
				}
			}
			else = {
				meta_effect = {
					text = {
						add_units_to_division_template = {
							template_name = "Infantry Brigade"
							regiments = {
								infantry = [COLUMN]
							}
						}
					}
					COLUMN = "[?current_column]"
				}

				subtract_from_variable = { divisionstoadd = 1 }
			}
		}
	}

	if = {
		limit = { check_variable = { divisionstoaddstart > 0 } } # Don't respawn the division if we didn't add anything.

		delete_units = { division_template = "Infantry Brigade" }
		capital_scope = {
			create_unit = {
				division = "division_template = \"Infantry Brigade\""
				owner = PREV
			}
			teleport_created_units_out_of_lakes = yes
		}
	}
}
change_default_template_to_militia = {
	set_technology = { 
		militia_tech = 1
	}
	delete_unit_template_and_units = { division_template = "Infantry Brigade" }
	division_template = {
		name = "Militia Brigade"
		regiments = {
			militia = { x = 0 y = 0 }
		}
	}

	calculate_template_size_variables = yes

	for_loop_effect = {
		start = 0
		end = max_column
		compare = less_than_or_equals
		value = current_column

		for_loop_effect = {
			start = 0
			end = 4
			compare = less_than_or_equals
			value = current_row

			if = {
				limit = { check_variable = { divisionstoadd < 1 } }

				set_temp_variable = { break = 1 }
			}

			if = {
				limit = {
					AND = {
						check_variable = { current_column = 0 }
						check_variable = { current_row = 0 }
					}
				}
			}
			else = {
				meta_effect = {
					text = {
						add_units_to_division_template = {
							template_name = "Militia Brigade"
							regiments = {
								militia = [COLUMN]
							}
						}
					}
					COLUMN = "[?current_column]"
				}

				subtract_from_variable = { divisionstoadd = 1 }
			}
		}
	}

	capital_scope = {
		create_unit = {
			division = "division_template = \"Militia Brigade\""
			owner = PREV
		}
		teleport_created_units_out_of_lakes = yes
	}
}
change_default_template_to_irregulars = {
	set_technology = { 
		irregular_infantry = 1
	}
	delete_unit_template_and_units = { division_template = "Infantry Brigade" }
	division_template = {
		name = "Irregular Infantry Brigade"
		regiments = {
			irregular_infantry = { x = 0 y = 0 }
		}
	}

	calculate_template_size_variables = yes

	for_loop_effect = {
		start = 0
		end = max_column
		compare = less_than_or_equals
		value = current_column

		for_loop_effect = {
			start = 0
			end = 4
			compare = less_than_or_equals
			value = current_row

			if = {
				limit = { check_variable = { divisionstoadd < 1 } }

				set_temp_variable = { break = 1 }
			}

			if = {
				limit = {
					AND = {
						check_variable = { current_column = 0 }
						check_variable = { current_row = 0 }
					}
				}
			}
			else = {
				meta_effect = {
					text = {
						add_units_to_division_template = {
							template_name = "Irregular Infantry Brigade"
							regiments = {
								irregular_infantry = [COLUMN]
							}
						}
					}
					COLUMN = "[?current_column]"
				}

				subtract_from_variable = { divisionstoadd = 1 }
			}
		}
	}

	capital_scope = {
		create_unit = {
			division = "division_template = \"Irregular Infantry Brigade\""
			owner = PREV
		}
		teleport_created_units_out_of_lakes = yes
	}
}
change_default_template_to_cavalry = {
	delete_unit_template_and_units = { division_template = "Infantry Brigade" }
	division_template = {
		name = "Cavalry Brigade"
		regiments = {
			cavalry = { x = 0 y = 0 }
		}
	}

	calculate_template_size_variables = yes

	for_loop_effect = {
		start = 0
		end = max_column
		compare = less_than_or_equals
		value = current_column

		for_loop_effect = {
			start = 0
			end = 4
			compare = less_than_or_equals
			value = current_row

			if = {
				limit = { check_variable = { divisionstoadd < 1 } }

				set_temp_variable = { break = 1 }
			}

			if = {
				limit = {
					AND = {
						check_variable = { current_column = 0 }
						check_variable = { current_row = 0 }
					}
				}
			}
			else = {
				meta_effect = {
					text = {
						add_units_to_division_template = {
							template_name = "Cavalry Brigade"
							regiments = {
								cavalry = [COLUMN]
							}
						}
					}
					COLUMN = "[?current_column]"
				}

				subtract_from_variable = { divisionstoadd = 1 }
			}
		}
	}

	capital_scope = {
		create_unit = {
			division = "division_template = \"Cavalry Brigade\""
			owner = PREV
		}
		teleport_created_units_out_of_lakes = yes
	}
}
change_default_template_to_bicycle = {
	set_technology = { 
		bicycle_infantry = 1
	}
	delete_unit_template_and_units = { division_template = "Infantry Brigade" }
	division_template = {
		name = "Bicycle Brigade"
		regiments = {
			bicycle_battalion = { x = 0 y = 0 }
		}
	}

	calculate_template_size_variables = yes

	for_loop_effect = {
		start = 0
		end = max_column
		compare = less_than_or_equals
		value = current_column

		for_loop_effect = {
			start = 0
			end = 4
			compare = less_than_or_equals
			value = current_row

			if = {
				limit = { check_variable = { divisionstoadd < 1 } }

				set_temp_variable = { break = 1 }
			}

			if = {
				limit = {
					AND = {
						check_variable = { current_column = 0 }
						check_variable = { current_row = 0 }
					}
				}
			}
			else = {
				meta_effect = {
					text = {
						add_units_to_division_template = {
							template_name = "Bicycle Brigade"
							regiments = {
								bicycle_battalion = [COLUMN]
							}
						}
					}
					COLUMN = "[?current_column]"
				}

				subtract_from_variable = { divisionstoadd = 1 }
			}
		}
	}

	capital_scope = {
		create_unit = {
			division = "division_template = \"Bicycle Brigade\""
			owner = PREV
		}
		teleport_created_units_out_of_lakes = yes
	}
}
teleport_created_units_out_of_lakes = {
	if = {
		limit = { state = 870 }

		teleport_armies = {
			limit = { original_tag = BFO }

			to_province = 2201
		}
	}
}

delete_default_template = {
	every_country = {
		limit = {
			OR = {
				check_variable = { global.setup_starting_army < 0 }
				num_divisions > 1
			}
		}

		if = {
			limit = { has_template = "Infantry Brigade 2" } # Liberian OOB has a template called Infantry Brigade, remove the correct one.

			delete_unit_template_and_units = { division_template = "Infantry Brigade 2" }
		}
		else = {
			delete_unit_template_and_units = { division_template = "Infantry Brigade" }
		}
		delete_unit_template_and_units = { division_template = "Militia Brigade" }
		delete_unit_template_and_units = { division_template = "Irregular Infantry Brigade" }
		if = {
			limit = { has_template = "Cavalry Brigade 2" } # British OOB has a template called Infantry Brigade, remove the correct one.

			delete_unit_template_and_units = { division_template = "Cavalry Brigade 2" }
		}
		else = {
			delete_unit_template_and_units = { division_template = "Cavalry Brigade" }
		}
		delete_unit_template_and_units = { division_template = "Bicycle Brigade" }
	}
}
spawn_basegame_divisions = {
	every_country = {
		if = {
			limit = { state_originally_from_AFA = yes }

			load_oob = AFA_1936
		}
		else_if = {
			limit = { state_originally_from_AFG = yes }

			if = {
				limit = { has_dlc = "No Step Back" }

				load_oob = AFG_1936_nsb
			}
			else = {
				load_oob = AFG_1936
			}
		}
		else_if = {
			limit = { state_originally_from_ALB = yes }

			load_oob = ALB_1936
		}
		else_if = {
			limit = { state_originally_from_ARG = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = ARG_1939
			}
			else = {
				load_oob = ARG_1936
			}

			if = {
				limit = { NOT = { has_tech = tech_mountaineers } }

				division_template = {
					name = "Brigada 'Montaa'"
					division_names_group = SPAN_MNT_02

					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
					}
				}

				every_country_division = {
					limit = { division_has_battalion_in_template = mountaineers }

					change_division_template = { division_template = "Brigada 'Montaa'" }
				}
				delete_unit_template_and_units = { division_template = "Brigada Montaa" }
			}
		}
		else_if = {
			limit = { state_originally_from_AST = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = AST_1939
			}
			else = {
				load_oob = AST_1936
			}
		}
		else_if = {
			limit = { state_originally_from_AUS = yes }

			load_oob = AUS_ww_1936

			if = {
				limit = { NOT = { has_tech = tech_mountaineers } }

				division_template = {
					name = "'Alpenjger' Division"
					division_names_group = AUS_MNT_01

					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
					}
				}
				if = {
					limit = { has_tech = tech_engineers }

					add_units_to_division_template = {
						template_name = "'Alpenjger' Division"

						support = {
							engineer = 0
						}
					}
				}
				if = {
					limit = { has_tech = tech_recon }

					add_units_to_division_template = {
						template_name = "'Alpenjger' Division"

						support = {
							recon = 0
						}
					}
				}

				every_country_division = {
					limit = { division_has_battalion_in_template = mountaineers }

					change_division_template = { division_template = "'Alpenjger' Division" }
				}
				delete_unit_template_and_units = { division_template = "Alpenjger Division" }
			}
		}
		else_if = {
			limit = { state_originally_from_BEL = yes }

			if = {
				limit = { has_dlc = "La Resistance" }

				if = {
					limit = {
						has_dlc = "No Compromise, No Surrender"
						has_tech = rangers_tech
					}

					load_oob = BEL_WW_1936_lar_ncns
				}
				else = {
					load_oob = BEL_WW_1936_lar
				}
			}
			else = {
				if = {
					limit = {
						has_dlc = "No Compromise, No Surrender"
						has_tech = rangers_tech
					}

					load_oob = BEL_WW_1936_ncns
				}
				else = {
					load_oob = BEL_WW_1936
				}
			}

			if = {
				limit = {
					NOT = {
						has_tech = tech_mountaineers
						has_tech = rangers_tech
					}
				}

				division_template = {
					name = "'Chasseurs' Ardennais"
					division_names_group = BEL_Mnt_01
					template_counter = 93

					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 0 y = 3 }
					}
				}
				if = {
					limit = {
						OR = {
							AND = {
								has_tech = gwtank_chassis
								has_tech = interwar_antitank
							}
							has_tech = basic_light_td
						}
					}

					add_units_to_division_template = {
						template_name = "'Chasseurs' Ardennais"

						regiments = {
							light_tank_destroyer_brigade = 1
						}
					}
				}
				if = {
					limit = { has_tech = tech_recon }

					add_units_to_division_template = {
						template_name = "'Chasseurs' Ardennais"

						support = {
							recon = 0
						}
					}
				}
				if = {
					limit = { has_tech = gw_artillery }

					add_units_to_division_template = {
						template_name = "'Chasseurs' Ardennais"

						support = {
							artillery = 0
						}
					}
				}

				every_country_division = {
					limit = {
						OR = {
							division_has_battalion_in_template = mountaineers
							division_has_battalion_in_template = ranger_battalion
						}
					}

					change_division_template = { division_template = "'Chasseurs' Ardennais" }
				}
				delete_unit_template_and_units = { division_template = "Chasseurs Ardennais" }
			}

			delete_unit_template_and_units = { division_template = "Force Publique" } # Appears as a colonial division from your own country, delete it.
		}
		else_if = {
			limit = { state_originally_from_BHU = yes }

			load_oob = BHU_1936
		}
		else_if = {
			limit = { state_originally_from_BOL = yes }

			load_oob = BOL_1936
		}
		else_if = {
			limit = { state_originally_from_BRA = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = BRA_1939
			}
			else = {
				load_oob = BRA_1936
			}
		}
		else_if = {
			limit = { state_originally_from_BRM = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = BRM_1939
			}
			else = {
				load_oob = BRM_1936
			}
		}
		else_if = {
			limit = { state_originally_from_BUL = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				if = {
					limit = { has_dlc = "No Step Back" }

					load_oob = BUL_1939_nsb
				}
				else = {
					load_oob = BUL_1939
				}
			}
			else = {
				load_oob = BUL_1936
			}
		}
		else_if = {
			limit = { state_originally_from_CAN = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = CAN_1939
			}
			else = {
				if = {
					limit = { has_dlc = "No Step Back" }

					load_oob = CAN_1936_nsb
				}
				else = {
					load_oob = CAN_1936
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					state_originally_from_CHI = yes
					original_tag = FAE
				}
			}

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = CHI_1939_sea
			}
			else = {
				load_oob = CHI_1936_sea
			}
		}
		else_if = {
			limit = { state_originally_from_CHL = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = CHL_TOA_1939
			}
			else = {
				load_oob = CHL_TOA_1936
			}
		}
		else_if = {
			limit = { state_originally_from_COG = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = COG_1939
			}
			else = {
				load_oob = COG_1936
			}

			if = {
				limit = { original_tag = ZYS }

				create_unit = {
					division = "name = \"1. Groupes de Force Publique du Congo Belge\" division_template = \"Force Publique\" start_experience_factor = 0.1 start_equipment_factor = 0.6"
					owner = ZYS
					prioritize_location = 5117 # Leopoldville
				}
				create_unit = {
					division = "name = \"2. Groupes de Force Publique du Congo Belge\" division_template = \"Force Publique\" start_experience_factor = 0.1 start_equipment_factor = 0.4"
					owner = ZYS
					prioritize_location = 10968 # Fort de Shinakasa
				}
			}
		}
		else_if = {
			limit = { state_originally_from_COL = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = COL_1939
			}
			else = {
				load_oob = COL_1936
			}
		}
		else_if = {
			limit = { state_originally_from_COS = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = COS_1939
			}
			else = {
				load_oob = COS_1936
			}
		}
		else_if = {
			limit = { state_originally_from_CUB = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = CUB_1939
			}
			else = {
				load_oob = CUB_1936
			}
		}
		else_if = {
			limit = { state_originally_from_CZE = yes }

			if = {
				limit = { has_dlc = "No Step Back" }

				load_oob = CZE_1936_nsb
			}
			else = {
				load_oob = CZE_1936
			}

			if = {
				limit = { NOT = { has_tech = tech_mountaineers } }

				every_country_division = {
					limit = { division_has_battalion_in_template = mountaineers }

					change_division_template = { division_template = "P divize" }
				}
				delete_unit_template_and_units = { division_template = "Horsk divize" }
			}
		}
		else_if = {
			limit = { state_originally_from_DEN = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = DEN_1939
			}
			else = {
				load_oob = DEN_1936
			}
		}
		else_if = {
			limit = { state_originally_from_DOM = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = DOM_1939
			}
			else = {
				load_oob = DOM_1936
			}
		}
		else_if = {
			limit = { state_originally_from_ECU = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = ECU_1939
			}
			else = {
				load_oob = ECU_1936
			}
		}
		else_if = {
			limit = { state_originally_from_ELS = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = ELS_1939
			}
			else = {
				load_oob = ELS_1936
			}
		}
		else_if = {
			limit = {
				OR = {
					state_originally_from_UKD = yes
					state_originally_from_MLT = yes
					state_originally_from_PAL = yes
					AND = {
						has_tech = armored_car1
						state_originally_from_JOR = yes
					}
					state_originally_from_EGY = yes
					state_originally_from_SUD = yes
					state_originally_from_KEN = yes
					state_originally_from_TZN = yes
					state_originally_from_NGA = yes
					state_originally_from_GHA = yes
					state_originally_from_SRL = yes
					original_tag = IIB
				}
			}

			load_ENG_oob = yes
		}
		else_if = {
			limit = { state_originally_from_EST = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = EST_1939
			}
			else = {
				load_oob = EST_1936
			}
		}
		else_if = {
			limit = { state_originally_from_ETH = yes }

			load_oob = ETH_1936_bba

			set_division_template_lock = {
				division_template = "Kebur Zabagna"
				is_locked = no
			}
			set_division_template_lock = {
				division_template = "Chitet Sefari"
				is_locked = no
			}
			clear_division_template_cap = {
				division_template = "Chitet Sefari"
			}

			if = {
				limit = { NOT = { has_tech = tech_mountaineers } }

				every_country_division = {
					limit = { division_has_battalion_in_template = mountaineers }

					change_division_template = { division_template = "Mehal Sefari" }
				}
				delete_unit_template_and_units = { division_template = "Mountain Division" }
			}
		}
		else_if = {
			limit = { state_originally_from_FIN = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = FIN_1939
			}
			else = {
				load_oob = FIN_1936
			}
		}
		else_if = {
			limit = {
				OR = {
					state_originally_from_FRA = yes
					state_originally_from_LEB = yes
					state_originally_from_TUN = yes
					state_originally_from_ALG = yes
					state_originally_from_SEN = yes
					state_originally_from_GAB = yes
					state_originally_from_MAD = yes
					state_originally_from_VIN = yes
					state_originally_from_CAM = yes
				}
			}

			load_FRA_oob = yes
		}
		else_if = {
			limit = { state_originally_from_GDC = yes }

			if = {
				limit = { original_tag = EZL }

				load_ENG_oob = yes
			}
			else = {
				load_oob = GDC_1936_sea
			}
		}
		else_if = {
			limit = {
				state_originally_from_GER = yes
				OR = {
					has_start_date > 1939.1.1
					NOT = { original_tag = IBB }
				}
			}

			if = {
				limit = { has_start_date > 1939.1.1 }

				if = {
					limit = { has_dlc = "No Step Back" }

					load_oob = GER_1939_nsb
				}
				else = {
					load_oob = GER_1939
				}
			}
			else = {
				if = {
					limit = { has_dlc = "No Step Back" }

					load_oob = GER_1936_nsb
				}
				else = {
					load_oob = GER_1936
				}
			}

			if = {
				limit = { has_start_date > 1939.1.1 } # Doesn't exist in the 19369 OOB.

				if = {
					limit = { NOT = { has_tech = paratroopers } }

					division_template = {
						name = "'Fallschirmjger'-Division"
						division_names_group = GER_PAR_01

						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
						}
					}

					every_country_division = {
						limit = { division_has_battalion_in_template = paratrooper }

						change_division_template = { division_template = "'Fallschirmjger'-Division" }
					}
					delete_unit_template_and_units = { division_template = "Fallschirmjger-Division" }
				}
			}
			if = {
				limit = { has_start_date > 1939.1.1 }

				if = {
					limit = { NOT = { has_tech = tech_mountaineers } }

					division_template = {
						name = "'Gebirgs'-Division"
						division_names_group = GER_Mnt_01

						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
						}
					}
					if = {
						limit = { has_tech = tech_engineers }

						add_units_to_division_template = {
							template_name = "'Gebirgs'-Division"

							support = {
								engineer = 0
							}
						}
					}

					every_country_division = {
						limit = { division_has_battalion_in_template = mountaineers }

						change_division_template = { division_template = "'Gebirgs'-Division" }
					}
					delete_unit_template_and_units = { division_template = "Gebirgs-Division" }
				}
			}
			else = {
				if = {
					limit = { NOT = { has_tech = tech_mountaineers } }

					division_template = {
						name = "'Gebirgs'-Brigade"
						division_names_group = GER_Mnt_01

						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
						}
					}

					every_country_division = {
						limit = { division_has_battalion_in_template = mountaineers }

						change_division_template = { division_template = "'Gebirgs'-Brigade" }
					}
					delete_unit_template_and_units = { division_template = "Gebirgs-Brigade" }
				}
			}
		}
		else_if = {
			limit = { state_originally_from_GRE = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = GRE_1939
			}
			else = {
				load_oob = GRE_1936
			}

			if = {
				limit = { NOT = { has_tech = tech_mountaineers } }

				division_template = {
					name = "'Orein' Peziko"
					division_names_group = GRE_MNT_01

					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
						infantry = { x = 1 y = 2 }
						infantry = { x = 2 y = 0 }
						infantry = { x = 2 y = 1 }
					}
				}
				if = {
					limit = { has_start_date < 1939.1.1 } # No support companies in 1939 OOB.

					if = {
						limit = { has_tech = tech_engineers }

						add_units_to_division_template = {
							template_name = "'Orein' Peziko"

							support = {
								engineer = 0
							}
						}
					}
					if = {
						limit = { has_tech = gw_artillery }

						add_units_to_division_template = {
							template_name = "'Orein' Peziko"

							support = {
								artillery = 0
							}
						}
					}
				}

				every_country_division = {
					limit = { division_has_battalion_in_template = mountaineers }

					change_division_template = { division_template = "'Orein' Peziko" }
				}
				delete_unit_template_and_units = { division_template = "Tetrgono Peziko" }
			}
		}
		else_if = {
			limit = { state_originally_from_GSM = yes }

			load_oob = GSM_1936_sea
		}
		else_if = {
			limit = { state_originally_from_GUA = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = GUA_1939
			}
			else = {
				load_oob = GUA_1936
			}
		}
		else_if = {
			limit = { state_originally_from_GXC = yes }

			load_oob = GXC_1936_sea
		}
		else_if = {
			limit = { state_originally_from_HAI = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = HAI_1939
			}
			else = {
				load_oob = HAI_1936
			}
		}
		else_if = {
			limit = { state_originally_from_HBC = yes }

			if = {
				limit = { original_tag = LOY }

				load_JAP_oob = yes
			}
			else = {
				load_oob = HBC_1936_sea
			}
		}
		else_if = {
			limit = { state_originally_from_HOL = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = HOL_1939
			}
			else = {
				load_oob = HOL_1936
			}

			if = {
				limit = { NOT = { has_tech = marines } }

				division_template = {
					name = "'Mariniersdivisie'"
					division_names_group = HOL_MAR_01

					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
					}
					priority = 2
				}

				every_country_division = {
					limit = { division_has_battalion_in_template = marine }

					change_division_template = { division_template = "'Mariniersdivisie'" }
				}
				delete_unit_template_and_units = { division_template = "Mariniersdivisie" }
			}
		}
		else_if = {
			limit = { state_originally_from_HON = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = HON_1939
			}
			else = {
				load_oob = HON_1936
			}
		}
		else_if = {
			limit = { state_originally_from_HUN = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				if = {
					limit = { has_dlc = "No Step Back" }

					load_oob = HUN_1939_nsb
				}
				else = {
					load_oob = HUN_1939
				}
			}
			else = {
				load_oob = HUN_wuw_1936
			}
		}
		else_if = {
			limit = { state_originally_from_ICE = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = ICE_1939
			}
			else = {
				load_oob = ICE_1936
			}
		}
		else_if = {
			limit = { state_originally_from_INS = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = INS_1939
			}
			else = {
				load_oob = INS_1936
			}
		}
		else_if = {
			limit = { state_originally_from_IRE = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = IRE_1939
			}
			else = {
				load_oob = IRE_1936
			}
		}
		else_if = {
			limit = { state_originally_from_IRQ = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = IRQ_1939
			}
			else = {
				load_oob = IRQ_1936
			}
			if = {
				limit = {
					has_tech = armored_car1
					original_tag = ZYI
				}

				load_ENG_oob = yes
			}
		}
		else_if = {
			limit = {
				OR = {
					state_originally_from_ITA = yes
					state_originally_from_ERI = yes
					state_originally_from_SOM = yes
					state_originally_from_LBA = yes
				}
			}

			if = {
				limit = { has_start_date > 1939.1.1 }

				if = {
					limit = { has_dlc = "No Step Back" }

					load_oob = ITA_1939_nsb
				}
				else = {
					load_oob = ITA_1939
				}
			}
			else = {
				if = {
					limit = { has_dlc = "No Step Back" }

					load_oob = ITA_1936_nsb
				}
				else = {
					load_oob = ITA_1936
				}
			}

			set_division_template_lock = {
				division_template = "Camicie Nere"
				is_locked = no
			}
			clear_division_template_cap = {
				division_template = "Camicie Nere"
			}
			set_division_template_lock = {
				division_template = "Banda Indigena Irregolare"
				is_locked = no
			}
			set_division_template_lock = {
				division_template = "Truppe Irregolari a Cavallo"
				is_locked = no
			}
			set_division_template_lock = {
				division_template = "Banda Irregolare Libica"
				is_locked = no
			}
			set_division_template_lock = {
				division_template = "Banda Irregolare Eritrea"
				is_locked = no
			}
			set_division_template_lock = {
				division_template = "Banda Irregolare Somala"
				is_locked = no
			}

			if = {
				limit = { NOT = { has_tech = tech_mountaineers } }

				every_country_division = {
					limit = { division_has_battalion_in_template = mountaineers }

					change_division_template = { division_template = "Divisione di Fanteria" }
				}
				delete_unit_template_and_units = { division_template = "Divisione Alpina" }
			}
		}
		else_if = {
			limit = {
				OR = {
					state_originally_from_JAP = yes
					state_originally_from_KOR = yes
					state_originally_from_FSM = yes
					state_originally_from_FOR = yes
					original_tag = LAL
				}
			}

			load_JAP_oob = yes
		}
		else_if = {
			limit = { state_originally_from_KHM = yes }

			load_oob = KHM_1936_sea
		}
		else_if = {
			limit = { state_originally_from_KUM = yes }

			load_oob = KUM_uprising
		}
		else_if = {
			limit = { state_originally_from_LAT = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = LAT_1939
			}
			else = {
				load_oob = LAT_1936
			}
		}
		else_if = {
			limit = { state_originally_from_LIB = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = LIB_1939
			}
			else = {
				load_oob = LIB_1936
			}
		}
		else_if = {
			limit = {
				OR = {
					state_originally_from_LIT = yes
					original_tag = IBB
				}
			}

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = LIT_1939
			}
			else = {
				load_oob = LIT_1936
			}
		}
		else_if = {
			limit = { state_originally_from_LUX = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = LUX_1939
			}
			else = {
				load_oob = LUX_1936
			}
		}
		else_if = {
			limit = { state_originally_from_MAL = yes }

			load_oob = MAL_1936
			if = {
				limit = {
					OR = {
						original_tag = EEL
						original_tag = NZI
					}
				}

				load_ENG_oob = yes
			}
		}
		else_if = {
			limit = { state_originally_from_MAN = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = MAN_1939
			}
			else = {
				load_oob = MAN_1936
			}
			load_JAP_oob = yes
		}
		else_if = {
			limit = { state_originally_from_MEN = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = MEN_1939
			}
			else = {
				load_oob = MEN_1936
			}
		}
		else_if = {
			limit = { state_originally_from_MEX = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = MEX_1939
			}
			else = {
				load_oob = MEX_1936
			}
		}
		else_if = {
			limit = { state_originally_from_MON = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = MON_1939
			}
			else = {
				load_oob = MON_1936
			}
		}
		else_if = {
			limit = { state_originally_from_MOR = yes }

			if = {
				limit = { original_tag = ZYO }

				load_SPR_oob = yes
			}
			else = {
				load_FRA_oob = yes
			}
		}
		else_if = {
			limit = { state_originally_from_NEP = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = NEP_1939
			}
			else = {
				load_oob = NEP_1936
			}

			if = {
				limit = { NOT = { has_tech = tech_mountaineers } }

				division_template = {
					name = "'Parvatarohi' Dibhijana"
					division_names_group = NEP_MTN_01

					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 0 y = 3 }
						infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
						infantry = { x = 1 y = 2 }
						infantry = { x = 1 y = 3 }
					}
				}

				every_country_division = {
					limit = { division_has_battalion_in_template = mountaineers }

					change_division_template = { division_template = "'Parvatarohi' Dibhijana" }
				}
				delete_unit_template_and_units = { division_template = "Paidala Dibhijana" }
			}
		}
		else_if = {
			limit = { state_originally_from_NIC = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = NIC_1939
			}
			else = {
				load_oob = NIC_1936
			}
		}
		else_if = {
			limit = { state_originally_from_NOR = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = NOR_1939
			}
			else = {
				load_oob = NOR_1936
			}
		}
		else_if = {
			limit = { state_originally_from_NXM = yes }

			load_oob = NXM_1936_sea
		}
		else_if = {
			limit = { state_originally_from_NZL = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = NZL_1939
			}
			else = {
				load_oob = NZL_1936
			}
		}
		else_if = {
			limit = { state_originally_from_OMA = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = OMA_1939
			}
			else = {
				load_oob = OMA_1936
			}
		}
		else_if = {
			limit = { state_originally_from_PAN = yes }

			if = {
				limit = { original_tag = LBS }

				load_USA_oob = yes
			}
			else = {
				if = {
					limit = { has_start_date > 1939.1.1 }

					load_oob = PAN_1939
				}
				else = {
					load_oob = PAN_1936
				}
			}
		}
		else_if = {
			limit = { state_originally_from_PAR = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = PAR_1939
			}
			else = {
				load_oob = PAR_1936
			}
		}
		else_if = {
			limit = { state_originally_from_PER = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = PER_1939
			}
			else = {
				load_oob = PER_1936
			}
		}
		else_if = {
			limit = { state_originally_from_PHI = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = PHI_1939
			}
			else = {
				load_oob = PHI_1936
			}
			if = {
				limit = { original_tag = EZF }

				load_USA_oob = yes
			}
		}
		else_if = {
			limit = {
				OR = {
					state_originally_from_POL = yes
					state_originally_from_POL_BLR_UKR_DNZ = yes
				}
			}

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = POL_1939
			}
			else = {
				load_oob = POL_1936
			}

			if = {
				limit = { NOT = { has_tech = tech_mountaineers } }

				every_country_division = {
					limit = { division_has_battalion_in_template = mountaineers }

					change_division_template = { division_template = "Dywizja Piechoty" }
				}
				delete_unit_template_and_units = { division_template = "Dywizja Piechoty Grskiej" }
			}
		}
		else_if = {
			limit = {
				OR = {
					state_originally_from_POR = yes
					state_originally_from_ANG = yes
					state_originally_from_MZB = yes
				}
			}

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = POR_1939
			}
			else = {
				load_oob = POR_1936
			}
		}
		else_if = {
			limit = { state_originally_from_PRC = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = PRC_1939_TSR
			}
			else = {
				load_oob = PRC_1936_TSR
			}
		}
		else_if = {
			limit = { state_originally_from_PRU = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = PRU_1939
			}
			else = {
				load_oob = PRU_1936
			}
		}
		else_if = {
			limit = {
				OR = {
					state_originally_from_RAJ = yes
					state_originally_from_PAK = yes
				}
			}

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = RAJ_1939
			}
			else = {
				load_oob = RAJ_1936_GOE
			}
		}
		else_if = {
			limit = { state_originally_from_ROM = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				if = {
					limit = { has_dlc = "No Step Back" }

					load_oob = ROM_1939_nsb
				}
				else = {
					load_oob = ROM_1939
				}
			}
			else = {
				if = {
					limit = { has_dlc = "No Step Back" }

					load_oob = ROM_1936_nsb
				}
				else = {
					load_oob = ROM_1936
				}
			}

			if = {
				limit = { NOT = { has_tech = tech_mountaineers } }

				division_template = {
					name = "Brigada de 'Munte'"
					division_names_group = ROM_MTN_01

					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
						infantry = { x = 1 y = 2 }
					}
				}

				every_country_division = {
					limit = { division_has_battalion_in_template = mountaineers }

					change_division_template = { division_template = "Brigada de 'Munte'" }
				}
				delete_unit_template_and_units = { division_template = "Brigada de Munte" }
			}
		}
		else_if = {
			limit = { state_originally_from_SAF = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = SAF_1939
			}
			else = {
				load_oob = SAF_1936
			}
		}
		else_if = {
			limit = { state_originally_from_SAU = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = SAU_1939
			}
			else = {
				load_oob = SAU_1936
			}
		}
		else_if = {
			limit = { state_originally_from_SHX = yes }

			load_oob = SHX_1936_sea
		}
		else_if = {
			limit = { state_originally_from_SIA = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = SIA_1939
			}
			else = {
				load_oob = SIA_1936
			}
		}
		else_if = {
			limit = { state_originally_from_SIC = yes }

			load_oob = SIC_1936_sea
		}
		else_if = {
			limit = { state_originally_from_SIK = yes }

			load_oob = SIK_1936_sea
		}
		else_if = {
			limit = { state_originally_from_SND = yes }

			load_oob = SND_1936_sea
		}
		else_if = {
			limit = { state_originally_from_SOV = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				if = {
					limit = { has_dlc = "No Step Back" }

					load_oob = SOV_1939_nsb
				}
				else = {
					load_oob = SOV_1939
				}
			}
			else = {
				if = {
					limit = { has_dlc = "No Step Back" }

					load_oob = SOV_1936_nsb
				}
				else = {
					load_oob = SOV_1936
				}
			}

			set_division_template_lock = {
				division_template = "NKVD Pogranichnaya Diviziya"
				is_locked = no
			}

			if = {
				limit = { has_start_date < 1939.1.1 } # Doesn't exist in the 1939 OOB.

				if = {
					limit = { NOT = { has_tech = paratroopers } }

					division_template = {
						name = "'Vozdushno-Desantnaya' Brigada"
						division_names_group = SOV_PAR_01

						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
						}
					}

					every_country_division = {
						limit = { division_has_battalion_in_template = paratrooper }

						change_division_template = { division_template = "'Vozdushno-Desantnaya' Brigada" }
					}
					delete_unit_template_and_units = { division_template = "Vozdushno-Desantnaya Brigada" }
				}
			}
			if = {
				limit = { NOT = { has_tech = tech_mountaineers } }

				division_template = {
					name = "'Gornostrelkovaya' Diviziya"
					division_names_group = SOV_MNT_01

					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
						infantry = { x = 1 y = 2 }
						infantry = { x = 2 y = 0 }
						infantry = { x = 2 y = 1 }
						infantry = { x = 2 y = 2 }
						infantry = { x = 3 y = 0 }
						infantry = { x = 3 y = 1 }
						infantry = { x = 3 y = 2 }
					}
				}
				if = {
					limit = { has_tech = tech_engineers }

					add_units_to_division_template = {
						template_name = "'Gornostrelkovaya' Diviziya"

						support = {
							engineer = 0
						}
					}
				}
				if = {
					limit = { has_tech = gw_artillery }

					add_units_to_division_template = {
						template_name = "'Gornostrelkovaya' Diviziya"

						support = {
							artillery = 0
						}
					}
				}

				every_country_division = {
					limit = { division_has_battalion_in_template = mountaineers }

					change_division_template = { division_template = "'Gornostrelkovaya' Diviziya" }
				}
				delete_unit_template_and_units = { division_template = "Gornostrelkovaya Diviziya" }
			}
		}
		else_if = {
			limit = { state_originally_from_SPR = yes }

			load_SPR_oob = yes
		}
		else_if = {
			limit = { state_originally_from_SWE = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = SWE_1939
			}
			else = {
				load_oob = SWE_1936
			}
		}
		else_if = {
			limit = { state_originally_from_SWI = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = SWI_1939_BBA
			}
			else = {
				load_oob = SWI_1936_BBA
			}

			division_template = { # Taken from their no-BBA OOB, which isn't used here, but they should start with a Infantry Division template.
				name = "Infanterie-Division"
				division_names_group = SWI_INF_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
				}
			}
			if = {
				limit = { has_tech = tech_recon }

				add_units_to_division_template = {
					template_name = "Infanterie-Division"

					support = {
						recon = 0
					}
				}
			}
			if = {
				limit = { has_tech = tech_engineers }

				add_units_to_division_template = {
					template_name = "Infanterie-Division"

					support = {
						engineer = 0
					}
				}
			}
			if = {
				limit = { NOT = { has_tech = tech_mountaineers } }

				division_template = {
					name = "'Gebirgsinfanterie'"
					division_names_group = SWI_MNT_01

					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 1 y = 0 }
					}
				}
				if = {
					limit = { has_tech = tech_recon }

					add_units_to_division_template = {
						template_name = "'Gebirgsinfanterie'"

						support = {
							recon = 0
						}
					}
				}
				if = {
					limit = { has_tech = gw_artillery }

					add_units_to_division_template = {
						template_name = "'Gebirgsinfanterie'"

						support = {
							artillery = 0
						}
					}
				}

				every_country_division = {
					limit = { division_has_battalion_in_template = mountaineers }

					change_division_template = { division_template = "'Gebirgsinfanterie'" }
				}
				delete_unit_template_and_units = { division_template = "Gebirgsinfanterie" }
				delete_unit_template_and_units = { division_template = "Infanterie de montagne" }
				delete_unit_template_and_units = { division_template = "Fanteria di montagna" }
			}

			set_division_template_lock = {
				division_template = "Leichte-Brigade"
				is_locked = no
			}
		}
		else_if = {
			limit = { state_originally_from_TAN = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = TAN_1939
			}
			else = {
				load_oob = TAN_1936
			}
		}
		else_if = {
			limit = { state_originally_from_TIB = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = TIB_1939
			}
			else = {
				load_oob = TIB_1936
			}
		}
		else_if = {
			limit = {
				OR = {
					state_originally_from_TUR = yes
					state_originally_from_KUR = yes
				}
			}

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = TUR_1939
			}
			else = {
				if = {
					limit = { has_dlc = "No Step Back" }

					load_oob = TUR_1936_nsb
				}
				else = {
					load_oob = TUR_1936
				}
			}

			if = {
				limit = { NOT = { has_tech = tech_mountaineers } }

				every_country_division = {
					limit = { division_has_battalion_in_template = mountaineers }

					change_division_template = { division_template = "Bogazi Tugay" }
				}
				delete_unit_template_and_units = { division_template = "Dag Tugayi" }
			}
		}
		else_if = {
			limit = { state_originally_from_URG = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = URG_1939
			}
			else = {
				load_oob = URG_1936
			}
		}
		else_if = {
			limit = {
				OR = {
					state_originally_from_USA = yes
					original_tag = MFC # LEB
				}
			}

			load_USA_oob = yes
		}
		else_if = {
			limit = { state_originally_from_VEN = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				load_oob = VEN_1939
			}
			else = {
				load_oob = VEN_1936
			}
		}
		else_if = {
			limit = { state_originally_from_XIC = yes }

			load_oob = XIC_1936_sea
		}
		else_if = {
			limit = { state_originally_from_XSM = yes }

			load_oob = XSM_1936_sea
		}
		else_if = {
			limit = { state_originally_from_YEM = yes }

			if = {
				limit = { original_tag = LSY }

				load_ENG_oob = yes
			}
			else = {
				if = {
					limit = { has_start_date > 1939.1.1 }

					load_oob = YEM_1939
				}
				else = {
					load_oob = YEM_1936
				}
			}
		}
		else_if = {
			limit = { state_originally_from_YUG = yes }

			if = {
				limit = { has_start_date > 1939.1.1 }

				if = {
					limit = { has_dlc = "No Step Back" }

					load_oob = YUG_1939_nsb
				}
				else = {
					load_oob = YUG_1939
				}
			}
			else = {
				if = {
					limit = { has_dlc = "No Step Back" }

					load_oob = YUG_1936_nsb
				}
				else = {
					load_oob = YUG_1936
				}
			}

			if = {
				limit = { NOT = { has_tech = tech_mountaineers } }

				division_template = {
					name = "'Gorska' Pesadija"
					division_names_group = YUG_MTN_01

					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
					}
				}
				if = {
					limit = { has_tech = tech_engineers }

					add_units_to_division_template = {
						template_name = "'Gorska' Pesadija"

						support = {
							engineer = 0
						}
					}
				}

				every_country_division = {
					limit = { division_has_battalion_in_template = mountaineers }

					change_division_template = { division_template = "'Gorska' Pesadija" }
				}
				delete_unit_template_and_units = { division_template = "Gorska Pesadija" }
			}
		}
		else_if = {
			limit = { state_originally_from_YUN = yes }

			load_oob = YUN_1936_sea
		}

		every_state = {
			if = {
				limit = { NOT = { is_owned_by = PREV } }

				PREV = { delete_unit = { state = PREV } }
			}
		}
	}
}

load_ENG_oob = {
	if = {
		limit = { has_start_date > 1939.1.1 }

		if = {
			limit = { has_dlc = "No Step Back" }

			load_oob = ENG_1939_nsb
		}
		else = {
			load_oob = ENG_1939
		}
	}
	else = {
		if = {
			limit = { has_dlc = "No Step Back" }

			if = {
				limit = { has_dlc = "La Resistance" }

				load_oob = ENG_1936_nsb_LaR
			}
			else = {
				load_oob = ENG_1936_nsb
			}
		}
		else = {
			if = {
				limit = { has_dlc = "La Resistance" }

				load_oob = ENG_1936_LaR
			}
			else = {
				load_oob = ENG_1936
			}
		}
	}

	if = {
		limit = { NOT = { has_tech = armored_car1 } }

		delete_unit_template_and_units = { division_template = "Armoured Car Company" }
	}
	if = {
		limit = {
			NOT = {
				has_tech = gwtank
				has_tech = gwtank_chassis
			}
		}

		delete_unit_template_and_units = { division_template = "Tank Brigade" }
	}
}

load_FRA_oob = {
	if = {
		limit = { has_start_date > 1939.1.1 }

		if = {
			limit = { has_dlc = "No Step Back" }

			load_oob = FRA_1939_nsb
		}
		else = {
			load_oob = FRA_1939
		}
	}
	else = {
		if = {
			limit = { has_dlc = "No Step Back" }

			load_oob = FRA_1936_nsb
		}
		else = {
			load_oob = FRA_1936
		}
	}

	if = {
		limit = { NOT = { has_tech = tech_mountaineers } }

		division_template = {
			name = "Division d'Infanterie 'Alpine'"
			division_names_group = FRA_MNT_01

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				infantry = { x = 3 y = 0 }
				infantry = { x = 3 y = 1 }
				infantry = { x = 3 y = 2 }
			}
		}
		if = {
			limit = {
				has_start_date > 1939.1.1
				has_tech = gw_artillery
			}

			add_units_to_division_template = {
				template_name = "Division d'Infanterie 'Alpine'"

				support = {
					artillery = 0
				}
			}
		}

		every_country_division = {
			limit = { division_has_battalion_in_template = mountaineers }

			change_division_template = { division_template = "Division d'Infanterie 'Alpine'" }
		}
		delete_unit_template_and_units = { division_template = "Division d'Infanterie Alpine" }
	}
	if = {
		limit = {
			NOT = {
				has_tech = gwtank
				has_tech = gwtank_chassis
			}
		}

		delete_unit_template_and_units = { division_template = "Brigade de Chars de Combat" }
	}
}

load_JAP_oob = {
	if = {
		limit = { has_start_date > 1939.1.1 }

		if = {
			limit = { has_dlc = "No Step Back" }

			load_oob = JAP_1939_nsb
		}
		else = {
			load_oob = JAP_1939
		}
	}
	else = {
		if = {
			limit = { has_dlc = "No Step Back" }

			load_oob = JAP_1936_nsb
		}
		else = {
			load_oob = JAP_1936
		}
	}

	if = {
		limit = { NOT = { has_tech = marines } }

		division_template = {
			name = "'Rikusentai'"
			division_names_group = JAP_MAR_01

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
			}
			priority = 2
		}
		if = {
			limit = { has_tech = tech_engineers }

			add_units_to_division_template = {
				template_name = "'Rikusentai'"

				support = {
					engineer = 0
				}
			}
		}

		every_country_division = {
			limit = { division_has_battalion_in_template = marine }

			change_division_template = { division_template = "'Rikusentai'" }
		}
		delete_unit_template_and_units = { division_template = "Rikusentai" }
	}
}

load_SPR_oob = {
	if = {
		limit = { has_start_date > 1939.1.1 }

		load_oob = SPA_1939
	}
	else = {
		load_oob = SPR_1936
	}

	if = {
		limit = { has_start_date < 1939.1.1 } # Doesn't exist in 1939 OOB.

		if = {
			limit = { NOT = { has_tech = tech_mountaineers } }

			division_template = {
				name = "Brigada 'Montaa'"
				division_names_group = SPR_MNT_01

				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
				}
			}
			if = {
				limit = { has_tech = gw_artillery }

				add_units_to_division_template = {
					template_name = "Brigada 'Montaa'"

					support = {
						artillery = 0
					}
				}
			}

			every_country_division = {
				limit = { division_has_battalion_in_template = mountaineers }

				change_division_template = { division_template = "Brigada 'Montaa'" }
			}
			delete_unit_template_and_units = { division_template = "Brigada Montaa" }
		}
	}
}

load_USA_oob = {
	if = {
		limit = { has_start_date > 1939.1.1 }

		load_oob = USA_1939
	}
	else = {
		load_oob = USA_1936
	}

	if = {
		limit = { NOT = { has_tech = marines } }

		division_template = {
			name = "'Marine' Brigade"
			division_names_group = USA_MAR_01

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
			}
			priority = 2
		}
		if = {
			limit = { has_tech = tech_engineers }

			add_units_to_division_template = {
				template_name = "'Marine' Brigade"

				support = {
					engineer = 0
				}
			}
		}

		every_country_division = {
			limit = { division_has_battalion_in_template = marine }

			change_division_template = { division_template = "'Marine' Brigade" }
		}
		delete_unit_template_and_units = { division_template = "Marine Brigade" }
	}
}
